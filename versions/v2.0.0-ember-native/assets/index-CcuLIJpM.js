const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/babel-Cb6VwtSc.js","assets/_commonjsHelpers-BosuxZz1.js"])))=>i.map(i=>d[i]);
import{R as Input,U as Textarea,V as componentCapabilities,C as Component,W as getComponentTemplate,X as setComponentManager,s as setComponentTemplate,Y as compare,Z as isBlank,$ as isEmpty,a0 as isEqual,a1 as isNone,a2 as isPresent$1,a3 as typeOf,H as Helper,a4 as helper$1,a5 as htmlSafe,a6 as isHTMLSafe,a7 as _application,a8 as _array,t as templateOnly,a9 as _debug,aa as _destroyable,ab as _helpers,ac as _modifier,ad as _object,ae as _runloop,af as _service,a as templateFactory,ag as _owner,_ as _GlimmerComponent,ah as _tracking,n as nameFor,e as esCompat,ai as __vitePreload}from"./main-C9UU48gu.js";import{c as commonjsGlobal,a as getAugmentedNamespace,g as getDefaultExportFromCjs}from"./_commonjsHelpers-BosuxZz1.js";import{b as EventedTokenizer,E as EntityParser,n as namedCharRefs,p as parseWithoutProcessing,a as parse}from"./index-BUReOOGB.js";function _mergeNamespaces(c,r){for(var a=0;a<r.length;a++){const o=r[a];if(typeof o!="string"&&!Array.isArray(o)){for(const h in o)if(h!=="default"&&!(h in c)){const d=Object.getOwnPropertyDescriptor(o,h);d&&Object.defineProperty(c,h,d.get?d:{enumerable:!0,get:()=>o[h]})}}}return Object.freeze(Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}))}const _EmberComponent=Object.freeze(Object.defineProperty({__proto__:null,Input,Textarea,capabilities:componentCapabilities,default:Component,getComponentTemplate,setComponentManager,setComponentTemplate},Symbol.toStringTag,{value:"Module"})),_utils=Object.freeze(Object.defineProperty({__proto__:null,compare,isBlank,isEmpty,isEqual,isNone,isPresent:isPresent$1,typeOf},Symbol.toStringTag,{value:"Module"})),_EmberComponentHelper=Object.freeze(Object.defineProperty({__proto__:null,default:Helper,helper:helper$1},Symbol.toStringTag,{value:"Module"})),_template=Object.freeze(Object.defineProperty({__proto__:null,htmlSafe,isHTMLSafe},Symbol.toStringTag,{value:"Module"}));var plugin={},src={};Object.defineProperty(src,"__esModule",{value:!0});src.ImportUtil=void 0;class ImportUtil{constructor(r,a){this.babel=r,this.program=a,this.t=r.types}removeImport(r,a){for(let o of this.program.get("body")){if(!matchModule(o,r))continue;let h=o.get("specifiers").find(d=>matchSpecifier(d,a));h&&(o.node.specifiers.length===1?o.remove():h.remove())}}removeAllImports(r){for(let a of this.program.get("body"))matchModule(a,r)&&a.remove()}import(r,a,o,h){return this.unreferencedImport(r,a,o,desiredName(h,o,defaultNameHint(r)))}unreferencedImport(r,a,o,h){var d;let f=o==="*",E=!(o==="default")&&!f,C=this.findImportFrom(a),M=C?.node.specifiers.find(X=>X.type==="ImportNamespaceSpecifier");if(!(C?.node.specifiers.find(X=>X.type==="ImportSpecifier")&&f||M&&E||M&&f)&&C){let X=C.get("specifiers").find(Ae=>matchSpecifier(Ae,o));return X&&((d=r.scope.getBinding(X.node.local.name))===null||d===void 0?void 0:d.kind)==="module"?this.t.identifier(X.node.local.name):this.addSpecifier(r,C,o,h)}else{let X=this.insertAfterExistingImports(this.t.importDeclaration([],this.t.stringLiteral(a)));return this.addSpecifier(r,X,o,h)}}importForSideEffect(r){this.findImportFrom(r)||this.insertAfterExistingImports(this.t.importDeclaration([],this.t.stringLiteral(r)))}replaceWith(r,a){return this.mutate(o=>(r.replaceWith(a(o)),r),defaultNameHint(r))}insertAfter(r,a){return this.mutate(o=>r.insertAfter(a(o))[0],defaultNameHint(r))}insertBefore(r,a){return this.mutate(o=>r.insertBefore(a(o))[0],defaultNameHint(r))}mutate(r,a){let o=new Map;const h={import:(g,E,C)=>{let M=this.t.identifier("__babel_import_util_placeholder__");return o.set(M,{moduleSpecifier:g,exportedName:E,nameHint:C}),M}},d=g=>{if(!g.isIdentifier())return;let E=o.get(g.node);if(E){let C=this.unreferencedImport(g,E.moduleSpecifier,E.exportedName,desiredName(E.nameHint,E.exportedName,a));g.replaceWith(C);let M=g.scope.getBinding(C.name);if(!M)throw new Error("bug: this is supposed to never happen");M.reference(g)}};let f=r(h);return d(f),this.babel.traverse(f.node,{ReferencedIdentifier:g=>{d(g)}},f.scope,{},f),f}addSpecifier(r,a,o,h){let d=this.t.identifier(unusedNameLike$1(r,h)),f=this.buildSpecifier(o,d),g;return f.type==="ImportDefaultSpecifier"?(a.node.specifiers.unshift(f),g=a.get("specifiers.0")):(a.node.specifiers.push(f),g=a.get(`specifiers.${a.node.specifiers.length-1}`)),a.scope.registerBinding("module",g),d}buildSpecifier(r,a){switch(r){case"default":return this.t.importDefaultSpecifier(a);case"*":return this.t.importNamespaceSpecifier(a);default:return this.t.importSpecifier(a,this.t.identifier(r))}}findImportFrom(r){for(let a of this.program.get("body"))if(a.isImportDeclaration()&&a.node.source.value===r&&a.node.importKind!=="type")return a}insertAfterExistingImports(r){let a;for(let[o,h]of this.program.node.body.entries())h.type==="ImportDeclaration"&&(a=o);return a==null?(this.program.node.body.unshift(r),this.program.get("body.0")):(this.program.node.body.splice(a+1,0,r),this.program.get(`body.${a+1}`))}}src.ImportUtil=ImportUtil;function unusedNameLike$1(c,r){let a=r,o=0;for(;c.scope.hasBinding(a);)a=`${r}${o++}`;return a}function name$1(c){return c.type==="StringLiteral"?c.value:c.name}function desiredName(c,r,a){if(c){let o=c.replace(/[^a-zA-Z_]([a-z])/g,(h,d)=>d.toUpperCase());return o=o.replace(/[^a-zA-Z_]/g,""),o}return r==="default"||r==="*"?a??"a":r}function defaultNameHint(c){return c?.isIdentifier()?c.node.name:c?c.scope.generateUidIdentifierBasedOnNode(c.node).name:void 0}function matchSpecifier(c,r){switch(r){case"default":return c.isImportDefaultSpecifier();case"*":return c.isImportNamespaceSpecifier();default:return c.isImportSpecifier()&&name$1(c.node.imported)===r}}function matchModule(c,r){return c.isImportDeclaration()&&c.get("source").node.value===r}var expressionParser={},scopeLocals={},hbsUtils={};Object.defineProperty(hbsUtils,"__esModule",{value:!0});hbsUtils.astNodeHasBinding=astNodeHasBinding;function astNodeHasBinding(c,r){var a;let o=c;for(;o;){let h=(a=o.parent)===null||a===void 0?void 0:a.node;if(h?.type==="ElementNode"&&h.blockParams.includes(r)&&h.children.includes(o.node)||h?.type==="Block"&&h.blockParams.includes(r)&&h.body.includes(o.node))return!0;o=o.parent}return!1}var readOnlyArray$1={};Object.defineProperty(readOnlyArray$1,"__esModule",{value:!0});readOnlyArray$1.readOnlyArray=readOnlyArray;const mutationMethods=["copyWithin","fill","pop","push","reverse","shift","sort","splice","unshift"];function readOnlyArray(c,r="Forbidden array mutation"){return new Proxy(c,{get(a,o){return typeof o=="string"&&mutationMethods.includes(o)?()=>{throw new Error(r)}:Reflect.get(a,o)},set(a,o){throw new Error(r)},deleteProperty(){throw new Error(r)}})}var __classPrivateFieldSet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(c,r,a,o,h){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?c!==r||!h:!r.has(c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?h.call(c,a):h?h.value=a:r.set(c,a),a},__classPrivateFieldGet$1=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(c,r,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?c!==r||!o:!r.has(c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(c):o?o.value:r.get(c)},_ScopeLocals_instances,_ScopeLocals_mapping,_ScopeLocals_locals,_ScopeLocals_params,_ScopeLocals_isInJsScope;Object.defineProperty(scopeLocals,"__esModule",{value:!0});scopeLocals.ScopeLocals=void 0;const hbs_utils_1$1=hbsUtils,read_only_array_1=readOnlyArray$1;class ScopeLocals{constructor(r){_ScopeLocals_instances.add(this),_ScopeLocals_mapping.set(this,{}),_ScopeLocals_locals.set(this,[]),_ScopeLocals_params.set(this,void 0),__classPrivateFieldSet$1(this,_ScopeLocals_params,r,"f")}get locals(){return(0,read_only_array_1.readOnlyArray)(__classPrivateFieldGet$1(this,_ScopeLocals_locals,"f"),`The only supported way to manipulate locals is via the jsutils API
https://github.com/emberjs/babel-plugin-ember-template-compilation#jsutils-manipulating-javascript-from-within-ast-transforms`)}has(r){return r in __classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")}get(r){return __classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")[r]}isEmpty(){return __classPrivateFieldGet$1(this,_ScopeLocals_locals,"f").length===0}entries(){return Object.entries(__classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f"))}add(r,a){__classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")[r]=a??r,__classPrivateFieldGet$1(this,_ScopeLocals_locals,"f").includes(r)||__classPrivateFieldGet$1(this,_ScopeLocals_locals,"f").push(r)}crawl(){return r=>{let a;return{name:"scope-locals-crawl",visitor:{Template:{enter:()=>{a=new Set},exit:(o,h)=>{if(__classPrivateFieldGet$1(this,_ScopeLocals_params,"f").mode==="implicit")for(let d of a)__classPrivateFieldGet$1(this,_ScopeLocals_instances,"m",_ScopeLocals_isInJsScope).call(this,d,__classPrivateFieldGet$1(this,_ScopeLocals_params,"f").jsPath)&&this.add(d);else for(let d of Object.keys(__classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")))a.has(d)||(__classPrivateFieldGet$1(this,_ScopeLocals_locals,"f").splice(__classPrivateFieldGet$1(this,_ScopeLocals_locals,"f").indexOf(d),1),delete __classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")[d])}},PathExpression:(o,h)=>{if(o.head.type!=="VarHead")return;const d=o.head.name;(0,hbs_utils_1$1.astNodeHasBinding)(h,d)||a.add(d)},ElementNode:(o,h)=>{const d=o.tag.split(".")[0];(0,hbs_utils_1$1.astNodeHasBinding)(h,d)||a.add(d)}}}}}}scopeLocals.ScopeLocals=ScopeLocals;_ScopeLocals_mapping=new WeakMap,_ScopeLocals_locals=new WeakMap,_ScopeLocals_params=new WeakMap,_ScopeLocals_instances=new WeakSet,_ScopeLocals_isInJsScope=function(r,a){var o;let h=(o=__classPrivateFieldGet$1(this,_ScopeLocals_mapping,"f")[r])!==null&&o!==void 0?o:r;return["globalThis"].includes(h)||a.scope.getBinding(h)};Object.defineProperty(expressionParser,"__esModule",{value:!0});expressionParser.ExpressionParser=void 0;const scope_locals_1=scopeLocals;class ExpressionParser{constructor(r){this.babel=r}parseExpression(r,a){switch(a.node.type){case"ObjectExpression":return this.parseObjectExpression(r,a);case"ArrayExpression":return this.parseArrayExpression(r,a);case"StringLiteral":case"BooleanLiteral":case"NumericLiteral":return a.node.value;default:throw a.buildCodeFrameError(`${r} can only accept static options but you passed ${JSON.stringify(a.node)}`)}}parseArrayExpression(r,a){return a.get("elements").map(o=>{if(o.isSpreadElement())throw o.buildCodeFrameError("spread element is not allowed here");return o.isExpression()?this.parseExpression(r,o):null})}parseScope(r,a){let o;if(a.node.type==="ObjectMethod")o=a.node.body;else{let{value:d}=a.node;if(this.t.isObjectExpression(d))throw a.buildCodeFrameError("Passing an object as the `scope` property to inline templates is no longer supported. Please pass a function that returns an object expression instead.");(this.t.isFunctionExpression(d)||this.t.isArrowFunctionExpression(d))&&(o=d.body)}let h;if(o?.type==="ObjectExpression")h=o;else if(o?.type==="BlockStatement"){let d=o.body.filter(f=>f.type==="ReturnStatement");if(d.length!==1)throw new Error("Scope functions must have a single return statement which returns an object expression containing references to in-scope values");h=d[0].argument}if(h?.type!=="ObjectExpression")throw a.buildCodeFrameError(`Scope objects for \`${r}\` must be an object expression containing only references to in-scope values, or a function that returns an object expression containing only references to in-scope values`);return h.properties.reduce((d,f)=>{if(this.t.isSpreadElement(f))throw a.buildCodeFrameError(`Scope objects for \`${r}\` may not contain spread elements`);if(this.t.isObjectMethod(f))throw a.buildCodeFrameError(`Scope objects for \`${r}\` may not contain methods`);let{key:g,value:E}=f;if(!this.t.isStringLiteral(g)&&!this.t.isIdentifier(g))throw a.buildCodeFrameError(`Scope objects for \`${r}\` may only contain static property names`);let C=name(g);if(E.type!=="Identifier")throw a.buildCodeFrameError(`Scope objects for \`${r}\` may only contain direct references to in-scope values, e.g. { ${C} } or { ${C}: ${C} }`);return d.add(C,E.name),d},new scope_locals_1.ScopeLocals({mode:"explicit"}))}parseEval(r,a){let o;if(a.isObjectMethod())o=a.get("body");else if(a.isObjectProperty()){let Q=a.get("value");if(Q.isFunctionExpression())o=Q.get("body");else throw a.buildCodeFrameError(`unsupported syntax for \`eval\` parameter to \`${r}\`. It must be an object method or a function.`)}else throw a.buildCodeFrameError(`unsupported syntax for \`eval\` parameter to \`${r}\`. It must be an object method or a function.`);let h=o.get("body").filter(Q=>Q.isReturnStatement());if(h.length!==1)throw o.buildCodeFrameError("eval function must have a single return statement");let d=h[0].get("argument");if(!d.isCallExpression())throw h[0].buildCodeFrameError("eval function must return `eval(arguments[0])`. Found non-CallExpression.");let f=d.get("callee");if(!f.isIdentifier()||f.node.name!=="eval")throw d.buildCodeFrameError("eval function must return `eval(arguments[0])`. Found callee is not eval.");let g=d.get("arguments");if(g.length!==1)throw d.buildCodeFrameError("eval function must return `eval(arguments[0])`. Found incorrect number of arguments.");let E=g[0];if(!E.isMemberExpression())throw E.buildCodeFrameError("eval function must return `eval(arguments[0])`. Found argument is non-MemberExpression.");let C=E.get("object");if(!C.isIdentifier()||C.node.name!=="arguments")throw C.buildCodeFrameError("eval function must return `eval(arguments[0])`. Found wrong argument to eval.");let M=E.get("property");if(!M.isNumericLiteral()||M.node.value!==0)throw M.buildCodeFrameError("eval function must return `eval(arguments[0])`. Found wrong property.");return{isEval:!0}}parseObjectExpression(r,a,o=!1,h=!1){let d={};return a.get("properties").forEach(f=>{let{node:g}=f;if(this.t.isSpreadElement(g))throw f.buildCodeFrameError(`${r} does not allow spread element`);if(g.computed)throw f.buildCodeFrameError(`${r} can only accept static property names`);let{key:E}=g;if(!this.t.isIdentifier(E)&&!this.t.isStringLiteral(E))throw f.buildCodeFrameError(`${r} can only accept static property names`);let C=name(E);if(o&&C==="scope")d.scope=this.parseScope(r,f);else if(h&&C==="eval")d.eval=this.parseEval(r,f);else if(h&&C==="component")d.component=f.get("value");else{if(this.t.isObjectMethod(g))throw f.buildCodeFrameError(`${r} does not accept a method for ${C}`);let M=f.get("value");if(!M.isExpression())throw M.buildCodeFrameError("must be an expression");d[C]=this.parseExpression(r,M)}}),d}get t(){return this.babel.types}}expressionParser.ExpressionParser=ExpressionParser;function name(c){return c.type==="StringLiteral"?c.value:c.name}var jsUtils={},__classPrivateFieldSet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldSet||function(c,r,a,o,h){if(o==="m")throw new TypeError("Private method is not writable");if(o==="a"&&!h)throw new TypeError("Private accessor was defined without a setter");if(typeof r=="function"?c!==r||!h:!r.has(c))throw new TypeError("Cannot write private member to an object whose class did not declare it");return o==="a"?h.call(c,a):h?h.value=a:r.set(c,a),a},__classPrivateFieldGet=commonjsGlobal&&commonjsGlobal.__classPrivateFieldGet||function(c,r,a,o){if(a==="a"&&!o)throw new TypeError("Private accessor was defined without a getter");if(typeof r=="function"?c!==r||!o:!r.has(c))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a==="m"?o:a==="a"?o.call(c):o?o.value:r.get(c)},_JSUtils_instances,_JSUtils_babel,_JSUtils_state,_JSUtils_template,_JSUtils_addedBinding,_JSUtils_importer,_JSUtils_emitStatement,_JSUtils_parseExpression,_ExpressionContext_importer,_ExpressionContext_target;Object.defineProperty(jsUtils,"__esModule",{value:!0});jsUtils.JSUtils=void 0;const hbs_utils_1=hbsUtils;class JSUtils{constructor(r,a,o,h,d){if(_JSUtils_instances.add(this),_JSUtils_babel.set(this,void 0),_JSUtils_state.set(this,void 0),_JSUtils_template.set(this,void 0),_JSUtils_addedBinding.set(this,void 0),_JSUtils_importer.set(this,void 0),__classPrivateFieldSet(this,_JSUtils_babel,r,"f"),__classPrivateFieldSet(this,_JSUtils_state,a,"f"),__classPrivateFieldSet(this,_JSUtils_template,o,"f"),__classPrivateFieldSet(this,_JSUtils_addedBinding,h,"f"),__classPrivateFieldSet(this,_JSUtils_importer,d,"f"),!__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath){let f;for(let g of __classPrivateFieldGet(this,_JSUtils_state,"f").program.get("body")){if(!g.isImportDeclaration())break;f=g}f&&(__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath=f)}}bindExpression(r,a,o){var h;let d=unusedNameLike((h=o?.nameHint)!==null&&h!==void 0?h:"a",E=>__classPrivateFieldGet(this,_JSUtils_template,"f").scope.hasBinding(E)||(0,hbs_utils_1.astNodeHasBinding)(a,E)),f=__classPrivateFieldGet(this,_JSUtils_babel,"f").types,g=__classPrivateFieldGet(this,_JSUtils_instances,"m",_JSUtils_emitStatement).call(this,f.variableDeclaration("let",[f.variableDeclarator(f.identifier(d),__classPrivateFieldGet(this,_JSUtils_instances,"m",_JSUtils_parseExpression).call(this,__classPrivateFieldGet(this,_JSUtils_state,"f").program,r))]));return g.scope.registerBinding("let",g.get("declarations.0")),__classPrivateFieldGet(this,_JSUtils_addedBinding,"f").call(this,d),d}bindImport(r,a,o,h){let d=__classPrivateFieldGet(this,_JSUtils_importer,"f").import(__classPrivateFieldGet(this,_JSUtils_template,"f"),r,a,h?.nameHint);if(!(0,hbs_utils_1.astNodeHasBinding)(o,d.name))return __classPrivateFieldGet(this,_JSUtils_addedBinding,"f").call(this,d.name),d.name;let f=unusedNameLike(d.name,C=>__classPrivateFieldGet(this,_JSUtils_template,"f").scope.hasBinding(C)||(0,hbs_utils_1.astNodeHasBinding)(o,C)),g=__classPrivateFieldGet(this,_JSUtils_babel,"f").types,E=__classPrivateFieldGet(this,_JSUtils_instances,"m",_JSUtils_emitStatement).call(this,g.variableDeclaration("let",[g.variableDeclarator(g.identifier(f),d)]));return E.scope.registerBinding("let",E.get("declarations.0")),__classPrivateFieldGet(this,_JSUtils_addedBinding,"f").call(this,f),f}importForSideEffect(r){__classPrivateFieldGet(this,_JSUtils_importer,"f").importForSideEffect(r)}emitExpression(r){let a=__classPrivateFieldGet(this,_JSUtils_babel,"f").types;__classPrivateFieldGet(this,_JSUtils_instances,"m",_JSUtils_emitStatement).call(this,a.expressionStatement(__classPrivateFieldGet(this,_JSUtils_instances,"m",_JSUtils_parseExpression).call(this,__classPrivateFieldGet(this,_JSUtils_state,"f").program,r)))}}jsUtils.JSUtils=JSUtils;_JSUtils_babel=new WeakMap,_JSUtils_state=new WeakMap,_JSUtils_template=new WeakMap,_JSUtils_addedBinding=new WeakMap,_JSUtils_importer=new WeakMap,_JSUtils_instances=new WeakSet,_JSUtils_emitStatement=function(r){return __classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath?__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath=__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath.insertAfter(r)[0]:__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath=__classPrivateFieldGet(this,_JSUtils_state,"f").program.unshiftContainer("body",r)[0],__classPrivateFieldGet(this,_JSUtils_state,"f").lastInsertedPath},_JSUtils_parseExpression=function(r,a){let o;typeof a=="string"?o=a:o=a(new ExpressionContext(__classPrivateFieldGet(this,_JSUtils_importer,"f"),r));let h=__classPrivateFieldGet(this,_JSUtils_babel,"f").parse(o);if(!h)throw new Error(`JSUtils.bindExpression could not understand the expression: ${o}`);let d=body(h);if(d.length!==1)throw new Error(`JSUtils.bindExpression expected to find exactly one expression but found ${d.length} in: ${o}`);let f=d[0];if(f.type!=="ExpressionStatement")throw new Error(`JSUtils.bindExpression expected to find an expression but found ${f.type} in: ${o}`);return f.expression};function unusedNameLike(c,r){let a=c,o=0;for(;r(a);)a=`${c}${o++}`;return a}function body(c){return c.type==="File"?c.program.body:c.body}class ExpressionContext{constructor(r,a){_ExpressionContext_importer.set(this,void 0),_ExpressionContext_target.set(this,void 0),__classPrivateFieldSet(this,_ExpressionContext_importer,r,"f"),__classPrivateFieldSet(this,_ExpressionContext_target,a,"f")}import(r,a,o){return __classPrivateFieldGet(this,_ExpressionContext_importer,"f").import(__classPrivateFieldGet(this,_ExpressionContext_target,"f"),r,a,o).name}}_ExpressionContext_importer=new WeakMap,_ExpressionContext_target=new WeakMap;function dict(){return Object.create(null)}let assign=Object.assign;const tuple=(...c)=>c;function isPresent(c){return c.length>0}function assertPresent(c,r="unexpected empty list"){if(!isPresent(c))throw new Error(r)}const LOGGER=console;function assertNever(c,r="unexpected unreachable branch"){throw LOGGER.log("unreachable",c),LOGGER.log(`${r} :: ${JSON.stringify(c)} (${c})`),new Error("code reached unreachable")}const UNKNOWN_POSITION=Object.freeze({line:1,column:0}),SYNTHETIC_LOCATION=Object.freeze({source:"(synthetic)",start:UNKNOWN_POSITION,end:UNKNOWN_POSITION}),NON_EXISTENT_LOCATION=Object.freeze({source:"(nonexistent)",start:UNKNOWN_POSITION,end:UNKNOWN_POSITION}),BROKEN_LOCATION=Object.freeze({source:"(broken)",start:UNKNOWN_POSITION,end:UNKNOWN_POSITION});class SourceSlice{constructor(r){this.loc=r.loc,this.chars=r.chars}static synthetic(r){let a=SourceSpan.synthetic(r);return new SourceSlice({loc:a,chars:r})}static load(r,a){return new SourceSlice({loc:SourceSpan.load(r,a[1]),chars:a[0]})}getString(){return this.chars}serialize(){return[this.chars,this.loc.serialize()]}}const MatchAny="MATCH_ANY",IsInvisible="IS_INVISIBLE";class WhenList{constructor(r){this._whens=r}first(r){for(let a of this._whens){let o=a.match(r);if(isPresent(o))return o[0]}return null}}class When{constructor(){this._map=new Map}get(r,a){let o=this._map.get(r);return o||(o=a(),this._map.set(r,o),o)}add(r,a){this._map.set(r,a)}match(r){let a=patternFor(r),o=[],h=this._map.get(a),d=this._map.get(MatchAny);return h&&o.push(h),d&&o.push(d),o}}function match(c){return c(new Matcher).check()}class Matcher{constructor(){this._whens=new When}check(){return(r,a)=>this.matchFor(r.kind,a.kind)(r,a)}matchFor(r,a){let o=this._whens.match(r);return new WhenList(o).first(a)}when(r,a,o){return this._whens.get(r,()=>new When).add(a,o),this}}function patternFor(c){switch(c){case"Broken":case"InternalsSynthetic":case"NonExistent":return IsInvisible;default:return c}}const BROKEN="BROKEN";class SourceOffset{constructor(r){this.data=r}static forHbsPos(r,a){return new HbsPosition(r,a,null).wrap()}static broken(r=UNKNOWN_POSITION){return new InvisiblePosition("Broken",r).wrap()}get offset(){let r=this.data.toCharPos();return r===null?null:r.offset}eql(r){return eql(this.data,r.data)}until(r){return span(this.data,r.data)}move(r){let a=this.data.toCharPos();if(a===null)return SourceOffset.broken();{let o=a.offset+r;return a.source.check(o)?new CharPosition(a.source,o).wrap():SourceOffset.broken()}}collapsed(){return span(this.data,this.data)}toJSON(){return this.data.toJSON()}}class CharPosition{constructor(r,a){this.source=r,this.charPos=a,this.kind="CharPosition",this._locPos=null}toCharPos(){return this}toJSON(){let r=this.toHbsPos();return r===null?UNKNOWN_POSITION:r.toJSON()}wrap(){return new SourceOffset(this)}get offset(){return this.charPos}toHbsPos(){let r=this._locPos;if(r===null){let a=this.source.hbsPosFor(this.charPos);a===null?this._locPos=r=BROKEN:this._locPos=r=new HbsPosition(this.source,a,this.charPos)}return r===BROKEN?null:r}}class HbsPosition{constructor(r,a,o=null){this.source=r,this.hbsPos=a,this.kind="HbsPosition",this._charPos=o===null?null:new CharPosition(r,o)}toCharPos(){let r=this._charPos;if(r===null){let a=this.source.charPosFor(this.hbsPos);a===null?this._charPos=r=BROKEN:this._charPos=r=new CharPosition(this.source,a)}return r===BROKEN?null:r}toJSON(){return this.hbsPos}wrap(){return new SourceOffset(this)}toHbsPos(){return this}}class InvisiblePosition{constructor(r,a){this.kind=r,this.pos=a}toCharPos(){return null}toJSON(){return this.pos}wrap(){return new SourceOffset(this)}get offset(){return null}}const eql=match(c=>c.when("HbsPosition","HbsPosition",({hbsPos:r},{hbsPos:a})=>r.column===a.column&&r.line===a.line).when("CharPosition","CharPosition",({charPos:r},{charPos:a})=>r===a).when("CharPosition","HbsPosition",({offset:r},a)=>{var o;return r===((o=a.toCharPos())===null||o===void 0?void 0:o.offset)}).when("HbsPosition","CharPosition",(r,{offset:a})=>{var o;return((o=r.toCharPos())===null||o===void 0?void 0:o.offset)===a}).when(MatchAny,MatchAny,()=>!1));class SourceSpan{constructor(r){this.data=r,this.isInvisible=r.kind!=="CharPosition"&&r.kind!=="HbsPosition"}static get NON_EXISTENT(){return new InvisibleSpan("NonExistent",NON_EXISTENT_LOCATION).wrap()}static load(r,a){if(typeof a=="number")return SourceSpan.forCharPositions(r,a,a);if(typeof a=="string")return SourceSpan.synthetic(a);if(Array.isArray(a))return SourceSpan.forCharPositions(r,a[0],a[1]);if(a==="NonExistent")return SourceSpan.NON_EXISTENT;if(a==="Broken")return SourceSpan.broken(BROKEN_LOCATION);assertNever(a)}static forHbsLoc(r,a){let o=new HbsPosition(r,a.start),h=new HbsPosition(r,a.end);return new HbsSpan(r,{start:o,end:h},a).wrap()}static forCharPositions(r,a,o){let h=new CharPosition(r,a),d=new CharPosition(r,o);return new CharPositionSpan(r,{start:h,end:d}).wrap()}static synthetic(r){return new InvisibleSpan("InternalsSynthetic",NON_EXISTENT_LOCATION,r).wrap()}static broken(r=BROKEN_LOCATION){return new InvisibleSpan("Broken",r).wrap()}getStart(){return this.data.getStart().wrap()}getEnd(){return this.data.getEnd().wrap()}get loc(){let r=this.data.toHbsSpan();return r===null?BROKEN_LOCATION:r.toHbsLoc()}get module(){return this.data.getModule()}get startPosition(){return this.loc.start}get endPosition(){return this.loc.end}toJSON(){return this.loc}withStart(r){return span(r.data,this.data.getEnd())}withEnd(r){return span(this.data.getStart(),r.data)}asString(){return this.data.asString()}toSlice(r){let a=this.data.asString();return r!==void 0&&a!==r&&console.warn(`unexpectedly found ${JSON.stringify(a)} when slicing source, but expected ${JSON.stringify(r)}`),new SourceSlice({loc:this,chars:r||a})}get start(){return this.loc.start}set start(r){this.data.locDidUpdate({start:r})}get end(){return this.loc.end}set end(r){this.data.locDidUpdate({end:r})}get source(){return this.module}collapse(r){switch(r){case"start":return this.getStart().collapsed();case"end":return this.getEnd().collapsed()}}extend(r){return span(this.data.getStart(),r.data.getEnd())}serialize(){return this.data.serialize()}slice({skipStart:r=0,skipEnd:a=0}){return span(this.getStart().move(r).data,this.getEnd().move(-a).data)}sliceStartChars({skipStart:r=0,chars:a}){return span(this.getStart().move(r).data,this.getStart().move(r+a).data)}sliceEndChars({skipEnd:r=0,chars:a}){return span(this.getEnd().move(r-a).data,this.getStart().move(-r).data)}}class CharPositionSpan{constructor(r,a){this.source=r,this.charPositions=a,this.kind="CharPosition",this._locPosSpan=null}wrap(){return new SourceSpan(this)}asString(){return this.source.slice(this.charPositions.start.charPos,this.charPositions.end.charPos)}getModule(){return this.source.module}getStart(){return this.charPositions.start}getEnd(){return this.charPositions.end}locDidUpdate(){}toHbsSpan(){let r=this._locPosSpan;if(r===null){let a=this.charPositions.start.toHbsPos(),o=this.charPositions.end.toHbsPos();a===null||o===null?r=this._locPosSpan=BROKEN:r=this._locPosSpan=new HbsSpan(this.source,{start:a,end:o})}return r===BROKEN?null:r}serialize(){let{start:{charPos:r},end:{charPos:a}}=this.charPositions;return r===a?r:[r,a]}toCharPosSpan(){return this}}class HbsSpan{constructor(r,a,o=null){this.source=r,this.hbsPositions=a,this.kind="HbsPosition",this._charPosSpan=null,this._providedHbsLoc=o}serialize(){let r=this.toCharPosSpan();return r===null?"Broken":r.wrap().serialize()}wrap(){return new SourceSpan(this)}updateProvided(r,a){this._providedHbsLoc&&(this._providedHbsLoc[a]=r),this._charPosSpan=null,this._providedHbsLoc={start:r,end:r}}locDidUpdate({start:r,end:a}){r!==void 0&&(this.updateProvided(r,"start"),this.hbsPositions.start=new HbsPosition(this.source,r,null)),a!==void 0&&(this.updateProvided(a,"end"),this.hbsPositions.end=new HbsPosition(this.source,a,null))}asString(){let r=this.toCharPosSpan();return r===null?"":r.asString()}getModule(){return this.source.module}getStart(){return this.hbsPositions.start}getEnd(){return this.hbsPositions.end}toHbsLoc(){return{start:this.hbsPositions.start.hbsPos,end:this.hbsPositions.end.hbsPos}}toHbsSpan(){return this}toCharPosSpan(){let r=this._charPosSpan;if(r===null){let a=this.hbsPositions.start.toCharPos(),o=this.hbsPositions.end.toCharPos();if(a&&o)r=this._charPosSpan=new CharPositionSpan(this.source,{start:a,end:o});else return r=this._charPosSpan=BROKEN,null}return r===BROKEN?null:r}}class InvisibleSpan{constructor(r,a,o=null){this.kind=r,this.loc=a,this.string=o}serialize(){switch(this.kind){case"Broken":case"NonExistent":return this.kind;case"InternalsSynthetic":return this.string||""}}wrap(){return new SourceSpan(this)}asString(){return this.string||""}locDidUpdate({start:r,end:a}){r!==void 0&&(this.loc.start=r),a!==void 0&&(this.loc.end=a)}getModule(){return"an unknown module"}getStart(){return new InvisiblePosition(this.kind,this.loc.start)}getEnd(){return new InvisiblePosition(this.kind,this.loc.end)}toCharPosSpan(){return this}toHbsSpan(){return null}toHbsLoc(){return BROKEN_LOCATION}}const span=match(c=>c.when("HbsPosition","HbsPosition",(r,a)=>new HbsSpan(r.source,{start:r,end:a}).wrap()).when("CharPosition","CharPosition",(r,a)=>new CharPositionSpan(r.source,{start:r,end:a}).wrap()).when("CharPosition","HbsPosition",(r,a)=>{let o=a.toCharPos();return o===null?new InvisibleSpan("Broken",BROKEN_LOCATION).wrap():span(r,o)}).when("HbsPosition","CharPosition",(r,a)=>{let o=r.toCharPos();return o===null?new InvisibleSpan("Broken",BROKEN_LOCATION).wrap():span(o,a)}).when(IsInvisible,MatchAny,r=>new InvisibleSpan(r.kind,BROKEN_LOCATION).wrap()).when(MatchAny,IsInvisible,(r,a)=>new InvisibleSpan(a.kind,BROKEN_LOCATION).wrap()));class Source{constructor(r,a="an unknown module"){this.source=r,this.module=a}check(r){return r>=0&&r<=this.source.length}slice(r,a){return this.source.slice(r,a)}offsetFor(r,a){return SourceOffset.forHbsPos(this,{line:r,column:a})}spanFor({start:r,end:a}){return SourceSpan.forHbsLoc(this,{start:{line:r.line,column:r.column},end:{line:a.line,column:a.column}})}hbsPosFor(r){let a=0,o=0;if(r>this.source.length)return null;for(;;){let h=this.source.indexOf(`
`,o);if(r<=h||h===-1)return{line:a+1,column:r-o};a+=1,o=h+1}}charPosFor(r){let{line:a,column:o}=r,d=this.source.length,f=0,g=0;for(;;){if(g>=d)return d;let E=this.source.indexOf(`
`,g);if(E===-1&&(E=this.source.length),f===a-1)return g+o>E?E:(this.hbsPosFor(g+o),g+o);if(E===-1)return 0;f+=1,g=E+1}}}class PathExpressionImplV1{constructor(r,a,o,h){this.original=r,this.loc=h,this.type="PathExpression",this.this=!1,this.data=!1,this._head=void 0;let d=o.slice();a.type==="ThisHead"?this.this=!0:a.type==="AtHead"?(this.data=!0,d.unshift(a.name.slice(1))):d.unshift(a.name),this.parts=d}get head(){if(this._head)return this._head;let r;this.this?r="this":this.data?r=`@${this.parts[0]}`:r=this.parts[0];let a=this.loc.collapse("start").sliceStartChars({chars:r.length}).loc;return this._head=publicBuilder.head(r,a)}get tail(){return this.this?this.parts:this.parts.slice(1)}}let _SOURCE;function SOURCE(){return _SOURCE||(_SOURCE=new Source("","(synthetic)")),_SOURCE}function buildMustache(c,r,a,o,h,d){return typeof c=="string"&&(c=buildPath(c)),{type:"MustacheStatement",path:c,params:r||[],hash:a||buildHash([]),escaped:!o,trusting:!!o,loc:buildLoc(h||null),strip:d||{open:!1,close:!1}}}function buildBlock(c,r,a,o,h,d,f,g,E){let C,M;return o.type==="Template"?C=assign({},o,{type:"Block"}):C=o,h!=null&&h.type==="Template"?M=assign({},h,{type:"Block"}):M=h,{type:"BlockStatement",path:buildPath(c),params:r||[],hash:a||buildHash([]),program:C||null,inverse:M||null,loc:buildLoc(d||null),openStrip:f||{open:!1,close:!1},inverseStrip:g||{open:!1,close:!1},closeStrip:E||{open:!1,close:!1}}}function buildElementModifier(c,r,a,o){return{type:"ElementModifierStatement",path:buildPath(c),params:r||[],hash:a||buildHash([]),loc:buildLoc(o||null)}}function buildPartial(c,r,a,o,h){return{type:"PartialStatement",name:c,params:r||[],hash:a||buildHash([]),indent:o||"",strip:{open:!1,close:!1},loc:buildLoc(h||null)}}function buildComment(c,r){return{type:"CommentStatement",value:c,loc:buildLoc(r||null)}}function buildMustacheComment(c,r){return{type:"MustacheCommentStatement",value:c,loc:buildLoc(r||null)}}function buildConcat(c,r){if(!isPresent(c))throw new Error("b.concat requires at least one part");return{type:"ConcatStatement",parts:c||[],loc:buildLoc(r||null)}}function buildElement(c,r={}){let{attrs:a,blockParams:o,modifiers:h,comments:d,children:f,loc:g}=r,E,C=!1;return typeof c=="object"?(C=c.selfClosing,E=c.name):c.slice(-1)==="/"?(E=c.slice(0,-1),C=!0):E=c,{type:"ElementNode",tag:E,selfClosing:C,attributes:a||[],blockParams:o||[],modifiers:h||[],comments:d||[],children:f||[],loc:buildLoc(g||null)}}function buildAttr(c,r,a){return{type:"AttrNode",name:c,value:r,loc:buildLoc(a||null)}}function buildText(c,r){return{type:"TextNode",chars:c||"",loc:buildLoc(r||null)}}function buildSexpr(c,r,a,o){return{type:"SubExpression",path:buildPath(c),params:r||[],hash:a||buildHash([]),loc:buildLoc(o||null)}}function headToString$1(c){switch(c.type){case"AtHead":return{original:c.name,parts:[c.name]};case"ThisHead":return{original:"this",parts:[]};case"VarHead":return{original:c.name,parts:[c.name]}}}function buildHead(c,r){let[a,...o]=c.split("."),h;return a==="this"?h={type:"ThisHead",loc:buildLoc(r||null)}:a[0]==="@"?h={type:"AtHead",name:a,loc:buildLoc(r||null)}:h={type:"VarHead",name:a,loc:buildLoc(r||null)},{head:h,tail:o}}function buildThis(c){return{type:"ThisHead",loc:buildLoc(c||null)}}function buildAtName(c,r){return{type:"AtHead",name:c,loc:buildLoc(r||null)}}function buildVar(c,r){return{type:"VarHead",name:c,loc:buildLoc(r||null)}}function buildHeadFromString(c,r){return c[0]==="@"?buildAtName(c,r):c==="this"?buildThis(r):buildVar(c,r)}function buildNamedBlockName(c,r){return{type:"NamedBlockName",name:c,loc:buildLoc(r||null)}}function buildCleanPath(c,r,a){let{original:o,parts:h}=headToString$1(c),d=[...h,...r],f=[...o,...d].join(".");return new PathExpressionImplV1(f,c,r,buildLoc(a||null))}function buildPath(c,r){if(typeof c!="string"){if("type"in c)return c;{let{head:h,tail:d}=buildHead(c.head,SourceSpan.broken()),{original:f}=headToString$1(h);return new PathExpressionImplV1([f,...d].join("."),h,d,buildLoc(r||null))}}let{head:a,tail:o}=buildHead(c,SourceSpan.broken());return new PathExpressionImplV1(c,a,o,buildLoc(r||null))}function buildLiteral(c,r,a){return{type:c,value:r,original:r,loc:buildLoc(a||null)}}function buildHash(c,r){return{type:"Hash",pairs:c||[],loc:buildLoc(r||null)}}function buildPair(c,r,a){return{type:"HashPair",key:c,value:r,loc:buildLoc(a||null)}}function buildProgram(c,r,a){return{type:"Template",body:c||[],blockParams:r||[],loc:buildLoc(a||null)}}function buildBlockItself(c,r,a=!1,o){return{type:"Block",body:c||[],blockParams:r||[],chained:a,loc:buildLoc(o||null)}}function buildTemplate(c,r,a){return{type:"Template",body:c||[],blockParams:r||[],loc:buildLoc(a||null)}}function buildPosition(c,r){return{line:c,column:r}}function buildLoc(...c){if(c.length===1){let r=c[0];return r&&typeof r=="object"?SourceSpan.forHbsLoc(SOURCE(),r):SourceSpan.forHbsLoc(SOURCE(),SYNTHETIC_LOCATION)}else{let[r,a,o,h,d]=c,f=d?new Source("",d):SOURCE();return SourceSpan.forHbsLoc(f,{start:{line:r,column:a},end:{line:o,column:h}})}}const publicBuilder={mustache:buildMustache,block:buildBlock,partial:buildPartial,comment:buildComment,mustacheComment:buildMustacheComment,element:buildElement,elementModifier:buildElementModifier,attr:buildAttr,text:buildText,sexpr:buildSexpr,concat:buildConcat,hash:buildHash,pair:buildPair,literal:buildLiteral,program:buildProgram,blockItself:buildBlockItself,template:buildTemplate,loc:buildLoc,pos:buildPosition,path:buildPath,fullPath:buildCleanPath,head:buildHeadFromString,at:buildAtName,var:buildVar,this:buildThis,blockName:buildNamedBlockName,string:literal("StringLiteral"),boolean:literal("BooleanLiteral"),number:literal("NumberLiteral"),undefined(){return buildLiteral("UndefinedLiteral",void 0)},null(){return buildLiteral("NullLiteral",null)}};function literal(c){return function(r,a){return buildLiteral(c,r,a)}}const api$1=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));class StrictResolution{constructor(){this.isAngleBracket=!1}resolution(){return 31}serialize(){return"Strict"}}const STRICT_RESOLUTION=new StrictResolution;class LooseModeResolution{constructor(r,a=!1){this.ambiguity=r,this.isAngleBracket=a}static namespaced(r,a=!1){return new LooseModeResolution({namespaces:[r],fallback:!1},a)}static fallback(){return new LooseModeResolution({namespaces:[],fallback:!0})}static append({invoke:r}){return new LooseModeResolution({namespaces:["Component","Helper"],fallback:!r})}static trustingAppend({invoke:r}){return new LooseModeResolution({namespaces:["Helper"],fallback:!r})}static attr(){return new LooseModeResolution({namespaces:["Helper"],fallback:!0})}resolution(){if(this.ambiguity.namespaces.length===0)return 31;if(this.ambiguity.namespaces.length===1){if(this.ambiguity.fallback)return 36;switch(this.ambiguity.namespaces[0]){case"Helper":return 37;case"Modifier":return 38;case"Component":return 39}}else return this.ambiguity.fallback?34:35}serialize(){return this.ambiguity.namespaces.length===0?"Loose":this.ambiguity.namespaces.length===1?this.ambiguity.fallback?["ambiguous","Attr"]:["ns",this.ambiguity.namespaces[0]]:this.ambiguity.fallback?["ambiguous","Append"]:["ambiguous","Invoke"]}}const ARGUMENT_RESOLUTION=LooseModeResolution.fallback();function loadResolution(c){if(typeof c=="string")switch(c){case"Loose":return LooseModeResolution.fallback();case"Strict":return STRICT_RESOLUTION}switch(c[0]){case"ambiguous":switch(c[1]){case"Append":return LooseModeResolution.append({invoke:!1});case"Attr":return LooseModeResolution.attr();case"Invoke":return LooseModeResolution.append({invoke:!0})}case"ns":return LooseModeResolution.namespaced(c[1])}}function node(c){if(c!==void 0){const r=c;return{fields(){return class{constructor(a){this.type=r,assign(this,a)}}}}}else return{fields(){return class{constructor(r){assign(this,r)}}}}}class Args extends node().fields(){static empty(r){return new Args({loc:r,positional:PositionalArguments.empty(r),named:NamedArguments.empty(r)})}static named(r){return new Args({loc:r.loc,positional:PositionalArguments.empty(r.loc.collapse("end")),named:r})}nth(r){return this.positional.nth(r)}get(r){return this.named.get(r)}isEmpty(){return this.positional.isEmpty()&&this.named.isEmpty()}}class PositionalArguments extends node().fields(){static empty(r){return new PositionalArguments({loc:r,exprs:[]})}get size(){return this.exprs.length}nth(r){return this.exprs[r]||null}isEmpty(){return this.exprs.length===0}}class NamedArguments extends node().fields(){static empty(r){return new NamedArguments({loc:r,entries:[]})}get size(){return this.entries.length}get(r){let a=this.entries.filter(o=>o.name.chars===r)[0];return a?a.value:null}isEmpty(){return this.entries.length===0}}class NamedArgument{constructor(r){this.loc=r.name.loc.extend(r.value.loc),this.name=r.name,this.value=r.value}}class HtmlAttr extends node("HtmlAttr").fields(){}class SplatAttr extends node("SplatAttr").fields(){}class ComponentArg extends node().fields(){toNamedArgument(){return new NamedArgument({name:this.name,value:this.value})}}class ElementModifier extends node("ElementModifier").fields(){}class SpanList{constructor(r=[]){this._span=r}static range(r,a=SourceSpan.NON_EXISTENT){return new SpanList(r.map(loc)).getRangeOffset(a)}add(r){this._span.push(r)}getRangeOffset(r){if(this._span.length===0)return r;{let a=this._span[0],o=this._span[this._span.length-1];return a.extend(o)}}}function loc(c){if(Array.isArray(c)){let r=c[0],a=c[c.length-1];return loc(r).extend(loc(a))}else return c instanceof SourceSpan?c:c.loc}function hasSpan(c){return!(Array.isArray(c)&&c.length===0)}function maybeLoc(c,r){return hasSpan(c)?loc(c):r}class GlimmerComment extends node("GlimmerComment").fields(){}class HtmlText extends node("HtmlText").fields(){}class HtmlComment extends node("HtmlComment").fields(){}class AppendContent extends node("AppendContent").fields(){get callee(){return this.value.type==="Call"?this.value.callee:this.value}get args(){return this.value.type==="Call"?this.value.args:Args.empty(this.value.loc.collapse("end"))}}class InvokeBlock extends node("InvokeBlock").fields(){}class InvokeComponent extends node("InvokeComponent").fields(){get args(){let r=this.componentArgs.map(a=>a.toNamedArgument());return Args.named(new NamedArguments({loc:SpanList.range(r,this.callee.loc.collapse("end")),entries:r}))}}class SimpleElement extends node("SimpleElement").fields(){get args(){let r=this.componentArgs.map(a=>a.toNamedArgument());return Args.named(new NamedArguments({loc:SpanList.range(r,this.tag.loc.collapse("end")),entries:r}))}}class LiteralExpression extends node("Literal").fields(){toSlice(){return new SourceSlice({loc:this.loc,chars:this.value})}}function isLiteral(c,r){return c.type==="Literal"?r===void 0?!0:r==="null"?c.value===null:typeof c.value===r:!1}class PathExpression extends node("Path").fields(){}class CallExpression extends node("Call").fields(){}class DeprecatedCallExpression extends node("DeprecatedCall").fields(){}class InterpolateExpression extends node("Interpolate").fields(){}class ThisReference extends node("This").fields(){}class ArgReference extends node("Arg").fields(){}class LocalVarReference extends node("Local").fields(){}class FreeVarReference extends node("Free").fields(){}class Template extends node().fields(){}class Block extends node().fields(){}class NamedBlocks extends node().fields(){get(r){return this.blocks.filter(a=>a.name.chars===r)[0]||null}}class NamedBlock extends node().fields(){get args(){let r=this.componentArgs.map(a=>a.toNamedArgument());return Args.named(new NamedArguments({loc:SpanList.range(r,this.name.loc.collapse("end")),entries:r}))}}const api=Object.freeze(Object.defineProperty({__proto__:null,ARGUMENT_RESOLUTION,AppendContent,ArgReference,Args,Block,CallExpression,ComponentArg,DeprecatedCallExpression,ElementModifier,FreeVarReference,GlimmerComment,HtmlAttr,HtmlComment,HtmlText,InterpolateExpression,InvokeBlock,InvokeComponent,LiteralExpression,LocalVarReference,LooseModeResolution,NamedArgument,NamedArguments,NamedBlock,NamedBlocks,PathExpression,PositionalArguments,STRICT_RESOLUTION,SimpleElement,SplatAttr,StrictResolution,Template,ThisReference,isLiteral,loadResolution,node},Symbol.toStringTag,{value:"Module"})),ATTR_VALUE_REGEX_TEST=/[\xA0"&]/,ATTR_VALUE_REGEX_REPLACE=new RegExp(ATTR_VALUE_REGEX_TEST.source,"g"),TEXT_REGEX_TEST=/[\xA0&<>]/,TEXT_REGEX_REPLACE=new RegExp(TEXT_REGEX_TEST.source,"g");function attrValueReplacer(c){switch(c.charCodeAt(0)){case 160:return"&nbsp;";case 34:return"&quot;";case 38:return"&amp;";default:return c}}function textReplacer(c){switch(c.charCodeAt(0)){case 160:return"&nbsp;";case 38:return"&amp;";case 60:return"&lt;";case 62:return"&gt;";default:return c}}function escapeAttrValue(c){return ATTR_VALUE_REGEX_TEST.test(c)?c.replace(ATTR_VALUE_REGEX_REPLACE,attrValueReplacer):c}function escapeText(c){return TEXT_REGEX_TEST.test(c)?c.replace(TEXT_REGEX_REPLACE,textReplacer):c}function sortByLoc(c,r){return c.loc.isInvisible||r.loc.isInvisible?0:c.loc.startPosition.line<r.loc.startPosition.line||c.loc.startPosition.line===r.loc.startPosition.line&&c.loc.startPosition.column<r.loc.startPosition.column?-1:c.loc.startPosition.line===r.loc.startPosition.line&&c.loc.startPosition.column===r.loc.startPosition.column?0:1}const voidMap=Object.create(null);let voidTagNames="area base br col command embed hr img input keygen link meta param source track wbr";voidTagNames.split(" ").forEach(c=>{voidMap[c]=!0});const NON_WHITESPACE=/\S/;function isVoidTag(c){return voidMap[c.toLowerCase()]&&c[0].toLowerCase()===c[0]}class Printer{constructor(r){this.buffer="",this.options=r}handledByOverride(r,a=!1){if(this.options.override!==void 0){let o=this.options.override(r,this.options);if(typeof o=="string")return a&&o!==""&&NON_WHITESPACE.test(o[0])&&(o=` ${o}`),this.buffer+=o,!0}return!1}Node(r){switch(r.type){case"MustacheStatement":case"BlockStatement":case"PartialStatement":case"MustacheCommentStatement":case"CommentStatement":case"TextNode":case"ElementNode":case"AttrNode":case"Block":case"Template":return this.TopLevelStatement(r);case"StringLiteral":case"BooleanLiteral":case"NumberLiteral":case"UndefinedLiteral":case"NullLiteral":case"PathExpression":case"SubExpression":return this.Expression(r);case"Program":return this.Block(r);case"ConcatStatement":return this.ConcatStatement(r);case"Hash":return this.Hash(r);case"HashPair":return this.HashPair(r);case"ElementModifierStatement":return this.ElementModifierStatement(r)}}Expression(r){switch(r.type){case"StringLiteral":case"BooleanLiteral":case"NumberLiteral":case"UndefinedLiteral":case"NullLiteral":return this.Literal(r);case"PathExpression":return this.PathExpression(r);case"SubExpression":return this.SubExpression(r)}}Literal(r){switch(r.type){case"StringLiteral":return this.StringLiteral(r);case"BooleanLiteral":return this.BooleanLiteral(r);case"NumberLiteral":return this.NumberLiteral(r);case"UndefinedLiteral":return this.UndefinedLiteral(r);case"NullLiteral":return this.NullLiteral(r)}}TopLevelStatement(r){switch(r.type){case"MustacheStatement":return this.MustacheStatement(r);case"BlockStatement":return this.BlockStatement(r);case"PartialStatement":return this.PartialStatement(r);case"MustacheCommentStatement":return this.MustacheCommentStatement(r);case"CommentStatement":return this.CommentStatement(r);case"TextNode":return this.TextNode(r);case"ElementNode":return this.ElementNode(r);case"Block":case"Template":return this.Block(r);case"AttrNode":return this.AttrNode(r)}}Block(r){if(r.chained){let a=r.body[0];a.chained=!0}this.handledByOverride(r)||this.TopLevelStatements(r.body)}TopLevelStatements(r){r.forEach(a=>this.TopLevelStatement(a))}ElementNode(r){this.handledByOverride(r)||(this.OpenElementNode(r),this.TopLevelStatements(r.children),this.CloseElementNode(r))}OpenElementNode(r){this.buffer+=`<${r.tag}`;const a=[...r.attributes,...r.modifiers,...r.comments].sort(sortByLoc);for(const o of a)switch(this.buffer+=" ",o.type){case"AttrNode":this.AttrNode(o);break;case"ElementModifierStatement":this.ElementModifierStatement(o);break;case"MustacheCommentStatement":this.MustacheCommentStatement(o);break}r.blockParams.length&&this.BlockParams(r.blockParams),r.selfClosing&&(this.buffer+=" /"),this.buffer+=">"}CloseElementNode(r){r.selfClosing||isVoidTag(r.tag)||(this.buffer+=`</${r.tag}>`)}AttrNode(r){if(this.handledByOverride(r))return;let{name:a,value:o}=r;this.buffer+=a,(o.type!=="TextNode"||o.chars.length>0)&&(this.buffer+="=",this.AttrNodeValue(o))}AttrNodeValue(r){r.type==="TextNode"?(this.buffer+='"',this.TextNode(r,!0),this.buffer+='"'):this.Node(r)}TextNode(r,a){this.handledByOverride(r)||(this.options.entityEncoding==="raw"?this.buffer+=r.chars:a?this.buffer+=escapeAttrValue(r.chars):this.buffer+=escapeText(r.chars))}MustacheStatement(r){this.handledByOverride(r)||(this.buffer+=r.escaped?"{{":"{{{",r.strip.open&&(this.buffer+="~"),this.Expression(r.path),this.Params(r.params),this.Hash(r.hash),r.strip.close&&(this.buffer+="~"),this.buffer+=r.escaped?"}}":"}}}")}BlockStatement(r){this.handledByOverride(r)||(r.chained?(this.buffer+=r.inverseStrip.open?"{{~":"{{",this.buffer+="else "):this.buffer+=r.openStrip.open?"{{~#":"{{#",this.Expression(r.path),this.Params(r.params),this.Hash(r.hash),r.program.blockParams.length&&this.BlockParams(r.program.blockParams),r.chained?this.buffer+=r.inverseStrip.close?"~}}":"}}":this.buffer+=r.openStrip.close?"~}}":"}}",this.Block(r.program),r.inverse&&(r.inverse.chained||(this.buffer+=r.inverseStrip.open?"{{~":"{{",this.buffer+="else",this.buffer+=r.inverseStrip.close?"~}}":"}}"),this.Block(r.inverse)),r.chained||(this.buffer+=r.closeStrip.open?"{{~/":"{{/",this.Expression(r.path),this.buffer+=r.closeStrip.close?"~}}":"}}"))}BlockParams(r){this.buffer+=` as |${r.join(" ")}|`}PartialStatement(r){this.handledByOverride(r)||(this.buffer+="{{>",this.Expression(r.name),this.Params(r.params),this.Hash(r.hash),this.buffer+="}}")}ConcatStatement(r){this.handledByOverride(r)||(this.buffer+='"',r.parts.forEach(a=>{a.type==="TextNode"?this.TextNode(a,!0):this.Node(a)}),this.buffer+='"')}MustacheCommentStatement(r){this.handledByOverride(r)||(this.buffer+=`{{!--${r.value}--}}`)}ElementModifierStatement(r){this.handledByOverride(r)||(this.buffer+="{{",this.Expression(r.path),this.Params(r.params),this.Hash(r.hash),this.buffer+="}}")}CommentStatement(r){this.handledByOverride(r)||(this.buffer+=`<!--${r.value}-->`)}PathExpression(r){this.handledByOverride(r)||(this.buffer+=r.original)}SubExpression(r){this.handledByOverride(r)||(this.buffer+="(",this.Expression(r.path),this.Params(r.params),this.Hash(r.hash),this.buffer+=")")}Params(r){r.length&&r.forEach(a=>{this.buffer+=" ",this.Expression(a)})}Hash(r){this.handledByOverride(r,!0)||r.pairs.forEach(a=>{this.buffer+=" ",this.HashPair(a)})}HashPair(r){this.handledByOverride(r)||(this.buffer+=r.key,this.buffer+="=",this.Node(r.value))}StringLiteral(r){this.handledByOverride(r)||(this.buffer+=JSON.stringify(r.value))}BooleanLiteral(r){this.handledByOverride(r)||(this.buffer+=r.value)}NumberLiteral(r){this.handledByOverride(r)||(this.buffer+=r.value)}UndefinedLiteral(r){this.handledByOverride(r)||(this.buffer+="undefined")}NullLiteral(r){this.handledByOverride(r)||(this.buffer+="null")}print(r){let{options:a}=this;if(a.override){let o=a.override(r,a);if(o!==void 0)return o}return this.buffer="",this.Node(r),this.buffer}}function build(c,r={entityEncoding:"transformed"}){return c?new Printer(r).print(c):""}function generateSyntaxError(c,r){let{module:a,loc:o}=r,{line:h,column:d}=o.start,f=r.asString(),g=f?`

|
|  ${f.split(`
`).join(`
|  `)}
|

`:"",E=new Error(`${c}: ${g}(error occurred in '${a}' @ line ${h} : column ${d})`);return E.name="SyntaxError",E.location=r,E.code=f,E}const visitorKeys={Program:tuple("body"),Template:tuple("body"),Block:tuple("body"),MustacheStatement:tuple("path","params","hash"),BlockStatement:tuple("path","params","hash","program","inverse"),ElementModifierStatement:tuple("path","params","hash"),PartialStatement:tuple("name","params","hash"),CommentStatement:tuple(),MustacheCommentStatement:tuple(),ElementNode:tuple("attributes","modifiers","children","comments"),AttrNode:tuple("value"),TextNode:tuple(),ConcatStatement:tuple("parts"),SubExpression:tuple("path","params","hash"),PathExpression:tuple(),PathHead:tuple(),StringLiteral:tuple(),BooleanLiteral:tuple(),NumberLiteral:tuple(),NullLiteral:tuple(),UndefinedLiteral:tuple(),Hash:tuple("pairs"),HashPair:tuple("value"),NamedBlock:tuple("attributes","modifiers","children","comments"),SimpleElement:tuple("attributes","modifiers","children","comments"),Component:tuple("head","attributes","modifiers","children","comments")},TraversalError=function(){c.prototype=Object.create(Error.prototype),c.prototype.constructor=c;function c(r,a,o,h){let d=Error.call(this,r);this.key=h,this.message=r,this.node=a,this.parent=o,this.stack=d.stack}return c}();function cannotRemoveNode(c,r,a){return new TraversalError("Cannot remove a node unless it is part of an array",c,r,a)}function cannotReplaceNode(c,r,a){return new TraversalError("Cannot replace a node with multiple nodes unless it is part of an array",c,r,a)}function cannotReplaceOrRemoveInKeyHandlerYet(c,r){return new TraversalError("Replacing and removing in key handlers is not yet supported.",c,null,r)}class WalkerPath{constructor(r,a=null,o=null){this.node=r,this.parent=a,this.parentKey=o}get parentNode(){return this.parent?this.parent.node:null}parents(){return{[Symbol.iterator]:()=>new PathParentsIterator(this)}}}class PathParentsIterator{constructor(r){this.path=r}next(){return this.path.parent?(this.path=this.path.parent,{done:!1,value:this.path}):{done:!0,value:null}}}function getEnterFunction(c){return typeof c=="function"?c:c.enter}function getExitFunction(c){if(typeof c!="function")return c.exit}function getKeyHandler(c,r){let a=typeof c!="function"?c.keys:void 0;if(a===void 0)return;let o=a[r];return o!==void 0?o:a.All}function getNodeHandler(c,r){if((r==="Template"||r==="Block")&&c.Program)return c.Program;let a=c[r];return a!==void 0?a:c.All}function visitNode(c,r){let{node:a,parent:o,parentKey:h}=r,d=getNodeHandler(c,a.type),f,g;d!==void 0&&(f=getEnterFunction(d),g=getExitFunction(d));let E;if(f!==void 0&&(E=f(a,r)),E!=null)if(JSON.stringify(a)===JSON.stringify(E))E=void 0;else{if(Array.isArray(E))return visitArray(c,E,o,h),E;{let C=new WalkerPath(E,o,h);return visitNode(c,C)||E}}if(E===void 0){let C=visitorKeys[a.type];for(let M=0;M<C.length;M++){let Q=C[M];visitKey(c,d,r,Q)}g!==void 0&&(E=g(a,r))}return E}function get(c,r){return c[r]}function set(c,r,a){c[r]=a}function visitKey(c,r,a,o){let{node:h}=a,d=get(h,o);if(!d)return;let f,g;if(r!==void 0){let E=getKeyHandler(r,o);E!==void 0&&(f=getEnterFunction(E),g=getExitFunction(E))}if(f!==void 0&&f(h,o)!==void 0)throw cannotReplaceOrRemoveInKeyHandlerYet(h,o);if(Array.isArray(d))visitArray(c,d,a,o);else{let E=new WalkerPath(d,a,o),C=visitNode(c,E);C!==void 0&&assignKey(h,o,d,C)}if(g!==void 0&&g(h,o)!==void 0)throw cannotReplaceOrRemoveInKeyHandlerYet(h,o)}function visitArray(c,r,a,o){for(let h=0;h<r.length;h++){let d=r[h],f=new WalkerPath(d,a,o),g=visitNode(c,f);g!==void 0&&(h+=spliceArray(r,h,g)-1)}}function assignKey(c,r,a,o){if(o===null)throw cannotRemoveNode(a,c,r);if(Array.isArray(o))if(o.length===1)set(c,r,o[0]);else throw o.length===0?cannotRemoveNode(a,c,r):cannotReplaceNode(a,c,r);else set(c,r,o)}function spliceArray(c,r,a){return a===null?(c.splice(r,1),0):Array.isArray(a)?(c.splice(r,1,...a),a.length):(c.splice(r,1,a),1)}function traverse(c,r){let a=new WalkerPath(c);visitNode(r,a)}class Walker{constructor(r){this.order=r,this.stack=[]}visit(r,a){r&&(this.stack.push(r),this.order==="post"?(this.children(r,a),a(r,this)):(a(r,this),this.children(r,a)),this.stack.pop())}children(r,a){switch(r.type){case"Block":case"Template":return visitors.Program(this,r,a);case"ElementNode":return visitors.ElementNode(this,r,a);case"BlockStatement":return visitors.BlockStatement(this,r,a);default:return}}}const visitors={Program(c,r,a){for(let o=0;o<r.body.length;o++)c.visit(r.body[o],a)},Template(c,r,a){for(let o=0;o<r.body.length;o++)c.visit(r.body[o],a)},Block(c,r,a){for(let o=0;o<r.body.length;o++)c.visit(r.body[o],a)},ElementNode(c,r,a){for(let o=0;o<r.children.length;o++)c.visit(r.children[o],a)},BlockStatement(c,r,a){c.visit(r.program,a),c.visit(r.inverse||null,a)}};let ID_INVERSE_PATTERN=/[!"#%-,\.\/;->@\[-\^`\{-~]/;function parseElementBlockParams(c){let r=parseBlockParams(c);r&&(c.blockParams=r)}function parseBlockParams(c){let r=c.attributes.length,a=[];for(let h=0;h<r;h++)a.push(c.attributes[h].name);let o=a.indexOf("as");if(o===-1&&a.length>0&&a[a.length-1].charAt(0)==="|")throw generateSyntaxError("Block parameters must be preceded by the `as` keyword, detected block parameters without `as`",c.loc);if(o!==-1&&r>o&&a[o+1].charAt(0)==="|"){let h=a.slice(o).join(" ");if(h.charAt(h.length-1)!=="|"||h.match(/\|/g).length!==2)throw generateSyntaxError("Invalid block parameters syntax, '"+h+"'",c.loc);let d=[];for(let f=o+1;f<r;f++){let g=a[f].replace(/\|/g,"");if(g!==""){if(ID_INVERSE_PATTERN.test(g))throw generateSyntaxError("Invalid identifier for block parameters, '"+g+"'",c.loc);d.push(g)}}if(d.length===0)throw generateSyntaxError("Cannot use zero block parameters",c.loc);return c.attributes=c.attributes.slice(0,o),d}return null}function childrenFor(c){switch(c.type){case"Block":case"Template":return c.body;case"ElementNode":return c.children}}function appendChild(c,r){childrenFor(c).push(r)}function isHBSLiteral(c){return c.type==="StringLiteral"||c.type==="BooleanLiteral"||c.type==="NumberLiteral"||c.type==="NullLiteral"||c.type==="UndefinedLiteral"}function printLiteral(c){return c.type==="UndefinedLiteral"?"undefined":JSON.stringify(c.value)}function isUpperCase(c){return c[0]===c[0].toUpperCase()&&c[0]!==c[0].toLowerCase()}function isLowerCase(c){return c[0]===c[0].toLowerCase()&&c[0]!==c[0].toUpperCase()}const DEFAULT_STRIP={close:!1,open:!1};class Builders{pos(r,a){return{line:r,column:a}}blockItself({body:r,blockParams:a,chained:o=!1,loc:h}){return{type:"Block",body:r||[],blockParams:a||[],chained:o,loc:h}}template({body:r,blockParams:a,loc:o}){return{type:"Template",body:r||[],blockParams:a||[],loc:o}}mustache({path:r,params:a,hash:o,trusting:h,loc:d,strip:f=DEFAULT_STRIP}){return{type:"MustacheStatement",path:r,params:a,hash:o,escaped:!h,trusting:h,loc:d,strip:f||{open:!1,close:!1}}}block({path:r,params:a,hash:o,defaultBlock:h,elseBlock:d=null,loc:f,openStrip:g=DEFAULT_STRIP,inverseStrip:E=DEFAULT_STRIP,closeStrip:C=DEFAULT_STRIP}){return{type:"BlockStatement",path:r,params:a,hash:o,program:h,inverse:d,loc:f,openStrip:g,inverseStrip:E,closeStrip:C}}comment(r,a){return{type:"CommentStatement",value:r,loc:a}}mustacheComment(r,a){return{type:"MustacheCommentStatement",value:r,loc:a}}concat(r,a){return{type:"ConcatStatement",parts:r,loc:a}}element({tag:r,selfClosing:a,attrs:o,blockParams:h,modifiers:d,comments:f,children:g,loc:E}){return{type:"ElementNode",tag:r,selfClosing:a,attributes:o||[],blockParams:h||[],modifiers:d||[],comments:f||[],children:g||[],loc:E}}elementModifier({path:r,params:a,hash:o,loc:h}){return{type:"ElementModifierStatement",path:r,params:a,hash:o,loc:h}}attr({name:r,value:a,loc:o}){return{type:"AttrNode",name:r,value:a,loc:o}}text({chars:r,loc:a}){return{type:"TextNode",chars:r,loc:a}}sexpr({path:r,params:a,hash:o,loc:h}){return{type:"SubExpression",path:r,params:a,hash:o,loc:h}}path({head:r,tail:a,loc:o}){let{original:h}=headToString(r),d=[...h,...a].join(".");return new PathExpressionImplV1(d,r,a,o)}head(r,a){return r[0]==="@"?this.atName(r,a):r==="this"?this.this(a):this.var(r,a)}this(r){return{type:"ThisHead",loc:r}}atName(r,a){return{type:"AtHead",name:r,loc:a}}var(r,a){return{type:"VarHead",name:r,loc:a}}hash(r,a){return{type:"Hash",pairs:r||[],loc:a}}pair({key:r,value:a,loc:o}){return{type:"HashPair",key:r,value:a,loc:o}}literal({type:r,value:a,loc:o}){return{type:r,value:a,original:a,loc:o}}undefined(){return this.literal({type:"UndefinedLiteral",value:void 0})}null(){return this.literal({type:"NullLiteral",value:null})}string(r,a){return this.literal({type:"StringLiteral",value:r,loc:a})}boolean(r,a){return this.literal({type:"BooleanLiteral",value:r,loc:a})}number(r,a){return this.literal({type:"NumberLiteral",value:r,loc:a})}}function headToString(c){switch(c.type){case"AtHead":return{original:c.name,parts:[c.name]};case"ThisHead":return{original:"this",parts:[]};case"VarHead":return{original:c.name,parts:[c.name]}}}const b=new Builders;class Parser{constructor(r,a=new EntityParser(namedCharRefs),o="precompile"){this.elementStack=[],this.currentAttribute=null,this.currentNode=null,this.source=r,this.lines=r.source.split(/(?:\r\n?|\n)/g),this.tokenizer=new EventedTokenizer(this,a,o)}offset(){let{line:r,column:a}=this.tokenizer;return this.source.offsetFor(r,a)}pos({line:r,column:a}){return this.source.offsetFor(r,a)}finish(r){return assign({},r,{loc:r.loc.until(this.offset())})}get currentAttr(){return this.currentAttribute}get currentTag(){return this.currentNode}get currentStartTag(){return this.currentNode}get currentEndTag(){return this.currentNode}get currentComment(){return this.currentNode}get currentData(){return this.currentNode}acceptTemplate(r){return this[r.type](r)}acceptNode(r){return this[r.type](r)}currentElement(){return this.elementStack[this.elementStack.length-1]}sourceForNode(r,a){let o=r.loc.start.line-1,h=o-1,d=r.loc.start.column,f=[],g,E,C;for(a?(E=a.loc.end.line-1,C=a.loc.end.column):(E=r.loc.end.line-1,C=r.loc.end.column);h<E;)h++,g=this.lines[h],h===o?o===E?f.push(g.slice(d,C)):f.push(g.slice(d)):h===E?f.push(g.slice(0,C)):f.push(g);return f.join(`
`)}}class HandlebarsNodeVisitors extends Parser{get isTopLevel(){return this.elementStack.length===0}Program(r){let a=[],o;this.isTopLevel?o=b.template({body:a,blockParams:r.blockParams,loc:this.source.spanFor(r.loc)}):o=b.blockItself({body:a,blockParams:r.blockParams,chained:r.chained,loc:this.source.spanFor(r.loc)});let h,d=r.body.length;if(this.elementStack.push(o),d===0)return this.elementStack.pop();for(h=0;h<d;h++)this.acceptNode(r.body[h]);let f=this.elementStack.pop();if(f!==o){let g=f;throw generateSyntaxError(`Unclosed element \`${g.tag}\``,g.loc)}return o}BlockStatement(r){if(this.tokenizer.state==="comment"){this.appendToCommentData(this.sourceForNode(r));return}if(this.tokenizer.state!=="data"&&this.tokenizer.state!=="beforeData")throw generateSyntaxError("A block may only be used inside an HTML element or another block.",this.source.spanFor(r.loc));let{path:a,params:o,hash:h}=acceptCallNodes(this,r);r.program.loc||(r.program.loc=NON_EXISTENT_LOCATION),r.inverse&&!r.inverse.loc&&(r.inverse.loc=NON_EXISTENT_LOCATION);let d=this.Program(r.program),f=r.inverse?this.Program(r.inverse):null,g=b.block({path:a,params:o,hash:h,defaultBlock:d,elseBlock:f,loc:this.source.spanFor(r.loc),openStrip:r.openStrip,inverseStrip:r.inverseStrip,closeStrip:r.closeStrip}),E=this.currentElement();appendChild(E,g)}MustacheStatement(r){let{tokenizer:a}=this;if(a.state==="comment"){this.appendToCommentData(this.sourceForNode(r));return}let o,{escaped:h,loc:d,strip:f}=r;if(isHBSLiteral(r.path))o=b.mustache({path:this.acceptNode(r.path),params:[],hash:b.hash([],this.source.spanFor(r.path.loc).collapse("end")),trusting:!h,loc:this.source.spanFor(d),strip:f});else{let{path:g,params:E,hash:C}=acceptCallNodes(this,r);o=b.mustache({path:g,params:E,hash:C,trusting:!h,loc:this.source.spanFor(d),strip:f})}switch(a.state){case"tagOpen":case"tagName":throw generateSyntaxError("Cannot use mustaches in an elements tagname",o.loc);case"beforeAttributeName":addElementModifier(this.currentStartTag,o);break;case"attributeName":case"afterAttributeName":this.beginAttributeValue(!1),this.finishAttributeValue(),addElementModifier(this.currentStartTag,o),a.transitionTo("beforeAttributeName");break;case"afterAttributeValueQuoted":addElementModifier(this.currentStartTag,o),a.transitionTo("beforeAttributeName");break;case"beforeAttributeValue":this.beginAttributeValue(!1),this.appendDynamicAttributeValuePart(o),a.transitionTo("attributeValueUnquoted");break;case"attributeValueDoubleQuoted":case"attributeValueSingleQuoted":case"attributeValueUnquoted":this.appendDynamicAttributeValuePart(o);break;default:appendChild(this.currentElement(),o)}return o}appendDynamicAttributeValuePart(r){this.finalizeTextPart();let a=this.currentAttr;a.isDynamic=!0,a.parts.push(r)}finalizeTextPart(){let a=this.currentAttr.currentPart;a!==null&&(this.currentAttr.parts.push(a),this.startTextPart())}startTextPart(){this.currentAttr.currentPart=null}ContentStatement(r){updateTokenizerLocation(this.tokenizer,r),this.tokenizer.tokenizePart(r.value),this.tokenizer.flushData()}CommentStatement(r){let{tokenizer:a}=this;if(a.state==="comment")return this.appendToCommentData(this.sourceForNode(r)),null;let{value:o,loc:h}=r,d=b.mustacheComment(o,this.source.spanFor(h));switch(a.state){case"beforeAttributeName":case"afterAttributeName":this.currentStartTag.comments.push(d);break;case"beforeData":case"data":appendChild(this.currentElement(),d);break;default:throw generateSyntaxError(`Using a Handlebars comment when in the \`${a.state}\` state is not supported`,this.source.spanFor(r.loc))}return d}PartialStatement(r){throw generateSyntaxError("Handlebars partials are not supported",this.source.spanFor(r.loc))}PartialBlockStatement(r){throw generateSyntaxError("Handlebars partial blocks are not supported",this.source.spanFor(r.loc))}Decorator(r){throw generateSyntaxError("Handlebars decorators are not supported",this.source.spanFor(r.loc))}DecoratorBlock(r){throw generateSyntaxError("Handlebars decorator blocks are not supported",this.source.spanFor(r.loc))}SubExpression(r){let{path:a,params:o,hash:h}=acceptCallNodes(this,r);return b.sexpr({path:a,params:o,hash:h,loc:this.source.spanFor(r.loc)})}PathExpression(r){let{original:a}=r,o;if(a.indexOf("/")!==-1){if(a.slice(0,2)==="./")throw generateSyntaxError('Using "./" is not supported in Glimmer and unnecessary',this.source.spanFor(r.loc));if(a.slice(0,3)==="../")throw generateSyntaxError('Changing context using "../" is not supported in Glimmer',this.source.spanFor(r.loc));if(a.indexOf(".")!==-1)throw generateSyntaxError("Mixing '.' and '/' in paths is not supported in Glimmer; use only '.' to separate property paths",this.source.spanFor(r.loc));o=[r.parts.join("/")]}else{if(a===".")throw generateSyntaxError("'.' is not a supported path in Glimmer; check for a path with a trailing '.'",this.source.spanFor(r.loc));o=r.parts}let h=!1;a.match(/^this(\..+)?$/)&&(h=!0);let d;if(h)d={type:"ThisHead",loc:{start:r.loc.start,end:{line:r.loc.start.line,column:r.loc.start.column+4}}};else if(r.data){let f=o.shift();if(f===void 0)throw generateSyntaxError("Attempted to parse a path expression, but it was not valid. Paths beginning with @ must start with a-z.",this.source.spanFor(r.loc));d={type:"AtHead",name:`@${f}`,loc:{start:r.loc.start,end:{line:r.loc.start.line,column:r.loc.start.column+f.length+1}}}}else{let f=o.shift();if(f===void 0)throw generateSyntaxError("Attempted to parse a path expression, but it was not valid. Paths must start with a-z or A-Z.",this.source.spanFor(r.loc));d={type:"VarHead",name:f,loc:{start:r.loc.start,end:{line:r.loc.start.line,column:r.loc.start.column+f.length}}}}return new PathExpressionImplV1(r.original,d,o,this.source.spanFor(r.loc))}Hash(r){let a=[];for(let o=0;o<r.pairs.length;o++){let h=r.pairs[o];a.push(b.pair({key:h.key,value:this.acceptNode(h.value),loc:this.source.spanFor(h.loc)}))}return b.hash(a,this.source.spanFor(r.loc))}StringLiteral(r){return b.literal({type:"StringLiteral",value:r.value,loc:r.loc})}BooleanLiteral(r){return b.literal({type:"BooleanLiteral",value:r.value,loc:r.loc})}NumberLiteral(r){return b.literal({type:"NumberLiteral",value:r.value,loc:r.loc})}UndefinedLiteral(r){return b.literal({type:"UndefinedLiteral",value:void 0,loc:r.loc})}NullLiteral(r){return b.literal({type:"NullLiteral",value:null,loc:r.loc})}}function calculateRightStrippedOffsets(c,r){if(r==="")return{lines:c.split(`
`).length-1,columns:0};let o=c.split(r)[0].split(/\n/),h=o.length-1;return{lines:h,columns:o[h].length}}function updateTokenizerLocation(c,r){let a=r.loc.start.line,o=r.loc.start.column,h=calculateRightStrippedOffsets(r.original,r.value);a=a+h.lines,h.lines?o=h.columns:o=o+h.columns,c.line=a,c.column=o}function acceptCallNodes(c,r){if(r.path.type.endsWith("Literal")){const f=r.path;let g="";throw f.type==="BooleanLiteral"?g=f.original.toString():f.type==="StringLiteral"?g=`"${f.original}"`:f.type==="NullLiteral"?g="null":f.type==="NumberLiteral"?g=f.value.toString():g="undefined",generateSyntaxError(`${f.type} "${f.type==="StringLiteral"?f.original:g}" cannot be called as a sub-expression, replace (${g}) with ${g}`,c.source.spanFor(f.loc))}let a=r.path.type==="PathExpression"?c.PathExpression(r.path):c.SubExpression(r.path),o=r.params?r.params.map(f=>c.acceptNode(f)):[],h=o.length>0?o[o.length-1].loc:a.loc,d=r.hash?c.Hash(r.hash):{type:"Hash",pairs:[],loc:c.source.spanFor(h).collapse("end")};return{path:a,params:o,hash:d}}function addElementModifier(c,r){let{path:a,params:o,hash:h,loc:d}=r;if(isHBSLiteral(a)){let g=`{{${printLiteral(a)}}}`,E=`<${c.name} ... ${g} ...`;throw generateSyntaxError(`In ${E}, ${g} is not a valid modifier`,r.loc)}let f=b.elementModifier({path:a,params:o,hash:h,loc:d});c.modifiers.push(f)}class TokenizerEventHandlers extends HandlebarsNodeVisitors{constructor(){super(...arguments),this.tagOpenLine=0,this.tagOpenColumn=0}reset(){this.currentNode=null}beginComment(){this.currentNode=b.comment("",this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn))}appendToCommentData(r){this.currentComment.value+=r}finishComment(){appendChild(this.currentElement(),this.finish(this.currentComment))}beginData(){this.currentNode=b.text({chars:"",loc:this.offset().collapsed()})}appendToData(r){this.currentData.chars+=r}finishData(){this.currentData.loc=this.currentData.loc.withEnd(this.offset()),appendChild(this.currentElement(),this.currentData)}tagOpen(){this.tagOpenLine=this.tokenizer.line,this.tagOpenColumn=this.tokenizer.column}beginStartTag(){this.currentNode={type:"StartTag",name:"",attributes:[],modifiers:[],comments:[],selfClosing:!1,loc:this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn)}}beginEndTag(){this.currentNode={type:"EndTag",name:"",attributes:[],modifiers:[],comments:[],selfClosing:!1,loc:this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn)}}finishTag(){let r=this.finish(this.currentTag);if(r.type==="StartTag"){if(this.finishStartTag(),r.name===":")throw generateSyntaxError("Invalid named block named detected, you may have created a named block without a name, or you may have began your name with a number. Named blocks must have names that are at least one character long, and begin with a lower case letter",this.source.spanFor({start:this.currentTag.loc.toJSON(),end:this.offset().toJSON()}));(voidMap[r.name]||r.selfClosing)&&this.finishEndTag(!0)}else r.type==="EndTag"&&this.finishEndTag(!1)}finishStartTag(){let{name:r,attributes:a,modifiers:o,comments:h,selfClosing:d,loc:f}=this.finish(this.currentStartTag),g=b.element({tag:r,selfClosing:d,attrs:a,modifiers:o,comments:h,children:[],blockParams:[],loc:f});this.elementStack.push(g)}finishEndTag(r){let a=this.finish(this.currentTag),o=this.elementStack.pop(),h=this.currentElement();this.validateEndTag(a,o,r),o.loc=o.loc.withEnd(this.offset()),parseElementBlockParams(o),appendChild(h,o)}markTagAsSelfClosing(){this.currentTag.selfClosing=!0}appendToTagName(r){this.currentTag.name+=r}beginAttribute(){let r=this.offset();this.currentAttribute={name:"",parts:[],currentPart:null,isQuoted:!1,isDynamic:!1,start:r,valueSpan:r.collapsed()}}appendToAttributeName(r){this.currentAttr.name+=r}beginAttributeValue(r){this.currentAttr.isQuoted=r,this.startTextPart(),this.currentAttr.valueSpan=this.offset().collapsed()}appendToAttributeValue(r){let a=this.currentAttr.parts,o=a[a.length-1],h=this.currentAttr.currentPart;if(h)h.chars+=r,h.loc=h.loc.withEnd(this.offset());else{let d=this.offset();r===`
`?d=o?o.loc.getEnd():this.currentAttr.valueSpan.getStart():d=d.move(-1),this.currentAttr.currentPart=b.text({chars:r,loc:d.collapsed()})}}finishAttributeValue(){this.finalizeTextPart();let r=this.currentTag,a=this.offset();if(r.type==="EndTag")throw generateSyntaxError("Invalid end tag: closing tag must not have attributes",this.source.spanFor({start:r.loc.toJSON(),end:a.toJSON()}));let{name:o,parts:h,start:d,isQuoted:f,isDynamic:g,valueSpan:E}=this.currentAttr,C=this.assembleAttributeValue(h,f,g,d.until(a));C.loc=E.withEnd(a);let M=b.attr({name:o,value:C,loc:d.until(a)});this.currentStartTag.attributes.push(M)}reportSyntaxError(r){throw generateSyntaxError(r,this.offset().collapsed())}assembleConcatenatedValue(r){for(let h=0;h<r.length;h++){let d=r[h];if(d.type!=="MustacheStatement"&&d.type!=="TextNode")throw generateSyntaxError("Unsupported node in quoted attribute value: "+d.type,d.loc)}assertPresent(r,"the concatenation parts of an element should not be empty");let a=r[0],o=r[r.length-1];return b.concat(r,this.source.spanFor(a.loc).extend(this.source.spanFor(o.loc)))}validateEndTag(r,a,o){let h;if(voidMap[r.name]&&!o?h=`<${r.name}> elements do not need end tags. You should remove it`:a.tag===void 0?h=`Closing tag </${r.name}> without an open tag`:a.tag!==r.name&&(h=`Closing tag </${r.name}> did not match last open tag <${a.tag}> (on line ${a.loc.startPosition.line})`),h)throw generateSyntaxError(h,r.loc)}assembleAttributeValue(r,a,o,h){if(o){if(a)return this.assembleConcatenatedValue(r);if(r.length===1||r.length===2&&r[1].type==="TextNode"&&r[1].chars==="/")return r[0];throw generateSyntaxError("An unquoted attribute value must be a string or a mustache, preceded by whitespace or a '=' character, and followed by whitespace, a '>' character, or '/>'",h)}else return r.length>0?r[0]:b.text({chars:"",loc:h})}}const syntax={parse:preprocess$1,builders:publicBuilder,print:build,traverse,Walker};class CodemodEntityParser extends EntityParser{constructor(){super({})}parse(){}}function preprocess$1(c,r={}){var a,o,h;let d=r.mode||"precompile",f,g;typeof c=="string"?(f=new Source(c,(a=r.meta)===null||a===void 0?void 0:a.moduleName),d==="codemod"?g=parseWithoutProcessing(c,r.parseOptions):g=parse(c,r.parseOptions)):c instanceof Source?(f=c,d==="codemod"?g=parseWithoutProcessing(c.source,r.parseOptions):g=parse(c.source,r.parseOptions)):(f=new Source("",(o=r.meta)===null||o===void 0?void 0:o.moduleName),g=c);let E;d==="codemod"&&(E=new CodemodEntityParser);let C=SourceSpan.forCharPositions(f,0,f.source.length);g.loc={source:"(program)",start:C.startPosition,end:C.endPosition};let M=new TokenizerEventHandlers(f,E,d).acceptTemplate(g);if(r.strictMode&&(M.blockParams=(h=r.locals)!==null&&h!==void 0?h:[]),r&&r.plugins&&r.plugins.ast)for(let Q=0,te=r.plugins.ast.length;Q<te;Q++){let X=r.plugins.ast[Q],Ae=assign({},r,{syntax},{plugins:void 0}),Ee=X(Ae);traverse(M,Ee.visitor)}return M}class SymbolTable{static top(r,a){return new ProgramSymbolTable(r,a)}child(r){let a=r.map(o=>this.allocate(o));return new BlockSymbolTable(this,r,a)}}class ProgramSymbolTable extends SymbolTable{constructor(r,a){super(),this.templateLocals=r,this.customizeComponentName=a,this.symbols=[],this.upvars=[],this.size=1,this.named=dict(),this.blocks=dict(),this.usedTemplateLocals=[],this._hasEval=!1}getUsedTemplateLocals(){return this.usedTemplateLocals}setHasEval(){this._hasEval=!0}get hasEval(){return this._hasEval}has(r){return this.templateLocals.indexOf(r)!==-1}get(r){let a=this.usedTemplateLocals.indexOf(r);return a!==-1?[a,!0]:(a=this.usedTemplateLocals.length,this.usedTemplateLocals.push(r),[a,!0])}getLocalsMap(){return dict()}getEvalInfo(){let r=this.getLocalsMap();return Object.keys(r).map(a=>r[a])}allocateFree(r,a){a.resolution()===39&&a.isAngleBracket&&isUpperCase(r)&&(r=this.customizeComponentName(r));let o=this.upvars.indexOf(r);return o!==-1||(o=this.upvars.length,this.upvars.push(r)),o}allocateNamed(r){let a=this.named[r];return a||(a=this.named[r]=this.allocate(r)),a}allocateBlock(r){r==="inverse"&&(r="else");let a=this.blocks[r];return a||(a=this.blocks[r]=this.allocate(`&${r}`)),a}allocate(r){return this.symbols.push(r),this.size++}}class BlockSymbolTable extends SymbolTable{constructor(r,a,o){super(),this.parent=r,this.symbols=a,this.slots=o}get locals(){return this.symbols}has(r){return this.symbols.indexOf(r)!==-1||this.parent.has(r)}get(r){let a=this.symbols.indexOf(r);return a===-1?this.parent.get(r):[this.slots[a],!1]}getLocalsMap(){let r=this.parent.getLocalsMap();return this.symbols.forEach(a=>r[a]=this.get(a)[0]),r}getEvalInfo(){let r=this.getLocalsMap();return Object.keys(r).map(a=>r[a])}setHasEval(){this.parent.setHasEval()}allocateFree(r,a){return this.parent.allocateFree(r,a)}allocateNamed(r){return this.parent.allocateNamed(r)}allocateBlock(r){return this.parent.allocateBlock(r)}allocate(r){return this.parent.allocate(r)}}var __rest=function(c,r){var a={};for(var o in c)Object.prototype.hasOwnProperty.call(c,o)&&r.indexOf(o)<0&&(a[o]=c[o]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var h=0,o=Object.getOwnPropertySymbols(c);h<o.length;h++)r.indexOf(o[h])<0&&Object.prototype.propertyIsEnumerable.call(c,o[h])&&(a[o[h]]=c[o[h]]);return a};class Builder{template(r,a,o){return new Template({table:r,body:a,loc:o})}block(r,a,o){return new Block({scope:r,body:a,loc:o})}namedBlock(r,a,o){return new NamedBlock({name:r,block:a,attrs:[],componentArgs:[],modifiers:[],loc:o})}simpleNamedBlock(r,a,o){return new BuildElement({selfClosing:!1,attrs:[],componentArgs:[],modifiers:[],comments:[]}).named(r,a,o)}slice(r,a){return new SourceSlice({loc:a,chars:r})}args(r,a,o){return new Args({loc:o,positional:r,named:a})}positional(r,a){return new PositionalArguments({loc:a,exprs:r})}namedArgument(r,a){return new NamedArgument({name:r,value:a})}named(r,a){return new NamedArguments({loc:a,entries:r})}attr({name:r,value:a,trusting:o},h){return new HtmlAttr({loc:h,name:r,value:a,trusting:o})}splatAttr(r,a){return new SplatAttr({symbol:r,loc:a})}arg({name:r,value:a,trusting:o},h){return new ComponentArg({name:r,value:a,trusting:o,loc:h})}path(r,a,o){return new PathExpression({loc:o,ref:r,tail:a})}self(r){return new ThisReference({loc:r})}at(r,a,o){return new ArgReference({loc:o,name:new SourceSlice({loc:o,chars:r}),symbol:a})}freeVar({name:r,context:a,symbol:o,loc:h}){return new FreeVarReference({name:r,resolution:a,symbol:o,loc:h})}localVar(r,a,o,h){return new LocalVarReference({loc:h,name:r,isTemplateLocal:o,symbol:a})}sexp(r,a){return new CallExpression({loc:a,callee:r.callee,args:r.args})}deprecatedCall(r,a,o){return new DeprecatedCallExpression({loc:o,arg:r,callee:a})}interpolate(r,a){return assertPresent(r),new InterpolateExpression({loc:a,parts:r})}literal(r,a){return new LiteralExpression({loc:a,value:r})}append({table:r,trusting:a,value:o},h){return new AppendContent({table:r,trusting:a,value:o,loc:h})}modifier({callee:r,args:a},o){return new ElementModifier({loc:o,callee:r,args:a})}namedBlocks(r,a){return new NamedBlocks({loc:a,blocks:r})}blockStatement(r,a){var{symbols:o,program:h,inverse:d=null}=r,f=__rest(r,["symbols","program","inverse"]);let g=h.loc,E=[this.namedBlock(SourceSlice.synthetic("default"),h,h.loc)];return d&&(g=g.extend(d.loc),E.push(this.namedBlock(SourceSlice.synthetic("else"),d,d.loc))),new InvokeBlock({loc:a,blocks:this.namedBlocks(E,g),callee:f.callee,args:f.args})}element(r){return new BuildElement(r)}}class BuildElement{constructor(r){this.base=r,this.builder=new Builder}simple(r,a,o){return new SimpleElement(assign({tag:r,body:a,componentArgs:[],loc:o},this.base))}named(r,a,o){return new NamedBlock(assign({name:r,block:a,componentArgs:[],loc:o},this.base))}selfClosingComponent(r,a){return new InvokeComponent(assign({loc:a,callee:r,blocks:new NamedBlocks({blocks:[],loc:a.sliceEndChars({skipEnd:1,chars:1})})},this.base))}componentWithDefaultBlock(r,a,o,h){let d=this.builder.block(o,a,h),f=this.builder.namedBlock(SourceSlice.synthetic("default"),d,h);return new InvokeComponent(assign({loc:h,callee:r,blocks:this.builder.namedBlocks([f],f.loc)},this.base))}componentWithNamedBlocks(r,a,o){return new InvokeComponent(assign({loc:o,callee:r,blocks:this.builder.namedBlocks(a,SpanList.range(a))},this.base))}}function SexpSyntaxContext(c){return isSimpleCallee(c)?LooseModeResolution.namespaced("Helper"):null}function ModifierSyntaxContext(c){return isSimpleCallee(c)?LooseModeResolution.namespaced("Modifier"):null}function BlockSyntaxContext(c){return isSimpleCallee(c)?LooseModeResolution.namespaced("Component"):LooseModeResolution.fallback()}function ComponentSyntaxContext(c){return isSimplePath(c)?LooseModeResolution.namespaced("Component",!0):null}function AttrValueSyntaxContext(c){let r=isSimpleCallee(c),a=isInvokeNode(c);return r?a?LooseModeResolution.namespaced("Helper"):LooseModeResolution.attr():a?STRICT_RESOLUTION:LooseModeResolution.fallback()}function AppendSyntaxContext(c){let r=isSimpleCallee(c),a=isInvokeNode(c),o=c.trusting;return r?o?LooseModeResolution.trustingAppend({invoke:a}):LooseModeResolution.append({invoke:a}):LooseModeResolution.fallback()}function isSimpleCallee(c){let r=c.path;return isSimplePath(r)}function isSimplePath(c){return c.type==="PathExpression"&&c.head.type==="VarHead"?c.tail.length===0:!1}function isInvokeNode(c){return c.params.length>0||c.hash.pairs.length>0}function normalize(c,r={}){var a;let o=preprocess$1(c,r),h=assign({strictMode:!1,locals:[]},r),d=SymbolTable.top(h.locals,(a=r.customizeComponentName)!==null&&a!==void 0?a:M=>M),f=new BlockContext(c,h,d),g=new StatementNormalizer(f),E=new TemplateChildren(f.loc(o.loc),o.body.map(M=>g.normalize(M)),f).assertTemplate(d),C=d.getUsedTemplateLocals();return[E,C]}class BlockContext{constructor(r,a,o){this.source=r,this.options=a,this.table=o,this.builder=new Builder}get strict(){return this.options.strictMode||!1}loc(r){return this.source.spanFor(r)}resolutionFor(r,a){if(this.strict)return{resolution:STRICT_RESOLUTION};if(this.isFreeVar(r)){let o=a(r);return o===null?{resolution:"error",path:printPath(r),head:printHead(r)}:{resolution:o}}else return{resolution:STRICT_RESOLUTION}}isFreeVar(r){return r.type==="PathExpression"?r.head.type!=="VarHead"?!1:!this.table.has(r.head.name):r.path.type==="PathExpression"?this.isFreeVar(r.path):!1}hasBinding(r){return this.table.has(r)}child(r){return new BlockContext(this.source,this.options,this.table.child(r))}customizeComponentName(r){return this.options.customizeComponentName?this.options.customizeComponentName(r):r}}class ExpressionNormalizer{constructor(r){this.block=r}normalize(r,a){switch(r.type){case"NullLiteral":case"BooleanLiteral":case"NumberLiteral":case"StringLiteral":case"UndefinedLiteral":return this.block.builder.literal(r.value,this.block.loc(r.loc));case"PathExpression":return this.path(r,a);case"SubExpression":{let o=this.block.resolutionFor(r,SexpSyntaxContext);if(o.resolution==="error")throw generateSyntaxError(`You attempted to invoke a path (\`${o.path}\`) but ${o.head} was not in scope`,r.loc);return this.block.builder.sexp(this.callParts(r,o.resolution),this.block.loc(r.loc))}}}path(r,a){let o=this.block.loc(r.head.loc),h=[],d=o;for(let f of r.tail)d=d.sliceStartChars({chars:f.length,skipStart:1}),h.push(new SourceSlice({loc:d,chars:f}));return this.block.builder.path(this.ref(r.head,a),h,this.block.loc(r.loc))}callParts(r,a){let{path:o,params:h,hash:d}=r,f=this.normalize(o,a),g=h.map(X=>this.normalize(X,ARGUMENT_RESOLUTION)),E=SpanList.range(g,f.loc.collapse("end")),C=this.block.loc(d.loc),M=SpanList.range([E,C]),Q=this.block.builder.positional(h.map(X=>this.normalize(X,ARGUMENT_RESOLUTION)),E),te=this.block.builder.named(d.pairs.map(X=>this.namedArgument(X)),this.block.loc(d.loc));return{callee:f,args:this.block.builder.args(Q,te,M)}}namedArgument(r){let o=this.block.loc(r.loc).sliceStartChars({chars:r.key.length});return this.block.builder.namedArgument(new SourceSlice({chars:r.key,loc:o}),this.normalize(r.value,ARGUMENT_RESOLUTION))}ref(r,a){let{block:o}=this,{builder:h,table:d}=o,f=o.loc(r.loc);switch(r.type){case"ThisHead":return h.self(f);case"AtHead":{let g=d.allocateNamed(r.name);return h.at(r.name,g,f)}case"VarHead":if(o.hasBinding(r.name)){let[g,E]=d.get(r.name);return o.builder.localVar(r.name,g,E,f)}else{let g=o.strict?STRICT_RESOLUTION:a,E=o.table.allocateFree(r.name,g);return o.builder.freeVar({name:r.name,context:g,symbol:E,loc:f})}}}}class StatementNormalizer{constructor(r){this.block=r}normalize(r){switch(r.type){case"PartialStatement":throw new Error("Handlebars partial syntax ({{> ...}}) is not allowed in Glimmer");case"BlockStatement":return this.BlockStatement(r);case"ElementNode":return new ElementNormalizer(this.block).ElementNode(r);case"MustacheStatement":return this.MustacheStatement(r);case"MustacheCommentStatement":return this.MustacheCommentStatement(r);case"CommentStatement":{let a=this.block.loc(r.loc);return new HtmlComment({loc:a,text:a.slice({skipStart:4,skipEnd:3}).toSlice(r.value)})}case"TextNode":return new HtmlText({loc:this.block.loc(r.loc),chars:r.chars})}}MustacheCommentStatement(r){let a=this.block.loc(r.loc),o;return a.asString().slice(0,5)==="{{!--"?o=a.slice({skipStart:5,skipEnd:4}):o=a.slice({skipStart:3,skipEnd:2}),new GlimmerComment({loc:a,text:o.toSlice(r.value)})}MustacheStatement(r){let{escaped:a}=r,o=this.block.loc(r.loc),h=this.expr.callParts({path:r.path,params:r.params,hash:r.hash},AppendSyntaxContext(r)),d=h.args.isEmpty()?h.callee:this.block.builder.sexp(h,o);return this.block.builder.append({table:this.block.table,trusting:!a,value:d},o)}BlockStatement(r){let{program:a,inverse:o}=r,h=this.block.loc(r.loc),d=this.block.resolutionFor(r,BlockSyntaxContext);if(d.resolution==="error")throw generateSyntaxError(`You attempted to invoke a path (\`{{#${d.path}}}\`) but ${d.head} was not in scope`,h);let f=this.expr.callParts(r,d.resolution);return this.block.builder.blockStatement(assign({symbols:this.block.table,program:this.Block(a),inverse:o?this.Block(o):null},f),h)}Block({body:r,loc:a,blockParams:o}){let h=this.block.child(o),d=new StatementNormalizer(h);return new BlockChildren(this.block.loc(a),r.map(f=>d.normalize(f)),this.block).assertBlock(h.table)}get expr(){return new ExpressionNormalizer(this.block)}}class ElementNormalizer{constructor(r){this.ctx=r}ElementNode(r){let{tag:a,selfClosing:o,comments:h}=r,d=this.ctx.loc(r.loc),[f,...g]=a.split("."),E=this.classifyTag(f,g,r.loc),C=r.attributes.filter(ue=>ue.name[0]!=="@").map(ue=>this.attr(ue)),M=r.attributes.filter(ue=>ue.name[0]==="@").map(ue=>this.arg(ue)),Q=r.modifiers.map(ue=>this.modifier(ue)),te=this.ctx.child(r.blockParams),X=new StatementNormalizer(te),Ae=r.children.map(ue=>X.normalize(ue)),Ee=this.ctx.builder.element({selfClosing:o,attrs:C,componentArgs:M,modifiers:Q,comments:h.map(ue=>new StatementNormalizer(this.ctx).MustacheCommentStatement(ue))}),pe=new ElementChildren(Ee,d,Ae,this.ctx),$e=this.ctx.loc(r.loc).sliceStartChars({chars:a.length,skipStart:1});if(E==="ElementHead")return a[0]===":"?pe.assertNamedBlock($e.slice({skipStart:1}).toSlice(a.slice(1)),te.table):pe.assertElement($e.toSlice(a),r.blockParams.length>0);if(r.selfClosing)return Ee.selfClosingComponent(E,d);{let ue=pe.assertComponent(a,te.table,r.blockParams.length>0);return Ee.componentWithNamedBlocks(E,ue,d)}}modifier(r){let a=this.ctx.resolutionFor(r,ModifierSyntaxContext);if(a.resolution==="error")throw generateSyntaxError(`You attempted to invoke a path (\`{{#${a.path}}}\`) as a modifier, but ${a.head} was not in scope. Try adding \`this\` to the beginning of the path`,r.loc);let o=this.expr.callParts(r,a.resolution);return this.ctx.builder.modifier(o,this.ctx.loc(r.loc))}mustacheAttr(r){let a=this.ctx.builder.sexp(this.expr.callParts(r,AttrValueSyntaxContext(r)),this.ctx.loc(r.loc));return a.args.isEmpty()?a.callee:a}attrPart(r){switch(r.type){case"MustacheStatement":return{expr:this.mustacheAttr(r),trusting:!r.escaped};case"TextNode":return{expr:this.ctx.builder.literal(r.chars,this.ctx.loc(r.loc)),trusting:!0}}}attrValue(r){switch(r.type){case"ConcatStatement":{let a=r.parts.map(o=>this.attrPart(o).expr);return{expr:this.ctx.builder.interpolate(a,this.ctx.loc(r.loc)),trusting:!1}}default:return this.attrPart(r)}}attr(r){if(r.name==="...attributes")return this.ctx.builder.splatAttr(this.ctx.table.allocateBlock("attrs"),this.ctx.loc(r.loc));let a=this.ctx.loc(r.loc),o=a.sliceStartChars({chars:r.name.length}).toSlice(r.name),h=this.attrValue(r.value);return this.ctx.builder.attr({name:o,value:h.expr,trusting:h.trusting},a)}maybeDeprecatedCall(r,a){if(this.ctx.strict||a.type!=="MustacheStatement")return null;let{path:o}=a;if(o.type!=="PathExpression"||o.head.type!=="VarHead")return null;let{name:h}=o.head;if(h==="has-block"||h==="has-block-params"||this.ctx.hasBinding(h)||o.tail.length!==0||a.params.length!==0||a.hash.pairs.length!==0)return null;let d=LooseModeResolution.attr(),f=this.ctx.builder.freeVar({name:h,context:d,symbol:this.ctx.table.allocateFree(h,d),loc:o.loc});return{expr:this.ctx.builder.deprecatedCall(r,f,a.loc),trusting:!1}}arg(r){let a=this.ctx.loc(r.loc),o=a.sliceStartChars({chars:r.name.length}).toSlice(r.name),h=this.maybeDeprecatedCall(o,r.value)||this.attrValue(r.value);return this.ctx.builder.arg({name:o,value:h.expr,trusting:h.trusting},a)}classifyTag(r,a,o){let h=isUpperCase(r),d=r[0]==="@"||r==="this"||this.ctx.hasBinding(r);if(this.ctx.strict&&!d){if(h)throw generateSyntaxError(`Attempted to invoke a component that was not in scope in a strict mode template, \`<${r}>\`. If you wanted to create an element with that name, convert it to lowercase - \`<${r.toLowerCase()}>\``,o);return"ElementHead"}let f=d||h,g=o.sliceStartChars({skipStart:1,chars:r.length}),E=a.reduce((Q,te)=>Q+1+te.length,0),C=g.getEnd().move(E),M=g.withEnd(C);if(f){let Q=b.path({head:b.head(r,g),tail:a,loc:M}),te=this.ctx.resolutionFor(Q,ComponentSyntaxContext);if(te.resolution==="error")throw generateSyntaxError(`You attempted to invoke a path (\`<${te.path}>\`) but ${te.head} was not in scope`,o);return new ExpressionNormalizer(this.ctx).normalize(Q,te.resolution)}if(a.length>0)throw generateSyntaxError(`You used ${r}.${a.join(".")} as a tag name, but ${r} is not in scope`,o);return"ElementHead"}get expr(){return new ExpressionNormalizer(this.ctx)}}class Children{constructor(r,a,o){this.loc=r,this.children=a,this.block=o,this.namedBlocks=a.filter(h=>h instanceof NamedBlock),this.hasSemanticContent=!!a.filter(h=>{if(h instanceof NamedBlock)return!1;switch(h.type){case"GlimmerComment":case"HtmlComment":return!1;case"HtmlText":return!/^\s*$/.exec(h.chars);default:return!0}}).length,this.nonBlockChildren=a.filter(h=>!(h instanceof NamedBlock))}}class TemplateChildren extends Children{assertTemplate(r){if(isPresent(this.namedBlocks))throw generateSyntaxError("Unexpected named block at the top-level of a template",this.loc);return this.block.builder.template(r,this.nonBlockChildren,this.block.loc(this.loc))}}class BlockChildren extends Children{assertBlock(r){if(isPresent(this.namedBlocks))throw generateSyntaxError("Unexpected named block nested in a normal block",this.loc);return this.block.builder.block(r,this.nonBlockChildren,this.loc)}}class ElementChildren extends Children{constructor(r,a,o,h){super(a,o,h),this.el=r}assertNamedBlock(r,a){if(this.el.base.selfClosing)throw generateSyntaxError(`<:${r.chars}/> is not a valid named block: named blocks cannot be self-closing`,this.loc);if(isPresent(this.namedBlocks))throw generateSyntaxError(`Unexpected named block inside <:${r.chars}> named block: named blocks cannot contain nested named blocks`,this.loc);if(!isLowerCase(r.chars))throw generateSyntaxError(`<:${r.chars}> is not a valid named block, and named blocks must begin with a lowercase letter`,this.loc);if(this.el.base.attrs.length>0||this.el.base.componentArgs.length>0||this.el.base.modifiers.length>0)throw generateSyntaxError(`named block <:${r.chars}> cannot have attributes, arguments, or modifiers`,this.loc);let o=SpanList.range(this.nonBlockChildren,this.loc);return this.block.builder.namedBlock(r,this.block.builder.block(a,this.nonBlockChildren,o),this.loc)}assertElement(r,a){if(a)throw generateSyntaxError(`Unexpected block params in <${r}>: simple elements cannot have block params`,this.loc);if(isPresent(this.namedBlocks)){let o=this.namedBlocks.map(h=>h.name);if(o.length===1)throw generateSyntaxError(`Unexpected named block <:foo> inside <${r.chars}> HTML element`,this.loc);{let h=o.map(d=>`<:${d.chars}>`).join(", ");throw generateSyntaxError(`Unexpected named blocks inside <${r.chars}> HTML element (${h})`,this.loc)}}return this.el.simple(r,this.nonBlockChildren,this.loc)}assertComponent(r,a,o){if(isPresent(this.namedBlocks)&&this.hasSemanticContent)throw generateSyntaxError(`Unexpected content inside <${r}> component invocation: when using named blocks, the tag cannot contain other content`,this.loc);if(isPresent(this.namedBlocks)){if(o)throw generateSyntaxError(`Unexpected block params list on <${r}> component invocation: when passing named blocks, the invocation tag cannot take block params`,this.loc);let h=new Set;for(let d of this.namedBlocks){let f=d.name.chars;if(h.has(f))throw generateSyntaxError(`Component had two named blocks with the same name, \`<:${f}>\`. Only one block with a given name may be passed`,this.loc);if(f==="inverse"&&h.has("else")||f==="else"&&h.has("inverse"))throw generateSyntaxError("Component has both <:else> and <:inverse> block. <:inverse> is an alias for <:else>",this.loc);h.add(f)}return this.namedBlocks}else return[this.block.builder.namedBlock(SourceSlice.synthetic("default"),this.block.builder.block(a,this.nonBlockChildren,this.loc),this.loc)]}}function printPath(c){return c.type!=="PathExpression"&&c.path.type==="PathExpression"?printPath(c.path):new Printer({entityEncoding:"raw"}).print(c)}function printHead(c){if(c.type==="PathExpression")switch(c.head.type){case"AtHead":case"VarHead":return c.head.name;case"ThisHead":return"this"}else return c.path.type==="PathExpression"?printHead(c.path):new Printer({entityEncoding:"raw"}).print(c)}function isKeyword(c){return c in KEYWORDS_TYPES}const KEYWORDS_TYPES={component:["Call","Append","Block"],debugger:["Append"],"each-in":["Block"],each:["Block"],"has-block-params":["Call","Append"],"has-block":["Call","Append"],helper:["Call","Append"],if:["Call","Append","Block"],"in-element":["Block"],let:["Block"],"link-to":["Append","Block"],log:["Call","Append"],modifier:["Call"],mount:["Append"],mut:["Call","Append"],outlet:["Append"],"query-params":["Call"],readonly:["Call","Append"],unbound:["Call","Append"],unless:["Call","Append","Block"],with:["Block"],yield:["Append"]};function tokensFromType(c,r,a){if(c.type==="PathExpression"){if(c.head.type==="AtHead"||c.head.type==="ThisHead")return;const o=c.head.name;if(r.indexOf(o)===-1)return o}else if(c.type==="ElementNode"){const{tag:o}=c,h=o.charAt(0);return h===":"||h==="@"||!a.includeHtmlElements&&o.indexOf(".")===-1&&o.toLowerCase()===o||o.substr(0,5)==="this."||r.indexOf(o)!==-1?void 0:o}}function addTokens(c,r,a,o){const h=tokensFromType(r,a,o);(Array.isArray(h)?h:[h]).forEach(d=>{if(d!==void 0&&d[0]!=="@"){const f=d.split(".")[0];a.includes(f)||c.add(d.split(".")[0])}})}function getTemplateLocals(c,r={includeHtmlElements:!1,includeKeywords:!1}){const a=preprocess$1(c),o=new Set,h=[];traverse(a,{Block:{enter({blockParams:f}){f.forEach(g=>{h.push(g)})},exit({blockParams:f}){f.forEach(()=>{h.pop()})}},ElementNode:{enter(f){f.blockParams.forEach(g=>{h.push(g)}),addTokens(o,f,h,r)},exit({blockParams:f}){f.forEach(()=>{h.pop()})}},PathExpression(f){addTokens(o,f,h,r)}});let d=[];return o.forEach(f=>d.push(f)),r?.includeKeywords||(d=d.filter(f=>!isKeyword(f))),d}const es2017=Object.freeze(Object.defineProperty({__proto__:null,AST:api$1,ASTv1:api$1,ASTv2:api,BlockSymbolTable,KEYWORDS_TYPES,Path:Walker,ProgramSymbolTable,Source,SourceSlice,SourceSpan,SpanList,SymbolTable,Walker,WalkerPath,builders:publicBuilder,cannotRemoveNode,cannotReplaceNode,generateSyntaxError,getTemplateLocals,hasSpan,isKeyword,loc,maybeLoc,node,normalize,preprocess:preprocess$1,print:build,sortByLoc,traverse},Symbol.toStringTag,{value:"Module"})),require$$4=getAugmentedNamespace(es2017);var publicTypes={};Object.defineProperty(publicTypes,"__esModule",{value:!0});(function(c){var r=commonjsGlobal&&commonjsGlobal.__createBinding||(Object.create?function(A,x,P,B){B===void 0&&(B=P);var T=Object.getOwnPropertyDescriptor(x,P);(!T||("get"in T?!x.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return x[P]}}),Object.defineProperty(A,B,T)}:function(A,x,P,B){B===void 0&&(B=P),A[B]=x[P]}),a=commonjsGlobal&&commonjsGlobal.__exportStar||function(A,x){for(var P in A)P!=="default"&&!Object.prototype.hasOwnProperty.call(x,P)&&r(x,A,P)};Object.defineProperty(c,"__esModule",{value:!0}),c.makePlugin=M;const o=src,h=expressionParser,d=jsUtils,f=scopeLocals,g=require$$4;a(publicTypes,c);const E=[{moduleName:"ember-cli-htmlbars",export:"hbs",allowTemplateLiteral:!0},{moduleName:"ember-cli-htmlbars-inline-precompile",export:"default",allowTemplateLiteral:!0},{moduleName:"htmlbars-inline-precompile",export:"default",allowTemplateLiteral:!0},{moduleName:"@ember/template-compilation",export:"precompileTemplate",enableScope:!0},{moduleName:"@ember/template-compiler",export:"template",enableScope:!0,rfc931Support:"polyfilled"}];function C(A){var x;if(((x=A.targetFormat)!==null&&x!==void 0?x:"wire")==="wire"){let{compiler:P}=A;if(!P)throw new Error('when targetFormat==="wire" you must set the compiler or compilerPath option');return Object.assign(Object.assign({outputModuleOverrides:{},enableLegacyModules:[],transforms:[]},A),{targetFormat:"wire",compiler:P})}else return Object.assign(Object.assign({outputModuleOverrides:{},enableLegacyModules:[],transforms:[]},A),{targetFormat:"hbs"})}function M(A){return function(P){P.types;const B={visitor:{Program:{enter(T,D){D.normalizedOpts=C(A(D.opts)),D.templateFactory=hn(D.normalizedOpts),D.util=new o.ImportUtil(P,T),D.program=T,D.recursionGuard=new Set},exit(T,D){if(D.normalizedOpts.targetFormat==="wire")for(let{moduleName:j,export:K}of Q(D))D.util.removeImport(j,K)}},TaggedTemplateExpression(T,D){let j=T.get("tag");if(!j.isIdentifier())return;let K=te(j,D);if(!K)return;if(!K.allowTemplateLiteral)throw T.buildCodeFrameError(`Attempted to use \`${j.node.name}\` as a template tag, but it can only be called as a function with a string passed to it: ${j.node.name}('content here')`);if(T.node.quasi.expressions.length)throw T.buildCodeFrameError("placeholders inside a tagged template string are not supported");let ie=T.node.quasi.quasis.map(be=>be.value.cooked).join("");D.normalizedOpts.targetFormat==="wire"?nt(P,D,D.normalizedOpts,ie,T,{},K,void 0):$e(P,D,ie,T,{},K,void 0)},CallExpression(T,D){let j=T.get("callee");if(!j.isIdentifier())return;let K=te(j,D);if(!K||D.recursionGuard.has(T.node))return;if(T.get("arguments").length>2)throw T.buildCodeFrameError(`${j.node.name} can only be invoked with 2 arguments: the template string and any static options`);let[ie,be]=T.get("arguments"),_e;switch(ie?.node.type){case"StringLiteral":_e=ie.node.value;break;case"TemplateLiteral":if(ie.node.expressions.length)throw T.buildCodeFrameError("placeholders inside a template string are not supported");_e=ie.node.quasis.map(We=>We.value.cooked).join("");break;case"TaggedTemplateExpression":throw T.buildCodeFrameError(`tagged template strings inside ${j.node.name} are not supported`);default:throw T.buildCodeFrameError(`${j.node.name} should be invoked with at least a single argument (the template string)`)}let de,it;if(!be)de={};else{if(!be.isObjectExpression())throw T.buildCodeFrameError(`${j.node.name} can only be invoked with 2 arguments: the template string, and any static options`);de=new h.ExpressionParser(P).parseObjectExpression(j.node.name,be,K.enableScope,!!K.rfc931Support),K.rfc931Support&&de.component&&(it=de.component)}D.normalizedOpts.targetFormat==="wire"?nt(P,D,D.normalizedOpts,_e,T,de,K,it):$e(P,D,_e,T,de,K,it)}}};return{pre(T){P.traverse(T.ast,B.visitor,T.scope,this)},visitor:{}}}}function*Q(A){for(let x of E)x.moduleName!=="@ember/template-compilation"&&x.moduleName!=="@ember/template-compiler"&&!A.normalizedOpts.enableLegacyModules.includes(x.moduleName)||(yield x)}function te(A,x){for(let P of Q(x))if(A.referencesImport(P.moduleName,P.export))return P}function X(A,x){return A.template(`(function() {
  throw new Error('ERROR_MESSAGE');
})();`)(x).expression}function Ae(A,x,P){return x.rfc931Support&&A.eval?new f.ScopeLocals({mode:"implicit",jsPath:P}):A.scope?A.scope:new f.ScopeLocals({mode:"explicit"})}function Ee(A,x,P,B,T,D,j){let K=new d.JSUtils(A,P,x,j.add.bind(j),P.util),ie=Object.assign({jsutils:K},T?.meta),be={contents:B,meta:ie,moduleName:P.filename,filename:P.filename,plugins:{ast:[...P.normalizedOpts.transforms,j.crawl()]}};for(let[_e,de]of Object.entries(T))_e!=="scope"&&(be[_e]=de);return be.locals=j.locals,D.rfc931Support&&(be.strictMode=!0),be}function pe(A,x,P){A.traverse({Identifier(B){var T;P.has(B.node.name)&&B.node.name!==P.get(B.node.name)&&B.replaceWith(x.types.identifier(P.get(B.node.name))),(T=B.scope.getBinding(B.node.name))===null||T===void 0||T.reference(B)}})}function nt(A,x,P,B,T,D,j,K){let ie=A.types,be=Ae(D,j,T),_e=Ee(A,T,x,B,D,j,be),de;if(_e.insertRuntimeErrors&&!j.rfc931Support)try{de=P.compiler.precompile(B,_e)}catch(We){T.replaceWith(X(A,{ERROR_MESSAGE:We.message}));return}else de=P.compiler.precompile(B,_e);let it=A.template.expression.ast(de);ie.addComment(it,"leading",`
  ${B.replace(/\*\//g,"*\\/")}
`,!1),x.util.replaceWith(T,We=>{var xt;let wr=We.import(x.templateFactory.moduleName,x.templateFactory.exportName),gt=ie.callExpression(wr,[it]);return j.rfc931Support&&(gt=ie.callExpression(We.import("@ember/component","setComponentTemplate"),[gt,(xt=K?.node)!==null&&xt!==void 0?xt:ie.callExpression(We.import("@ember/component/template-only","default","templateOnly"),[])])),gt}),pe(T,A,be)}function $e(A,x,P,B,T,D,j){let K=A.types,ie=Ae(T,D,B),be=Ee(A,B,x,P,T,D,ie),_e=(0,g.preprocess)(P,Object.assign(Object.assign({},be),{mode:"codemod"})),de=(0,g.print)(_e,{entityEncoding:"raw"});B.isCallExpression()?un(B,de,D,ie,x,A,j):ue(ie,x,B,K,de,A)}function ue(A,x,P,B,T,D){if(A.isEmpty()){P.get("quasi").get("quasis.0").replaceWith(B.templateElement({raw:T}));return}Ve(x.util,P.get("tag"));let j=x.util.replaceWith(P,K=>B.callExpression(Zt(K),[B.stringLiteral(T)]));kr(D,j,A)}function un(A,x,P,B,T,D,j){A.get("arguments.0").replaceWith(D.types.stringLiteral(x)),!P.enableScope&&!B.isEmpty()&&(Ve(T.util,A.get("callee")),T.util.replaceWith(A.get("callee"),K=>Zt(K))),P.rfc931Support==="polyfilled"&&(Ve(T.util,A.get("callee")),T.util.replaceWith(A.get("callee"),K=>Zt(K)),Qt(D,A),pn(A),A.node.arguments=A.node.arguments.slice(0,2),T.recursionGuard.add(A.node),T.util.replaceWith(A,K=>{var ie;return D.types.callExpression(K.import("@ember/component","setComponentTemplate"),[A.node,(ie=j?.node)!==null&&ie!==void 0?ie:D.types.callExpression(K.import("@ember/component/template-only","default","templateOnly"),[])])}),A=A.get("arguments.0")),kr(D,A,B)}function hn(A){var x;let P="@ember/template-factory",B="createTemplateFactory",T=(x=A.outputModuleOverrides[P])===null||x===void 0?void 0:x[B];return T?{exportName:T[0],moduleName:T[1]}:{exportName:B,moduleName:P}}function he(A,x){let P=A.types;return P.arrowFunctionExpression([],P.objectExpression(x.entries().map(([B,T])=>P.objectProperty(P.identifier(B),P.identifier(T),!1,!0))))}function kr(A,x,P){let B=A.types,T=x.get("arguments.1");if(T){let D=T.get("properties").find(j=>{let K=j.get("key");return K.isIdentifier()&&K.node.name==="scope"});D?P.isEmpty()?D.remove():(D.set("value",he(A,P)),D.scope.crawl()):P.isEmpty()||(T.pushContainer("properties",B.objectProperty(B.identifier("scope"),he(A,P))),T.get(`properties.${T.node.properties.length-1}`).scope.crawl())}else P.isEmpty()||(x.pushContainer("arguments",B.objectExpression([B.objectProperty(B.identifier("scope"),he(A,P))])),x.get("arguments.1").scope.crawl())}function pn(A){let x=A.get("arguments.1");if(x){let P=x.get("properties").find(T=>{let D=T.get("key");return D.isIdentifier()&&D.node.name==="eval"});P&&P.remove();let B=x.get("properties").find(T=>{let D=T.get("key");return D.isIdentifier()&&D.node.name==="component"});B&&B.remove()}}function Qt(A,x){let P=A.types,B=x.get("arguments.1");if(B){let T=B.get("properties").find(D=>{let j=D.get("key");return j.isIdentifier()&&j.node.name==="strict"});T?T.set("key",P.identifier("strictMode")):B.pushContainer("properties",P.objectProperty(P.identifier("strictMode"),P.booleanLiteral(!0)))}else x.pushContainer("arguments",P.objectExpression([P.objectProperty(P.identifier("strictMode"),P.booleanLiteral(!0))]))}function Ve(A,x){if(!x.isIdentifier())return;let P=x.scope.getBinding(x.node.name);if(!P)return;let B=P.referencePaths.find(T=>T.node===x.node);if(B&&(P.referencePaths.splice(P.referencePaths.indexOf(B),1),P.references--,P.references===0)){let T=P.path;if(T.isImportSpecifier()){let D=T.parentPath;A.removeImport(D.node.source.value,st(T.node.imported))}}}function Zt(A){return A.import("@ember/template-compilation","precompileTemplate")}function st(A){return A.type==="StringLiteral"?A.value:A.name}c.default=M(A=>A)})(plugin);const babelPluginEmberTemplateCompilation=getDefaultExportFromCjs(plugin),modules={"@ember/application":_application,"@ember/array":_array,"@ember/component":_EmberComponent,"@ember/component/helper":_EmberComponentHelper,"@ember/component/template-only":templateOnly,"@ember/debug":_debug,"@ember/destroyable":_destroyable,"@ember/helper":_helpers,"@ember/modifier":_modifier,"@ember/object":_object,"@ember/runloop":_runloop,"@ember/service":_service,"@ember/template-factory":{createTemplateFactory:templateFactory},"@ember/utils":_utils,"@ember/template":_template,"@ember/owner":_owner,"@glimmer/component":_GlimmerComponent,"@glimmer/tracking":_tracking};function evalSnippet(compiled,extraModules={}){const exports={};function require(c){return modules[c]||extraModules[c]||window.require(c)}return eval(compiled),Object.assign(exports,{require})}function commonjsRequire(c){throw new Error('Could not dynamically require "'+c+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var emberTemplateCompiler$1={exports:{}};/*!
 * @overview  Ember - JavaScript Application Framework
 * @copyright Copyright 2011 Tilde Inc. and contributors
 *            Portions Copyright 2006-2011 Strobe Inc.
 *            Portions Copyright 2008-2011 Apple Inc. All rights reserved.
 * @license   Licensed under MIT license
 *            See https://raw.github.com/emberjs/ember.js/master/LICENSE
 * @version   5.12.0
 */(function(c){var r,a;(function(){var o=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof commonjsGlobal<"u"?commonjsGlobal:null;if(o===null)throw new Error("unable to locate global object");if(typeof o.define=="function"&&typeof o.require=="function"){r=o.define,a=o.require;return}var h=Object.create(null),d=Object.create(null);function f(E,C){throw new Error("Could not find module "+E)}function g(E,C){var M=E,Q=h[M];Q||(M=M+"/index",Q=h[M]);var te=d[M];if(te!==void 0)return te;te=d[M]={},Q||f(E);for(var X=Q.deps,Ae=Q.callback,Ee=new Array(X.length),pe=0;pe<X.length;pe++)X[pe]==="exports"?Ee[pe]=te:X[pe]==="require"?Ee[pe]=a:Ee[pe]=a(X[pe],M);var nt=Ae.apply(this,Ee);return(!X.includes("exports")||nt!==void 0)&&(te=d[M]=nt),te}a=function(E){return g(E)},r=function(E,C,M){h[E]={deps:C,callback:M}},a.default=a,a.has=function(C){return!!h[C]||!!h[C+"/index"]},a._eak_seen=a.entries=h})(),function(o,h,d,f){function g(t,e){Object.defineProperty(e,"__esModule",{value:!0}),r(t,[],()=>e)}const E=typeof self=="object"&&self!==null&&self.Object===Object&&typeof Window<"u"&&self.constructor===Window&&typeof document=="object"&&document!==null&&self.document===document&&typeof location=="object"&&location!==null&&self.location===location&&typeof history=="object"&&history!==null&&self.history===history&&typeof navigator=="object"&&navigator!==null&&self.navigator===navigator&&typeof navigator.userAgent=="string",C=E?self:null,M=E?self.location:null,Q=E?self.history:null,te=E?self.navigator.userAgent:"Lynx (textmode)",X=E?typeof chrome=="object"&&typeof opera!="object":!1,Ae=E?/Firefox|FxiOS/.test(te):!1,Ee=Object.defineProperty({__proto__:null,hasDOM:E,history:Q,isChrome:X,isFirefox:Ae,location:M,userAgent:te,window:C},Symbol.toStringTag,{value:"Module"});function pe(t){return t&&t.Object===Object?t:void 0}function nt(t){return t&&t.nodeType===void 0?t:void 0}const $e=pe(nt(typeof commonjsGlobal=="object"&&commonjsGlobal))||pe(typeof self=="object"&&self)||pe(typeof window=="object"&&window)||typeof mainContext<"u"&&mainContext||new Function("return this")(),ue=function(t,e){return e===void 0?{imports:t,exports:t,lookup:t}:{imports:e.imports||t,exports:e.exports||t,lookup:e.lookup||t}}($e,$e.Ember);function un(){return ue.lookup}function hn(t){ue.lookup=t}const he={ENABLE_OPTIONAL_FEATURES:!1,EXTEND_PROTOTYPES:{Array:!0},LOG_STACKTRACE_ON_DEPRECATION:!0,LOG_VERSION:!0,RAISE_ON_DEPRECATION:!1,STRUCTURED_PROFILE:!1,_DEBUG_RENDER_TREE:!0,_ALL_DEPRECATIONS_ENABLED:!1,_OVERRIDE_DEPRECATION_VERSION:null,_DEFAULT_ASYNC_OBSERVERS:!1,_NO_IMPLICIT_ROUTE_MODEL:!1,_RERENDER_LOOP_LIMIT:1e3,EMBER_LOAD_HOOKS:{},FEATURES:{}};(t=>{if(typeof t!="object"||t===null)return;for(let i in t){if(!Object.prototype.hasOwnProperty.call(t,i)||i==="EXTEND_PROTOTYPES"||i==="EMBER_LOAD_HOOKS")continue;let l=he[i];l===!0?he[i]=t[i]!==!1:l===!1?he[i]=t[i]===!0:he[i]=t[i]}let{EXTEND_PROTOTYPES:e}=t;e!==void 0&&(typeof e=="object"&&e!==null?he.EXTEND_PROTOTYPES.Array=e.Array!==!1:he.EXTEND_PROTOTYPES.Array=e!==!1);let{EMBER_LOAD_HOOKS:n}=t;if(typeof n=="object"&&n!==null)for(let i in n){if(!Object.prototype.hasOwnProperty.call(n,i))continue;let l=n[i];Array.isArray(l)&&(he.EMBER_LOAD_HOOKS[i]=l.filter(u=>typeof u=="function"))}let{FEATURES:s}=t;if(typeof s=="object"&&s!==null)for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&(he.FEATURES[i]=s[i]===!0);he._DEBUG_RENDER_TREE=!0})($e.EmberENV);function kr(){return he}const pn=Object.defineProperty({__proto__:null,ENV:he,context:ue,getENV:kr,getLookup:un,global:$e,setLookup:hn},Symbol.toStringTag,{value:"Module"});function Qt(t){let e=Object.create(null);e[t]=1;for(let n in e)if(n===t)return n;return t}function Ve(t){return t!==null&&(typeof t=="object"||typeof t=="function")}let Zt=0;function st(){return++Zt}const A="ember",x=new WeakMap,P=new Map,B=Qt(`__ember${Date.now()}`);function T(t,e=A){let n=e+st().toString();return Ve(t)&&x.set(t,n),n}function D(t){let e;if(Ve(t))e=x.get(t),e===void 0&&(e=`${A}${st()}`,x.set(t,e));else if(e=P.get(t),e===void 0){let n=typeof t;n==="string"?e=`st${st()}`:n==="number"?e=`nu${st()}`:n==="symbol"?e=`sy${st()}`:e=`(${t})`,P.set(t,e)}return e}const j=[];function K(t){return j.indexOf(t)!==-1}function ie(t){let e=B+Math.floor(Math.random()*Date.now()).toString(),n=Qt(`__${t}${e}__`);return j.push(n),n}const be=Symbol;function _e(t){let e=Object.create(t);return e._dict=null,delete e._dict,e}let de;{let t=s=>{let i=s.name;if(i===void 0){let l=Function.prototype.toString.call(s).match(/function (\w+)\s*\(/);i=l&&l[1]||""}return i.replace(/^bound /,"")},e=s=>{let i,l;return s.constructor&&s.constructor!==Object&&(l=t(s.constructor)),"toString"in s&&s.toString!==Object.prototype.toString&&s.toString!==Function.prototype.toString&&(i=s.toString()),i&&i.match(/<.*:ember\d+>/)&&l&&l[0]!=="_"&&l.length>2&&l!=="Class"?i.replace(/<.*:/,`<${l}:`):i||l},n=s=>String(s);de=s=>typeof s=="function"?t(s)||"(unknown function)":typeof s=="object"&&s!==null?e(s)||"(unknown object)":n(s)}const it=de,We=/\.(_super|call\(this|apply\(this)/,xt=Function.prototype.toString,wr=xt.call(function(){return this}).indexOf("return this")>-1?function(n){return We.test(xt.call(n))}:function(){return!0},gt=new WeakMap,dn=Object.freeze(function(){});gt.set(dn,!1);function Qs(t){let e=gt.get(t);return e===void 0&&(e=wr(t),gt.set(t,e)),e}class Wo{listeners=void 0;observers=void 0}const er=new WeakMap;function Zs(t){let e=er.get(t);return e===void 0&&(e=new Wo,er.set(t,e)),e}function Ko(t){return er.get(t)}function Jo(t,e){let n=Zs(t);n.observers=e}function Yo(t,e){let n=Zs(t);n.listeners=e}const ei=new WeakSet;function Xo(t,e){return Qs(t)?!ei.has(e)&&Qs(e)?mn(t,mn(e,dn)):mn(t,e):t}function mn(t,e){function n(){let i=this._super;this._super=e;let l=t.apply(this,arguments);return this._super=i,l}ei.add(n);let s=er.get(t);return s!==void 0&&er.set(n,s),n}function fn(t,e){let n=t;do{let s=Object.getOwnPropertyDescriptor(n,e);if(s!==void 0)return s;n=Object.getPrototypeOf(n)}while(n!==null);return null}function Qo(t,e){return t!=null&&typeof t[e]=="function"}const ti=new WeakMap;function Zo(t,e){Ve(t)&&ti.set(t,e)}function el(t){return ti.get(t)}const tl=Object.prototype.toString;function rl(t){return t==null}function ri(t){if(typeof t=="string")return t;if(t===null)return"null";if(t===void 0)return"undefined";if(Array.isArray(t)){let e="";for(let n=0;n<t.length;n++)n>0&&(e+=","),rl(t[n])||(e+=ri(t[n]));return e}return typeof t.toString=="function"?t.toString():tl.call(t)}const ni=new WeakSet;function nl(t){return Ve(t)?ni.has(t):!1}function sl(t){Ve(t)&&ni.add(t)}class si{size=0;misses=0;hits=0;constructor(e,n,s=new Map){this.limit=e,this.func=n,this.store=s}get(e){return this.store.has(e)?(this.hits++,this.store.get(e)):(this.misses++,this.set(e,this.func(e)))}set(e,n){return this.limit>this.size&&(this.size++,this.store.set(e,n)),n}purge(){this.store.clear(),this.size=0,this.hits=0,this.misses=0}}let re=()=>{};function ii(t){return re=t,t}ii(function(e,n){if(!n)throw new Error(`Assertion Failed: ${e}`)});let _r={},Pr=function(e,n){},Tr=()=>{};Pr=function(e,n){let s=_r[e]||(()=>{});_r[e]=(i,l)=>{n(i,l,s)}},Tr=function(e,n,s,i){if(s)return;let l=_r[e];l&&l(n,i)};const il=Object.defineProperty({__proto__:null,HANDLERS:_r,get invoke(){return Tr},get registerHandler(){return Pr}},Symbol.toStringTag,{value:"Module"});let Lt=()=>{},gn,bn,tr=()=>"",ai=()=>{};{Lt=function(s){Pr("deprecate",s)};let t=function(s,i){let l=s;return i?.id&&(l=l+` [deprecation id: ${i.id}]`),i?.until&&(l=l+` This will be removed in ${i.for} ${i.until}.`),i?.url&&(l+=` See ${i.url} for more details.`),l};Lt(function(s,i){let l=t(s,i);console.warn(`DEPRECATION: ${l}`)});let e;new Error().stack?e=()=>new Error:e=()=>{try{__fail__.fail();return}catch(n){return n}},Lt(function(s,i,l){if(he.LOG_STACKTRACE_ON_DEPRECATION){let u="",p=e(),m;p instanceof Error&&p.stack&&(p.arguments?(m=p.stack.replace(/^\s+at\s+/gm,"").replace(/^([^(]+?)([\n$])/gm,"{anonymous}($1)$2").replace(/^Object.<anonymous>\s*\(([^)]+)\)/gm,"{anonymous}($1)").split(`
`),m.shift()):m=p.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split(`
`),u=`
    ${m.slice(2).join(`
    `)}`);let S=t(s,i);console.warn(`DEPRECATION: ${S}${u}`)}else l(s,i)}),Lt(function(s,i,l){if(he.RAISE_ON_DEPRECATION){let u=t(s);throw new Error(u)}else l(s,i)}),gn="When calling `deprecate` you must provide an `options` hash as the third parameter.  `options` should include `id` and `until` properties.",bn="When calling `deprecate` you must provide `id` in options.",tr=(n,s)=>`When calling \`deprecate\` you must provide \`${s}\` in options. Missing options.${s} in "${n}" deprecation`,ai=function(s,i,l){re(gn,!!(l&&(l.id||l.until))),re(bn,!!l.id),re(tr(l.id,"until"),!!l.until),re(tr(l.id,"for"),!!l.for),re(tr(l.id,"since"),!!l.since),Tr("deprecate",s,i,l)}}const oi=ai,al=Object.defineProperty({__proto__:null,default:oi,get missingOptionDeprecation(){return tr},get missingOptionsDeprecation(){return gn},get missingOptionsIdDeprecation(){return bn},get registerHandler(){return Lt}},Symbol.toStringTag,{value:"Module"});let li=!1;function yn(){return li}function ci(t){li=!!t}const ol=Object.defineProperty({__proto__:null,isTesting:yn,setTesting:ci},Symbol.toStringTag,{value:"Module"});let Ar=()=>{},ui=()=>{},Sn,En;Ar=function(e){Pr("warn",e)},Ar(function(e){console.warn(`WARNING: ${e}`)}),Sn="When calling `warn` you must provide an `options` hash as the third parameter.  `options` should include an `id` property.",En="When calling `warn` you must provide `id` in options.",ui=function(e,n,s){arguments.length===2&&typeof n=="object"&&(s=n,n=!1),re(Sn,!!s),re(En,!!(s&&s.id)),Tr("warn",e,n,s)};const hi=ui,ll=Object.defineProperty({__proto__:null,default:hi,get missingOptionsDeprecation(){return Sn},get missingOptionsIdDeprecation(){return En},get registerHandler(){return Ar}},Symbol.toStringTag,{value:"Module"}),{toString:cl}=Object.prototype,{toString:ul}=Function.prototype,{isArray:hl}=Array,{keys:pl}=Object,{stringify:pi}=JSON,Cr=100,di=4,dl=/^[\w$]+$/;function mi(t){return typeof t=="number"&&arguments.length===2?this:vn(t,0)}function vn(t,e,n){let s=!1;switch(typeof t){case"undefined":return"undefined";case"object":if(t===null)return"null";if(hl(t)){s=!0;break}if(t.toString===cl||t.toString===void 0)break;return t.toString();case"function":return t.toString===ul?t.name?`[Function:${t.name}]`:"[Function]":t.toString();case"string":return pi(t);case"symbol":case"boolean":case"number":default:return t.toString()}if(n===void 0)n=new WeakSet;else if(n.has(t))return"[Circular]";return n.add(t),s?gl(t,e+1,n):fl(t,e+1,n)}function ml(t){return dl.test(t)?t:pi(t)}function fl(t,e,n){if(e>di)return"[Object]";let s="{",i=pl(t);for(let l=0;l<i.length;l++){if(s+=l===0?" ":", ",l>=Cr){s+=`... ${i.length-Cr} more keys`;break}let u=i[l];re("has key",u),s+=`${ml(String(u))}: ${vn(t[u],e,n)}`}return s+=" }",s}function gl(t,e,n){if(e>di)return"[Array]";let s="[";for(let i=0;i<t.length;i++){if(s+=i===0?" ":", ",i>=Cr){s+=`... ${t.length-Cr} more items`;break}s+=vn(t[i],e,n)}return s+=" ]",s}const bl=Object.defineProperty({__proto__:null,default:mi},Symbol.toStringTag,{value:"Module"}),kn=Object.freeze([]);function wn(){return kn}const yl=wn(),Sl=wn();function El(t){return t===kn}function*vl(t){for(let e=t.length-1;e>=0;e--)yield t[e]}function*fi(t){let e=0;for(const n of t)yield[e++,n]}function U(t,e){if(!t)throw new Error(e||"assertion failure")}function xe(t){Bi.warn(`DEPRECATION: ${t}`)}function kl(t){return Object.keys(t)}function Ot(t){if(t==null)throw new Error("Expected value to be present");return t}function bt(t,e){if(t==null)throw new Error(e);return t}function gi(t="unreachable"){return new Error(t)}function Bt(t){throw new Error(`Exhausted ${String(t)}`)}const wl=(...t)=>t;function bi(t){return t!=null}function _l(t,e){if(!bi(t))throw new Error(`Expected present, got ${typeof t=="string"?t:e}`)}function ae(t){return t.length>0}function Pl(t,e,n){return ae(t)?e(t):n()}function Tl(t){return ae(t)?t:null}function yt(t,e="unexpected empty list"){if(!ae(t))throw new Error(e)}function St(t,e="unexpected empty list"){return yt(t,e),t}function Ke(t){return t.length===0?void 0:t[t.length-1]}function rr(t){return t.length===0?void 0:t[0]}function _n(t,e){if(t===null)return null;let n=[];for(let s of t)n.push(e(s));return n}function Re(){return Object.create(null)}function Al(t){return t!=null}function Cl(t){return typeof t=="function"||typeof t=="object"&&t!==null}class Nl{stack;current=null;constructor(e=[]){this.stack=e}get size(){return this.stack.length}push(e){this.current=e,this.stack.push(e)}pop(){let e=this.stack.pop();return this.current=Ke(this.stack)??null,e===void 0?null:e}nth(e){let n=this.stack.length;return n<e?null:Ot(this.stack[n-e])}isEmpty(){return this.stack.length===0}toArray(){return this.stack}}let xl,Ll,Ol,Bl,yi;{let t=s=>{let i=s.name;if(i===void 0){let l=/function (\w+)\s*\(/u.exec(String(s));i=l&&l[1]||""}return i.replace(/^bound /u,"")},e=s=>{let i,l;return s.constructor&&typeof s.constructor=="function"&&(l=t(s.constructor)),"toString"in s&&s.toString!==Object.prototype.toString&&s.toString!==Function.prototype.toString&&(i=s.toString()),i&&/<.*:ember\d+>/u.test(i)&&l&&l[0]!=="_"&&l.length>2&&l!=="Class"?i.replace(/<.*:/u,`<${l}:`):i||l},n=s=>String(s);yi=s=>typeof s=="function"?t(s)||"(unknown function)":typeof s=="object"&&s!==null?e(s)||"(unknown object)":n(s)}var Il=yi;function Dl(t){let e=t.firstChild;for(;e;){let n=e.nextSibling;t.removeChild(e),e=n}}const Hl=-1,Pn=1,Rl=3,Ml=8,Si=9,Fl=10,Ul=11,$l="http://www.w3.org/1999/xhtml",Vl="http://www.w3.org/1998/Math/MathML",jl="http://www.w3.org/2000/svg",Ei="http://www.w3.org/1999/xlink",vi="http://www.w3.org/XML/1998/namespace",Tn="http://www.w3.org/2000/xmlns/",Gl="beforebegin",ql="afterbegin",zl="beforeend",Wl="afterend";let Et=function(t){return t[t.MAX_SMI=1073741823]="MAX_SMI",t[t.MIN_SMI=-1073741824]="MIN_SMI",t[t.SIGN_BIT=-536870913]="SIGN_BIT",t[t.MAX_INT=536870911]="MAX_INT",t[t.MIN_INT=-536870912]="MIN_INT",t[t.FALSE_HANDLE=0]="FALSE_HANDLE",t[t.TRUE_HANDLE=1]="TRUE_HANDLE",t[t.NULL_HANDLE=2]="NULL_HANDLE",t[t.UNDEFINED_HANDLE=3]="UNDEFINED_HANDLE",t[t.ENCODED_FALSE_HANDLE=0]="ENCODED_FALSE_HANDLE",t[t.ENCODED_TRUE_HANDLE=1]="ENCODED_TRUE_HANDLE",t[t.ENCODED_NULL_HANDLE=2]="ENCODED_NULL_HANDLE",t[t.ENCODED_UNDEFINED_HANDLE=3]="ENCODED_UNDEFINED_HANDLE",t}({});function Kl(t){return t>=0}function Jl(t){return t>Et.ENCODED_UNDEFINED_HANDLE}function Yl(...t){return[!1,!0,null,void 0,...t]}function Xl(t){return t%1==0&&t<=Et.MAX_INT&&t>=Et.MIN_INT}function ki(t){return t&Et.SIGN_BIT}function wi(t){return t|~Et.SIGN_BIT}function _i(t){return~t}function Pi(t){return~t}function Ql(t){return t}function Zl(t){return t}function Ti(t){return(t|=0)<0?ki(t):_i(t)}function Ai(t){return(t|=0)>Et.SIGN_BIT?Pi(t):wi(t)}function ec(t){let e={};e[t]=1;for(let n in e)if(n===t)return n;return t}[1,-1].forEach(t=>Ai(Ti(t)));const tc="%+b:0%";function rc(t){return t.nodeValue==="%+b:0%"}let Me=Object.assign;function Ci(t){return Object.values(t)}function nc(t){return Object.entries(t)}function sc(t){return Ni(t)||xi(t),t}function ic(t,e){if(t==null)return null;if(typeof document===void 0)throw new Error("Attempted to cast to a browser node in a non-browser context");if(Ni(t))return t;if(t.ownerDocument!==document)throw new Error("Attempted to cast to a browser node with a node that was not created from this document");return Li(t,e)}function Ni(t){return t.nodeType===Si}function xi(t){return t?.nodeType===Pn}function ac(t){return t?.nodeType===Pn&&t instanceof Element}function Li(t,e){let n=!1;if(t!==null)if(typeof e=="string")n=Oi(t,e);else{if(!Array.isArray(e))throw gi();n=e.some(s=>Oi(t,s))}if(n&&t instanceof Node)return t;throw function(s,i){return new Error(`cannot cast a ${s} into ${String(i)}`)}(`SimpleElement(${t?.constructor?.name??"null"})`,e)}function Oi(t,e){switch(e){case"NODE":return!0;case"HTML":return t instanceof HTMLElement;case"SVG":return t instanceof SVGElement;case"ELEMENT":return t instanceof Element;default:if(e.toUpperCase()===e)throw new Error("BUG: this code is missing handling for a generic node type");return t instanceof Element&&t.tagName.toLowerCase()===e}}function oc(t,...e){let n="";for(const[u,p]of fi(t))n+=`${p}${e[u]!==void 0?String(e[u]):""}`;let s=n.split(`
`);for(;ae(s)&&/^\s*$/u.test(rr(s));)s.shift();for(;ae(s)&&/^\s*$/u.test(Ke(s));)s.pop();let i=1/0;for(let u of s){let p=/^\s*/u.exec(u)[0].length;i=Math.min(i,p)}let l=[];for(let u of s)l.push(u.slice(i));return l.join(`
`)}function lc(t){if(typeof t=="number")return t;{let e=t.errors[0];throw new Error(`Compile Error: ${e.problem} @ ${e.span.start}..${e.span.end}`)}}function cc(t){if(t.result==="error")throw new Error(`Compile Error: ${t.problem} @ ${t.span.start}..${t.span.end}`);return t}function uc(t){return typeof t=="number"?t:t.handle}function hc(t){return typeof t=="number"}function pc(t){return typeof t=="number"}function dc(t){let e=null;{let n=s=>{let i=typeof s=="symbol"||typeof s=="number"?`[${String(s)}]`:`.${s}`;throw new Error(`You accessed \`this${i}\` from a function passed to the ${t}, but the function itself was not bound to a valid \`this\` context. Consider updating to use a bound function (for instance, use an arrow function, \`() => {}\`).`)};e=new Proxy({},{get(s,i){n(i)},set:(s,i)=>(n(i),!1),has:(s,i)=>(n(i),!1)})}return e}const Bi=console,An=console;function je(t,e="unexpected unreachable branch"){throw An.log("unreachable",t),An.log(`${e} :: ${JSON.stringify(t)} (${t})`),new Error("code reached unreachable")}const mc=Object.defineProperty({__proto__:null,COMMENT_NODE:Ml,DOCUMENT_FRAGMENT_NODE:Ul,DOCUMENT_NODE:Si,DOCUMENT_TYPE_NODE:Fl,ELEMENT_NODE:Pn,EMPTY_ARRAY:kn,EMPTY_NUMBER_ARRAY:Sl,EMPTY_STRING_ARRAY:yl,INSERT_AFTER_BEGIN:ql,INSERT_AFTER_END:Wl,INSERT_BEFORE_BEGIN:Gl,INSERT_BEFORE_END:zl,ImmediateConstants:Et,LOCAL_LOGGER:Bi,LOGGER:An,NS_HTML:$l,NS_MATHML:Vl,NS_SVG:jl,NS_XLINK:Ei,NS_XML:vi,NS_XMLNS:Tn,RAW_NODE:Hl,SERIALIZATION_FIRST_NODE_STRING:tc,Stack:Nl,TEXT_NODE:Rl,arrayToOption:Tl,asPresentArray:St,assert:U,assertNever:je,assertPresent:_l,assertPresentArray:yt,assign:Me,beginTestSteps:xl,buildUntouchableThis:dc,castToBrowser:ic,castToSimple:sc,checkNode:Li,clearElement:Dl,constants:Yl,debugToString:Il,decodeHandle:Zl,decodeImmediate:Ai,decodeNegative:wi,decodePositive:Pi,deprecate:xe,dict:Re,emptyArray:wn,encodeHandle:Ql,encodeImmediate:Ti,encodeNegative:ki,encodePositive:_i,endTestSteps:Ll,entries:nc,enumerate:fi,exhausted:Bt,expect:bt,extractHandle:uc,getFirst:rr,getLast:Ke,ifPresent:Pl,intern:ec,isDict:Al,isElement:ac,isEmptyArray:El,isErrHandle:pc,isHandle:Kl,isNonPrimitiveHandle:Jl,isObject:Cl,isOkHandle:hc,isPresent:bi,isPresentArray:ae,isSerializationFirstNode:rc,isSimpleElement:xi,isSmallInt:Xl,keys:kl,logStep:Bl,mapPresentArray:_n,reverse:vl,strip:oc,tuple:wl,unreachable:gi,unwrap:Ot,unwrapHandle:lc,unwrapTemplate:cc,values:Ci,verifySteps:Ol},Symbol.toStringTag,{value:"Module"});function Ii(t){return bt(t.lookup("renderer:-dom"),"BUG: owner is missing renderer").debugRenderTree.capture()}const fc=Object.defineProperty({__proto__:null,default:Ii},Symbol.toStringTag,{value:"Module"}),at=()=>{};let Cn=at,Nn=at,Nr=at,Di,xn=at,Ln=at,On=at,Je=at,Hi=at,Bn=function(){return arguments[arguments.length-1]};function nr(...t){return(Di??oi)(...t)}Je=function(t,e){switch(t){case"assert":return ii(e);case"info":return Cn=e;case"warn":return Nn=e;case"debug":return Nr=e;case"deprecate":return Di=e;case"debugSeal":return xn=e;case"debugFreeze":return Ln=e;case"runInDebug":return On=e;case"deprecateFunc":return Bn=e}},Hi=function(t){switch(t){case"assert":return re;case"info":return Cn;case"warn":return Nn;case"debug":return Nr;case"deprecate":return nr;case"debugSeal":return xn;case"debugFreeze":return Ln;case"runInDebug":return On;case"deprecateFunc":return Bn}},Je("debug",function(e){console.debug(`DEBUG: ${e}`)}),Je("info",function(){console.info(...arguments)}),Je("deprecateFunc",function(...e){if(e.length===3){let[n,s,i]=e;return function(...l){return nr(n,!1,s),i.apply(this,l)}}else{let[n,s]=e;return function(){return nr(n),s.apply(this,arguments)}}}),Je("runInDebug",function(e){e()}),Je("debugSeal",function(e){Object.seal(e)}),Je("debugFreeze",function(e){Object.isFrozen(e)||Object.freeze(e)}),Je("warn",hi);let gc;yn()||typeof window<"u"&&(Ae||X)&&window.addEventListener&&window.addEventListener("load",()=>{if(document.documentElement&&document.documentElement.dataset&&!document.documentElement.dataset.emberExtension){let t;X?t="https://chrome.google.com/webstore/detail/ember-inspector/bmdblncegkenkacieihfhpjfppoconhi":Ae&&(t="https://addons.mozilla.org/en-US/firefox/addon/ember-inspector/"),Nr(`For more advanced debugging, install the Ember Inspector from ${t}`)}},!1);const bc=Object.defineProperty({__proto__:null,_warnIfUsingStrippedFeatureFlags:gc,get assert(){return re},captureRenderTree:Ii,get debug(){return Nr},get debugFreeze(){return Ln},get debugSeal(){return xn},deprecate:nr,get deprecateFunc(){return Bn},get getDebugFunction(){return Hi},get info(){return Cn},inspect:mi,isTesting:yn,get registerDeprecationHandler(){return Lt},get registerWarnHandler(){return Ar},get runInDebug(){return On},get setDebugFunction(){return Je},setTesting:ci,get warn(){return Nn}},Symbol.toStringTag,{value:"Module"});let Ri,Mi,Fi;function yc(t){return typeof t=="number"?Ui(t):Sc(t)}function Sc(t){let e=parseInt(t,10);return Ui(e)&&t===String(e)}function Ui(t){return t>=0&&t%1===0}{let t=new WeakSet,e=new WeakMap,n=function(s,i){return Object.prototype.propertyIsEnumerable.call(s,i)};Ri=function(s,i,l){if(t.has(s)||(t.add(s),Array.isArray(i)&&yc(l)))return;let u=fn(i,l)||{};if(u.get||u.set||u&&(!u.configurable||!u.writable))return;let p=e.get(i);p===void 0&&(p={},e.set(i,p)),u.hadOwnProperty=Object.hasOwnProperty.call(i,l),p[l]=u,Object.defineProperty(i,l,{configurable:!0,enumerable:n(i,l),get(){return u.get?u.get.call(this):u.value},set(m){re(`You attempted to update ${this}.${String(l)} to "${String(m)}", but it is being tracked by a tracking context, such as a template, computed property, or observer. In order to make sure the context updates properly, you must invalidate the property when updating it. You can mark the property as \`@tracked\`, or use \`@ember/object#set\` to do this.`)}})},Mi=function(s,i){let l=e.get(s);l!==void 0&&l[i]!==void 0&&(Object.defineProperty(s,i,l[i]),delete l[i])},Fi=function(s,i,l){let u=e.get(s);if(u!==void 0&&u[i]!==void 0){let p=u[i];if(p.set)p.set.call(s,l);else if(p.value=l,!p.hadOwnProperty){let m=fn(s,i);m.enumerable=!0,Object.defineProperty(s,i,m)}}else s[i]=l}}const Ec=Object.defineProperty({__proto__:null,Cache:si,GUID_KEY:B,ROOT:dn,canInvoke:Qo,checkHasSuper:wr,dictionary:_e,enumerableSymbol:ie,generateGuid:T,getDebugName:it,getName:el,guidFor:D,intern:Qt,isInternalSymbol:K,isObject:Ve,isProxy:nl,lookupDescriptor:fn,observerListenerMetaFor:Ko,setListeners:Yo,setName:Zo,setObservers:Jo,setProxy:sl,get setWithMandatorySetter(){return Fi},get setupMandatorySetter(){return Ri},symbol:be,get teardownMandatorySetter(){return Mi},toString:ri,uuid:st,wrap:Xo},Symbol.toStringTag,{value:"Module"}),$i={},Vi=Object.assign($i,he.FEATURES);function vc(t){let e=Vi[t];return e===!0||e===!1?e:!!he.ENABLE_OPTIONAL_FEATURES}const kc=Object.defineProperty({__proto__:null,DEFAULT_FEATURES:$i,FEATURES:Vi,isEnabled:vc},Symbol.toStringTag,{value:"Module"}),wc=Object.defineProperty({__proto__:null,ASSIGN:!0},Symbol.toStringTag,{value:"Module"}),y={Append:1,TrustingAppend:2,Comment:3,Modifier:4,StrictModifier:5,Block:6,StrictBlock:7,Component:8,OpenElement:10,OpenElementWithSplat:11,FlushElement:12,CloseElement:13,StaticAttr:14,DynamicAttr:15,ComponentAttr:16,AttrSplat:17,Yield:18,DynamicArg:20,StaticArg:21,TrustingDynamicAttr:22,TrustingComponentAttr:23,StaticComponentAttr:24,Debugger:26,Undefined:27,Call:28,Concat:29,GetSymbol:30,GetLexicalSymbol:32,GetStrictKeyword:31,GetFreeAsComponentOrHelperHead:35,GetFreeAsHelperHead:37,GetFreeAsModifierHead:38,GetFreeAsComponentHead:39,InElement:40,If:41,Each:42,Let:44,WithDynamicVars:45,InvokeComponent:46,HasBlock:48,HasBlockParams:49,Curry:50,Not:51,IfInline:52,GetDynamicVar:53,Log:54},Ie={Strict:0,ResolveAsComponentOrHelperHead:1,ResolveAsHelperHead:5,ResolveAsModifierHead:6,ResolveAsComponentHead:7},ot={class:0,id:1,value:2,name:3,type:4,style:5,href:6},sr={div:0,span:1,p:2,a:3};function In(t){return function(e){return Array.isArray(e)&&e[0]===t}}const _c=In(y.FlushElement);function Pc(t){return t[0]===y.StaticAttr||t[0]===y.DynamicAttr||t[0]===y.TrustingDynamicAttr||t[0]===y.ComponentAttr||t[0]===y.StaticComponentAttr||t[0]===y.TrustingComponentAttr||t[0]===y.AttrSplat||t[0]===y.Modifier}function Tc(t){return typeof t=="string"}function Ac(t){return t}function Cc(t){return t[0]===y.StaticArg||t[0]===y.DynamicArg}function Nc(t){return Array.isArray(t)&&t[0]===y.Call}const xc=In(y.GetSymbol),Lc=Object.defineProperty({__proto__:null,SexpOpcodes:y,VariableResolutionContext:Ie,WellKnownAttrNames:ot,WellKnownTagNames:sr,getStringFromValue:Ac,is:In,isArgument:Cc,isAttribute:Pc,isFlushElement:_c,isGet:xc,isHelper:Nc,isStringLiteral:Tc},Symbol.toStringTag,{value:"Module"});var Dn=["description","fileName","lineNumber","endLineNumber","message","name","number","stack"];function Ye(t,e){var n=e&&e.loc,s,i,l,u;n&&(s=n.start.line,i=n.end.line,l=n.start.column,u=n.end.column,t+=" - "+s+":"+l);for(var p=Error.prototype.constructor.call(this,t),m=0;m<Dn.length;m++)this[Dn[m]]=p[Dn[m]];Error.captureStackTrace&&Error.captureStackTrace(this,Ye);try{n&&(this.lineNumber=s,this.endLineNumber=i,Object.defineProperty?(Object.defineProperty(this,"column",{value:l,enumerable:!0}),Object.defineProperty(this,"endColumn",{value:u,enumerable:!0})):(this.column=l,this.endColumn=u))}catch{}}Ye.prototype=new Error;function It(){this.parents=[]}It.prototype={constructor:It,mutating:!1,acceptKey:function(t,e){var n=this.accept(t[e]);if(this.mutating){if(n&&!It.prototype[n.type])throw new Ye('Unexpected node type "'+n.type+'" found when accepting '+e+" on "+t.type);t[e]=n}},acceptRequired:function(t,e){if(this.acceptKey(t,e),!t[e])throw new Ye(t.type+" requires "+e)},acceptArray:function(t){for(var e=0,n=t.length;e<n;e++)this.acceptKey(t,e),t[e]||(t.splice(e,1),e--,n--)},accept:function(t){if(t){if(!this[t.type])throw new Ye("Unknown type: "+t.type,t);this.current&&this.parents.unshift(this.current),this.current=t;var e=this[t.type](t);if(this.current=this.parents.shift(),!this.mutating||e)return e;if(e!==!1)return t}},Program:function(t){this.acceptArray(t.body)},MustacheStatement:xr,Decorator:xr,BlockStatement:ji,DecoratorBlock:ji,PartialStatement:Gi,PartialBlockStatement:function(t){Gi.call(this,t),this.acceptKey(t,"program")},ContentStatement:function(){},CommentStatement:function(){},SubExpression:xr,PathExpression:function(){},StringLiteral:function(){},NumberLiteral:function(){},BooleanLiteral:function(){},UndefinedLiteral:function(){},NullLiteral:function(){},Hash:function(t){this.acceptArray(t.pairs)},HashPair:function(t){this.acceptRequired(t,"value")}};function xr(t){this.acceptRequired(t,"path"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function ji(t){xr.call(this,t),this.acceptKey(t,"program"),this.acceptKey(t,"inverse")}function Gi(t){this.acceptRequired(t,"name"),this.acceptArray(t.params),this.acceptKey(t,"hash")}function Fe(t){t===void 0&&(t={}),this.options=t}Fe.prototype=new It,Fe.prototype.Program=function(t){var e=!this.options.ignoreStandalone,n=!this.isRootSeen;this.isRootSeen=!0;for(var s=t.body,i=0,l=s.length;i<l;i++){var u=s[i],p=this.accept(u);if(p){var m=Hn(s,i,n),S=Rn(s,i,n),_=p.openStandalone&&m,N=p.closeStandalone&&S,H=p.inlineStandalone&&m&&S;p.close&&vt(s,i,!0),p.open&&lt(s,i,!0),e&&H&&(vt(s,i),lt(s,i)&&u.type==="PartialStatement"&&(u.indent=/([ \t]+$)/.exec(s[i-1].original)[1])),e&&_&&(vt((u.program||u.inverse).body),lt(s,i)),e&&N&&(vt(s,i),lt((u.inverse||u.program).body))}}return t},Fe.prototype.BlockStatement=Fe.prototype.DecoratorBlock=Fe.prototype.PartialBlockStatement=function(t){this.accept(t.program),this.accept(t.inverse);var e=t.program||t.inverse,n=t.program&&t.inverse,s=n,i=n;if(n&&n.chained)for(s=n.body[0].program;i.chained;)i=i.body[i.body.length-1].program;var l={open:t.openStrip.open,close:t.closeStrip.close,openStandalone:Rn(e.body),closeStandalone:Hn((s||e).body)};if(t.openStrip.close&&vt(e.body,null,!0),n){var u=t.inverseStrip;u.open&&lt(e.body,null,!0),u.close&&vt(s.body,null,!0),t.closeStrip.open&&lt(i.body,null,!0),!this.options.ignoreStandalone&&Hn(e.body)&&Rn(s.body)&&(lt(e.body),vt(s.body))}else t.closeStrip.open&&lt(e.body,null,!0);return l},Fe.prototype.Decorator=Fe.prototype.MustacheStatement=function(t){return t.strip},Fe.prototype.PartialStatement=Fe.prototype.CommentStatement=function(t){var e=t.strip||{};return{inlineStandalone:!0,open:e.open,close:e.close}};function Hn(t,e,n){e===void 0&&(e=t.length);var s=t[e-1],i=t[e-2];if(!s)return n;if(s.type==="ContentStatement")return(i||!n?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(s.original)}function Rn(t,e,n){e===void 0&&(e=-1);var s=t[e+1],i=t[e+2];if(!s)return n;if(s.type==="ContentStatement")return(i||!n?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(s.original)}function vt(t,e,n){var s=t[e==null?0:e+1];if(!(!s||s.type!=="ContentStatement"||!n&&s.rightStripped)){var i=s.value;s.value=s.value.replace(n?/^\s+/:/^[ \t]*\r?\n?/,""),s.rightStripped=s.value!==i}}function lt(t,e,n){var s=t[e==null?t.length-1:e-1];if(!(!s||s.type!=="ContentStatement"||!n&&s.leftStripped)){var i=s.value;return s.value=s.value.replace(n?/\s+$/:/[ \t]+$/,""),s.leftStripped=s.value!==i,s.leftStripped}}var Lr=function(){var t=function(ft,R,V,F){for(V=V||{},F=ft.length;F--;V[ft[F]]=R);return V},e=[2,44],n=[1,20],s=[5,14,15,19,29,34,39,44,47,48,52,56,60],i=[1,35],l=[1,38],u=[1,30],p=[1,31],m=[1,32],S=[1,33],_=[1,34],N=[1,37],H=[14,15,19,29,34,39,44,47,48,52,56,60],J=[14,15,19,29,34,44,47,48,52,56,60],se=[15,18],we=[14,15,19,29,34,47,48,52,56,60],Ce=[33,64,71,79,80,81,82,83,84],Te=[23,33,55,64,67,71,74,79,80,81,82,83,84],fe=[1,51],Us=[23,33,55,64,67,71,74,79,80,81,82,83,84,86],Ro=[2,43],Mo=[55,64,71,79,80,81,82,83,84],Fo=[1,58],$s=[1,59],Vs=[1,66],Wt=[33,64,71,74,79,80,81,82,83,84],Uo=[23,64,71,79,80,81,82,83,84],tt=[1,76],$o=[64,67,71,79,80,81,82,83,84],Kt=[33,74],js=[23,33,55,67,71,74],Vo=[1,106],Gs=[1,118],jo=[71,76],qs={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,partialBlock:12,content:13,COMMENT:14,CONTENT:15,openRawBlock:16,rawBlock_repetition0:17,END_RAW_BLOCK:18,OPEN_RAW_BLOCK:19,helperName:20,openRawBlock_repetition0:21,openRawBlock_option0:22,CLOSE_RAW_BLOCK:23,openBlock:24,block_option0:25,closeBlock:26,openInverse:27,block_option1:28,OPEN_BLOCK:29,openBlock_repetition0:30,openBlock_option0:31,openBlock_option1:32,CLOSE:33,OPEN_INVERSE:34,openInverse_repetition0:35,openInverse_option0:36,openInverse_option1:37,openInverseChain:38,OPEN_INVERSE_CHAIN:39,openInverseChain_repetition0:40,openInverseChain_option0:41,openInverseChain_option1:42,inverseAndProgram:43,INVERSE:44,inverseChain:45,inverseChain_option0:46,OPEN_ENDBLOCK:47,OPEN:48,expr:49,mustache_repetition0:50,mustache_option0:51,OPEN_UNESCAPED:52,mustache_repetition1:53,mustache_option1:54,CLOSE_UNESCAPED:55,OPEN_PARTIAL:56,partial_repetition0:57,partial_option0:58,openPartialBlock:59,OPEN_PARTIAL_BLOCK:60,openPartialBlock_repetition0:61,openPartialBlock_option0:62,sexpr:63,OPEN_SEXPR:64,sexpr_repetition0:65,sexpr_option0:66,CLOSE_SEXPR:67,hash:68,hash_repetition_plus0:69,hashSegment:70,ID:71,EQUALS:72,blockParams:73,OPEN_BLOCK_PARAMS:74,blockParams_repetition_plus0:75,CLOSE_BLOCK_PARAMS:76,path:77,dataName:78,STRING:79,NUMBER:80,BOOLEAN:81,UNDEFINED:82,NULL:83,DATA:84,pathSegments:85,SEP:86,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",14:"COMMENT",15:"CONTENT",18:"END_RAW_BLOCK",19:"OPEN_RAW_BLOCK",23:"CLOSE_RAW_BLOCK",29:"OPEN_BLOCK",33:"CLOSE",34:"OPEN_INVERSE",39:"OPEN_INVERSE_CHAIN",44:"INVERSE",47:"OPEN_ENDBLOCK",48:"OPEN",52:"OPEN_UNESCAPED",55:"CLOSE_UNESCAPED",56:"OPEN_PARTIAL",60:"OPEN_PARTIAL_BLOCK",64:"OPEN_SEXPR",67:"CLOSE_SEXPR",71:"ID",72:"EQUALS",74:"OPEN_BLOCK_PARAMS",76:"CLOSE_BLOCK_PARAMS",79:"STRING",80:"NUMBER",81:"BOOLEAN",82:"UNDEFINED",83:"NULL",84:"DATA",86:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[13,1],[10,3],[16,5],[9,4],[9,4],[24,6],[27,6],[38,6],[43,2],[45,3],[45,1],[26,3],[8,5],[8,5],[11,5],[12,3],[59,5],[49,1],[49,1],[63,5],[68,1],[70,3],[73,3],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[20,1],[78,2],[77,1],[85,3],[85,1],[6,0],[6,2],[17,0],[17,2],[21,0],[21,2],[22,0],[22,1],[25,0],[25,1],[28,0],[28,1],[30,0],[30,2],[31,0],[31,1],[32,0],[32,1],[35,0],[35,2],[36,0],[36,1],[37,0],[37,1],[40,0],[40,2],[41,0],[41,1],[42,0],[42,1],[46,0],[46,1],[50,0],[50,2],[51,0],[51,1],[53,0],[53,2],[54,0],[54,1],[57,0],[57,2],[58,0],[58,1],[61,0],[61,2],[62,0],[62,1],[65,0],[65,2],[66,0],[66,1],[69,1],[69,2],[75,1],[75,2]],performAction:function(R,V,F,I,Y,v,Jt){var w=v.length-1;switch(Y){case 1:return v[w-1];case 2:this.$=I.prepareProgram(v[w]);break;case 3:case 4:case 5:case 6:case 7:case 8:case 20:case 27:case 28:case 33:case 34:this.$=v[w];break;case 9:this.$={type:"CommentStatement",value:I.stripComment(v[w]),strip:I.stripFlags(v[w],v[w]),loc:I.locInfo(this._$)};break;case 10:this.$={type:"ContentStatement",original:v[w],value:v[w],loc:I.locInfo(this._$)};break;case 11:this.$=I.prepareRawBlock(v[w-2],v[w-1],v[w],this._$);break;case 12:this.$={path:v[w-3],params:v[w-2],hash:v[w-1]};break;case 13:this.$=I.prepareBlock(v[w-3],v[w-2],v[w-1],v[w],!1,this._$);break;case 14:this.$=I.prepareBlock(v[w-3],v[w-2],v[w-1],v[w],!0,this._$);break;case 15:this.$={open:v[w-5],path:v[w-4],params:v[w-3],hash:v[w-2],blockParams:v[w-1],strip:I.stripFlags(v[w-5],v[w])};break;case 16:case 17:this.$={path:v[w-4],params:v[w-3],hash:v[w-2],blockParams:v[w-1],strip:I.stripFlags(v[w-5],v[w])};break;case 18:this.$={strip:I.stripFlags(v[w-1],v[w-1]),program:v[w]};break;case 19:var an=I.prepareBlock(v[w-2],v[w-1],v[w],v[w],!1,this._$),on=I.prepareProgram([an],v[w-1].loc);on.chained=!0,this.$={strip:v[w-2].strip,program:on,chain:!0};break;case 21:this.$={path:v[w-1],strip:I.stripFlags(v[w-2],v[w])};break;case 22:case 23:this.$=I.prepareMustache(v[w-3],v[w-2],v[w-1],v[w-4],I.stripFlags(v[w-4],v[w]),this._$);break;case 24:this.$={type:"PartialStatement",name:v[w-3],params:v[w-2],hash:v[w-1],indent:"",strip:I.stripFlags(v[w-4],v[w]),loc:I.locInfo(this._$)};break;case 25:this.$=I.preparePartialBlock(v[w-2],v[w-1],v[w],this._$);break;case 26:this.$={path:v[w-3],params:v[w-2],hash:v[w-1],strip:I.stripFlags(v[w-4],v[w])};break;case 29:this.$={type:"SubExpression",path:v[w-3],params:v[w-2],hash:v[w-1],loc:I.locInfo(this._$)};break;case 30:this.$={type:"Hash",pairs:v[w],loc:I.locInfo(this._$)};break;case 31:this.$={type:"HashPair",key:I.id(v[w-2]),value:v[w],loc:I.locInfo(this._$)};break;case 32:this.$=I.id(v[w-1]);break;case 35:this.$={type:"StringLiteral",value:v[w],original:v[w],loc:I.locInfo(this._$)};break;case 36:this.$={type:"NumberLiteral",value:Number(v[w]),original:Number(v[w]),loc:I.locInfo(this._$)};break;case 37:this.$={type:"BooleanLiteral",value:v[w]==="true",original:v[w]==="true",loc:I.locInfo(this._$)};break;case 38:this.$={type:"UndefinedLiteral",original:void 0,value:void 0,loc:I.locInfo(this._$)};break;case 39:this.$={type:"NullLiteral",original:null,value:null,loc:I.locInfo(this._$)};break;case 40:this.$=I.preparePath(!0,v[w],this._$);break;case 41:this.$=I.preparePath(!1,v[w],this._$);break;case 42:v[w-2].push({part:I.id(v[w]),original:v[w],separator:v[w-1]}),this.$=v[w-2];break;case 43:this.$=[{part:I.id(v[w]),original:v[w]}];break;case 44:case 46:case 48:case 56:case 62:case 68:case 76:case 80:case 84:case 88:case 92:this.$=[];break;case 45:case 47:case 49:case 57:case 63:case 69:case 77:case 81:case 85:case 89:case 93:case 97:case 99:v[w-1].push(v[w]);break;case 96:case 98:this.$=[v[w]];break}},table:[t([5,14,15,19,29,34,48,52,56,60],e,{3:1,4:2,6:3}),{1:[3]},{5:[1,4]},t([5,39,44,47],[2,2],{7:5,8:6,9:7,10:8,11:9,12:10,13:11,24:15,27:16,16:17,59:19,14:[1,12],15:n,19:[1,23],29:[1,21],34:[1,22],48:[1,13],52:[1,14],56:[1,18],60:[1,24]}),{1:[2,1]},t(s,[2,45]),t(s,[2,3]),t(s,[2,4]),t(s,[2,5]),t(s,[2,6]),t(s,[2,7]),t(s,[2,8]),t(s,[2,9]),{20:26,49:25,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{20:26,49:39,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(H,e,{6:3,4:40}),t(J,e,{6:3,4:41}),t(se,[2,46],{17:42}),{20:26,49:43,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(we,e,{6:3,4:44}),t([5,14,15,18,19,29,34,39,44,47,48,52,56,60],[2,10]),{20:45,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{20:46,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{20:47,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{20:26,49:48,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(Ce,[2,76],{50:49}),t(Te,[2,27]),t(Te,[2,28]),t(Te,[2,33]),t(Te,[2,34]),t(Te,[2,35]),t(Te,[2,36]),t(Te,[2,37]),t(Te,[2,38]),t(Te,[2,39]),{20:26,49:50,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(Te,[2,41],{86:fe}),{71:l,85:52},t(Us,Ro),t(Mo,[2,80],{53:53}),{25:54,38:56,39:Fo,43:57,44:$s,45:55,47:[2,52]},{28:60,43:61,44:$s,47:[2,54]},{13:63,15:n,18:[1,62]},t(Ce,[2,84],{57:64}),{26:65,47:Vs},t(Wt,[2,56],{30:67}),t(Wt,[2,62],{35:68}),t(Uo,[2,48],{21:69}),t(Ce,[2,88],{61:70}),{20:26,33:[2,78],49:72,51:71,63:27,64:i,68:73,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t($o,[2,92],{65:77}),{71:[1,78]},t(Te,[2,40],{86:fe}),{20:26,49:80,54:79,55:[2,82],63:27,64:i,68:81,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{26:82,47:Vs},{47:[2,53]},t(H,e,{6:3,4:83}),{47:[2,20]},{20:84,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(we,e,{6:3,4:85}),{26:86,47:Vs},{47:[2,55]},t(s,[2,11]),t(se,[2,47]),{20:26,33:[2,86],49:88,58:87,63:27,64:i,68:89,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(s,[2,25]),{20:90,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(Kt,[2,58],{20:26,63:27,77:28,78:29,85:36,69:74,70:75,31:91,49:92,68:93,64:i,71:tt,79:u,80:p,81:m,82:S,83:_,84:N}),t(Kt,[2,64],{20:26,63:27,77:28,78:29,85:36,69:74,70:75,36:94,49:95,68:96,64:i,71:tt,79:u,80:p,81:m,82:S,83:_,84:N}),{20:26,22:97,23:[2,50],49:98,63:27,64:i,68:99,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{20:26,33:[2,90],49:101,62:100,63:27,64:i,68:102,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{33:[1,103]},t(Ce,[2,77]),{33:[2,79]},t([23,33,55,67,74],[2,30],{70:104,71:[1,105]}),t(js,[2,96]),t(Us,Ro,{72:Vo}),{20:26,49:108,63:27,64:i,66:107,67:[2,94],68:109,69:74,70:75,71:tt,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},t(Us,[2,42]),{55:[1,110]},t(Mo,[2,81]),{55:[2,83]},t(s,[2,13]),{38:56,39:Fo,43:57,44:$s,45:112,46:111,47:[2,74]},t(Wt,[2,68],{40:113}),{47:[2,18]},t(s,[2,14]),{33:[1,114]},t(Ce,[2,85]),{33:[2,87]},{33:[1,115]},{32:116,33:[2,60],73:117,74:Gs},t(Wt,[2,57]),t(Kt,[2,59]),{33:[2,66],37:119,73:120,74:Gs},t(Wt,[2,63]),t(Kt,[2,65]),{23:[1,121]},t(Uo,[2,49]),{23:[2,51]},{33:[1,122]},t(Ce,[2,89]),{33:[2,91]},t(s,[2,22]),t(js,[2,97]),{72:Vo},{20:26,49:123,63:27,64:i,71:l,77:28,78:29,79:u,80:p,81:m,82:S,83:_,84:N,85:36},{67:[1,124]},t($o,[2,93]),{67:[2,95]},t(s,[2,23]),{47:[2,19]},{47:[2,75]},t(Kt,[2,70],{20:26,63:27,77:28,78:29,85:36,69:74,70:75,41:125,49:126,68:127,64:i,71:tt,79:u,80:p,81:m,82:S,83:_,84:N}),t(s,[2,24]),t(s,[2,21]),{33:[1,128]},{33:[2,61]},{71:[1,130],75:129},{33:[1,131]},{33:[2,67]},t(se,[2,12]),t(we,[2,26]),t(js,[2,31]),t(Te,[2,29]),{33:[2,72],42:132,73:133,74:Gs},t(Wt,[2,69]),t(Kt,[2,71]),t(H,[2,15]),{71:[1,135],76:[1,134]},t(jo,[2,98]),t(J,[2,16]),{33:[1,136]},{33:[2,73]},{33:[2,32]},t(jo,[2,99]),t(H,[2,17])],defaultActions:{4:[2,1],55:[2,53],57:[2,20],61:[2,55],73:[2,79],81:[2,83],85:[2,18],89:[2,87],99:[2,51],102:[2,91],109:[2,95],111:[2,19],112:[2,75],117:[2,61],120:[2,67],133:[2,73],134:[2,32]},parseError:function(R,V){if(V.recoverable)this.trace(R);else{var F=new Error(R);throw F.hash=V,F}},parse:function(R){var V=this,F=[0],I=[null],Y=[],v=this.table,Jt="",w=0,an=0,on=2,Go=1,Zp=Y.slice.call(arguments,1),ge=Object.create(this.lexer),Ct={yy:{}};for(var Ws in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Ws)&&(Ct.yy[Ws]=this.yy[Ws]);ge.setInput(R,Ct.yy),Ct.yy.lexer=ge,Ct.yy.parser=this,typeof ge.yylloc>"u"&&(ge.yylloc={});var Ks=ge.yylloc;Y.push(Ks);var ed=ge.options&&ge.options.ranges;typeof Ct.yy.parseError=="function"?this.parseError=Ct.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var td=function(){var Xt;return Xt=ge.lex()||Go,typeof Xt!="number"&&(Xt=V.symbols_[Xt]||Xt),Xt},Ne,Nt,He,Js,Yt={},ln,rt,qo,cn;;){if(Nt=F[F.length-1],this.defaultActions[Nt]?He=this.defaultActions[Nt]:((Ne===null||typeof Ne>"u")&&(Ne=td()),He=v[Nt]&&v[Nt][Ne]),typeof He>"u"||!He.length||!He[0]){var Ys="";cn=[];for(ln in v[Nt])this.terminals_[ln]&&ln>on&&cn.push("'"+this.terminals_[ln]+"'");ge.showPosition?Ys="Parse error on line "+(w+1)+`:
`+ge.showPosition()+`
Expecting `+cn.join(", ")+", got '"+(this.terminals_[Ne]||Ne)+"'":Ys="Parse error on line "+(w+1)+": Unexpected "+(Ne==Go?"end of input":"'"+(this.terminals_[Ne]||Ne)+"'"),this.parseError(Ys,{text:ge.match,token:this.terminals_[Ne]||Ne,line:ge.yylineno,loc:Ks,expected:cn})}if(He[0]instanceof Array&&He.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Nt+", token: "+Ne);switch(He[0]){case 1:F.push(Ne),I.push(ge.yytext),Y.push(ge.yylloc),F.push(He[1]),Ne=null,an=ge.yyleng,Jt=ge.yytext,w=ge.yylineno,Ks=ge.yylloc;break;case 2:if(rt=this.productions_[He[1]][1],Yt.$=I[I.length-rt],Yt._$={first_line:Y[Y.length-(rt||1)].first_line,last_line:Y[Y.length-1].last_line,first_column:Y[Y.length-(rt||1)].first_column,last_column:Y[Y.length-1].last_column},ed&&(Yt._$.range=[Y[Y.length-(rt||1)].range[0],Y[Y.length-1].range[1]]),Js=this.performAction.apply(Yt,[Jt,an,w,Ct.yy,He[1],I,Y].concat(Zp)),typeof Js<"u")return Js;rt&&(F=F.slice(0,-1*rt*2),I=I.slice(0,-1*rt),Y=Y.slice(0,-1*rt)),F.push(this.productions_[He[1]][0]),I.push(Yt.$),Y.push(Yt._$),qo=v[F[F.length-2]][F[F.length-1]],F.push(qo);break;case 3:return!0}}return!0}},Qp=function(){var ft={EOF:1,parseError:function(V,F){if(this.yy.parser)this.yy.parser.parseError(V,F);else throw new Error(V)},setInput:function(R,V){return this.yy=V||this.yy||{},this._input=R,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var R=this._input[0];this.yytext+=R,this.yyleng++,this.offset++,this.match+=R,this.matched+=R;var V=R.match(/(?:\r\n?|\n).*/g);return V?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),R},unput:function(R){var V=R.length,F=R.split(/(?:\r\n?|\n)/g);this._input=R+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-V),this.offset-=V;var I=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),F.length-1&&(this.yylineno-=F.length-1);var Y=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:F?(F.length===I.length?this.yylloc.first_column:0)+I[I.length-F.length].length-F[0].length:this.yylloc.first_column-V},this.options.ranges&&(this.yylloc.range=[Y[0],Y[0]+this.yyleng-V]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(R){this.unput(this.match.slice(R))},pastInput:function(){var R=this.matched.substr(0,this.matched.length-this.match.length);return(R.length>20?"...":"")+R.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var R=this.match;return R.length<20&&(R+=this._input.substr(0,20-R.length)),(R.substr(0,20)+(R.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var R=this.pastInput(),V=new Array(R.length+1).join("-");return R+this.upcomingInput()+`
`+V+"^"},test_match:function(R,V){var F,I,Y;if(this.options.backtrack_lexer&&(Y={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Y.yylloc.range=this.yylloc.range.slice(0))),I=R[0].match(/(?:\r\n?|\n).*/g),I&&(this.yylineno+=I.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:I?I[I.length-1].length-I[I.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+R[0].length},this.yytext+=R[0],this.match+=R[0],this.matches=R,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(R[0].length),this.matched+=R[0],F=this.performAction.call(this,this.yy,this,V,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),F)return F;if(this._backtrack){for(var v in Y)this[v]=Y[v];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var R,V,F,I;this._more||(this.yytext="",this.match="");for(var Y=this._currentRules(),v=0;v<Y.length;v++)if(F=this._input.match(this.rules[Y[v]]),F&&(!V||F[0].length>V[0].length)){if(V=F,I=v,this.options.backtrack_lexer){if(R=this.test_match(F,Y[v]),R!==!1)return R;if(this._backtrack){V=!1;continue}else return!1}else if(!this.options.flex)break}return V?(R=this.test_match(V,Y[I]),R!==!1?R:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var V=this.next();return V||this.lex()},begin:function(V){this.conditionStack.push(V)},popState:function(){var V=this.conditionStack.length-1;return V>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(V){return V=this.conditionStack.length-1-Math.abs(V||0),V>=0?this.conditionStack[V]:"INITIAL"},pushState:function(V){this.begin(V)},stateStackSize:function(){return this.conditionStack.length},options:{},performAction:function(V,F,I,Y){function v(Jt,w){return F.yytext=F.yytext.substring(Jt,F.yyleng-w+Jt)}switch(I){case 0:if(F.yytext.slice(-2)==="\\\\"?(v(0,1),this.begin("mu")):F.yytext.slice(-1)==="\\"?(v(0,1),this.begin("emu")):this.begin("mu"),F.yytext)return 15;break;case 1:return 15;case 2:return this.popState(),15;case 3:return this.begin("raw"),15;case 4:return this.popState(),this.conditionStack[this.conditionStack.length-1]==="raw"?15:(v(5,9),18);case 5:return 15;case 6:return this.popState(),14;case 7:return 64;case 8:return 67;case 9:return 19;case 10:return this.popState(),this.begin("raw"),23;case 11:return 56;case 12:return 60;case 13:return 29;case 14:return 47;case 15:return this.popState(),44;case 16:return this.popState(),44;case 17:return 34;case 18:return 39;case 19:return 52;case 20:return 48;case 21:this.unput(F.yytext),this.popState(),this.begin("com");break;case 22:return this.popState(),14;case 23:return 48;case 24:return 72;case 25:return 71;case 26:return 71;case 27:return 86;case 28:break;case 29:return this.popState(),55;case 30:return this.popState(),33;case 31:return F.yytext=v(1,2).replace(/\\"/g,'"'),79;case 32:return F.yytext=v(1,2).replace(/\\'/g,"'"),79;case 33:return 84;case 34:return 81;case 35:return 81;case 36:return 82;case 37:return 83;case 38:return 80;case 39:return 74;case 40:return 76;case 41:return 71;case 42:return F.yytext=F.yytext.replace(/\\([\\\]])/g,"$1"),71;case 43:return"INVALID";case 44:return 5}},rules:[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{(?=[^/]))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]+?(?=(\{\{\{\{)))/,/^(?:[\s\S]*?--(~)?\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#>)/,/^(?:\{\{(~)?#\*?)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{(~)?!--)/,/^(?:\{\{(~)?![\s\S]*?\}\})/,/^(?:\{\{(~)?\*?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)|])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:undefined(?=([~}\s)])))/,/^(?:null(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:as\s+\|)/,/^(?:\|)/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)|]))))/,/^(?:\[(\\\]|[^\]])*\])/,/^(?:.)/,/^(?:$)/],conditions:{mu:{rules:[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[6],inclusive:!1},raw:{rules:[3,4,5],inclusive:!1},INITIAL:{rules:[0,1,44],inclusive:!0}}};return ft}();qs.lexer=Qp;function zs(){this.yy={}}return zs.prototype=qs,qs.Parser=zs,new zs}();function Oc(t){return new ce().accept(t)}function ce(){this.padding=0}ce.prototype=new It,ce.prototype.pad=function(t){for(var e="",n=0,s=this.padding;n<s;n++)e+="  ";return e+=t+`
`,e},ce.prototype.Program=function(t){var e="",n=t.body,s,i;if(t.blockParams){var l="BLOCK PARAMS: [";for(s=0,i=t.blockParams.length;s<i;s++)l+=" "+t.blockParams[s];l+=" ]",e+=this.pad(l)}for(s=0,i=n.length;s<i;s++)e+=this.accept(n[s]);return this.padding--,e},ce.prototype.MustacheStatement=function(t){return this.pad("{{ "+this.SubExpression(t)+" }}")},ce.prototype.Decorator=function(t){return this.pad("{{ DIRECTIVE "+this.SubExpression(t)+" }}")},ce.prototype.BlockStatement=ce.prototype.DecoratorBlock=function(t){var e="";return e+=this.pad((t.type==="DecoratorBlock"?"DIRECTIVE ":"")+"BLOCK:"),this.padding++,e+=this.pad(this.SubExpression(t)),t.program&&(e+=this.pad("PROGRAM:"),this.padding++,e+=this.accept(t.program),this.padding--),t.inverse&&(t.program&&this.padding++,e+=this.pad("{{^}}"),this.padding++,e+=this.accept(t.inverse),this.padding--,t.program&&this.padding--),this.padding--,e},ce.prototype.PartialStatement=function(t){var e="PARTIAL:"+t.name.original;return t.params[0]&&(e+=" "+this.accept(t.params[0])),t.hash&&(e+=" "+this.accept(t.hash)),this.pad("{{> "+e+" }}")},ce.prototype.PartialBlockStatement=function(t){var e="PARTIAL BLOCK:"+t.name.original;return t.params[0]&&(e+=" "+this.accept(t.params[0])),t.hash&&(e+=" "+this.accept(t.hash)),e+=" "+this.pad("PROGRAM:"),this.padding++,e+=this.accept(t.program),this.padding--,this.pad("{{> "+e+" }}")},ce.prototype.ContentStatement=function(t){return this.pad("CONTENT[ '"+t.value+"' ]")},ce.prototype.CommentStatement=function(t){return this.pad("{{! '"+t.value+"' }}")},ce.prototype.SubExpression=function(t){for(var e=t.params,n=[],s,i=0,l=e.length;i<l;i++)n.push(this.accept(e[i]));return e="["+n.join(", ")+"]",s=t.hash?" "+this.accept(t.hash):"",this.accept(t.path)+" "+e+s},ce.prototype.PathExpression=function(t){var e=t.parts.join("/");return(t.data?"@":"")+"PATH:"+e},ce.prototype.StringLiteral=function(t){return'"'+t.value+'"'},ce.prototype.NumberLiteral=function(t){return"NUMBER{"+t.value+"}"},ce.prototype.BooleanLiteral=function(t){return"BOOLEAN{"+t.value+"}"},ce.prototype.UndefinedLiteral=function(){return"UNDEFINED"},ce.prototype.NullLiteral=function(){return"NULL"},ce.prototype.Hash=function(t){for(var e=t.pairs,n=[],s=0,i=e.length;s<i;s++)n.push(this.accept(e[s]));return"HASH{"+n.join(", ")+"}"},ce.prototype.HashPair=function(t){return t.key+"="+this.accept(t.value)};function Mn(t,e){if(e=e.path?e.path.original:e,t.path.original!==e){var n={loc:t.path.loc};throw new Ye(t.path.original+" doesn't match "+e,n)}}function qi(t,e){this.source=t,this.start={line:e.first_line,column:e.first_column},this.end={line:e.last_line,column:e.last_column}}function Bc(t){return/^\[.*\]$/.test(t)?t.substring(1,t.length-1):t}function Ic(t,e){return{open:t.charAt(2)==="~",close:e.charAt(e.length-3)==="~"}}function Dc(t){return t.replace(/^\{\{~?!-?-?/,"").replace(/-?-?~?\}\}$/,"")}function Hc(t,e,n){n=this.locInfo(n);for(var s=t?"@":"",i=[],l=0,u=0,p=e.length;u<p;u++){var m=e[u].part,S=e[u].original!==m;if(s+=(e[u].separator||"")+m,!S&&(m===".."||m==="."||m==="this")){if(i.length>0)throw new Ye("Invalid path: "+s,{loc:n});m===".."&&l++}else i.push(m)}return{type:"PathExpression",data:t,depth:l,parts:i,original:s,loc:n}}function Rc(t,e,n,s,i,l){var u=s.charAt(3)||s.charAt(2),p=u!=="{"&&u!=="&",m=/\*/.test(s);return{type:m?"Decorator":"MustacheStatement",path:t,params:e,hash:n,escaped:p,strip:i,loc:this.locInfo(l)}}function Mc(t,e,n,s){Mn(t,n),s=this.locInfo(s);var i={type:"Program",body:e,strip:{},loc:s};return{type:"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:i,openStrip:{},inverseStrip:{},closeStrip:{},loc:s}}function Fc(t,e,n,s,i,l){s&&s.path&&Mn(t,s);var u=/\*/.test(t.open);e.blockParams=t.blockParams;var p,m;if(n){if(u)throw new Ye("Unexpected inverse block on decorator",n);n.chain&&(n.program.body[0].closeStrip=s.strip),m=n.strip,p=n.program}return i&&(i=p,p=e,e=i),{type:u?"DecoratorBlock":"BlockStatement",path:t.path,params:t.params,hash:t.hash,program:e,inverse:p,openStrip:t.strip,inverseStrip:m,closeStrip:s&&s.strip,loc:this.locInfo(l)}}function Uc(t,e){if(!e&&t.length){var n=t[0].loc,s=t[t.length-1].loc;n&&s&&(e={source:n.source,start:{line:n.start.line,column:n.start.column},end:{line:s.end.line,column:s.end.column}})}return{type:"Program",body:t,strip:{},loc:e}}function $c(t,e,n,s){return Mn(t,n),{type:"PartialBlockStatement",name:t.path,params:t.params,hash:t.hash,program:e,openStrip:t.strip,closeStrip:n&&n.strip,loc:this.locInfo(s)}}const Fn=Object.defineProperty({__proto__:null,SourceLocation:qi,id:Bc,prepareBlock:Fc,prepareMustache:Rc,preparePartialBlock:$c,preparePath:Hc,prepareProgram:Uc,prepareRawBlock:Mc,stripComment:Dc,stripFlags:Ic},Symbol.toStringTag,{value:"Module"});var zi={};for(var Un in Fn)Object.prototype.hasOwnProperty.call(Fn,Un)&&(zi[Un]=Fn[Un]);function Or(t,e){if(t.type==="Program")return t;Lr.yy=zi,Lr.yy.locInfo=function(s){return new qi(e&&e.srcName,s)};var n=Lr.parse(t);return n}function $n(t,e){var n=Or(t,e),s=new Fe(e);return s.accept(n)}const Vc=Object.defineProperty({__proto__:null,Exception:Ye,PrintVisitor:ce,Visitor:It,WhitespaceControl:Fe,parse:$n,parseWithoutProcessing:Or,parser:Lr,print:Oc},Symbol.toStringTag,{value:"Module"});var Vn={Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",amp:"&",AMP:"&",andand:"",And:"",and:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angmsd:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",apacir:"",ap:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",barwed:"",Barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",because:"",Because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxdl:"",boxdL:"",boxDl:"",boxDL:"",boxdr:"",boxdR:"",boxDr:"",boxDR:"",boxh:"",boxH:"",boxhd:"",boxHd:"",boxhD:"",boxHD:"",boxhu:"",boxHu:"",boxhU:"",boxHU:"",boxminus:"",boxplus:"",boxtimes:"",boxul:"",boxuL:"",boxUl:"",boxUL:"",boxur:"",boxuR:"",boxUr:"",boxUR:"",boxv:"",boxV:"",boxvh:"",boxvH:"",boxVh:"",boxVH:"",boxvl:"",boxvL:"",boxVl:"",boxVL:"",boxvr:"",boxvR:"",boxVr:"",boxVR:"",bprime:"",breve:"",Breve:"",brvbar:"",bscr:"",Bscr:"",bsemi:"",bsim:"",bsime:"",bsolb:"",bsol:"\\",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",capand:"",capbrcup:"",capcap:"",cap:"",Cap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",centerdot:"",CenterDot:"",cfr:"",Cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cir:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",colon:":",Colon:"",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",conint:"",Conint:"",ContourIntegral:"",copf:"",Copf:"",coprod:"",Coproduct:"",copy:"",COPY:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",cross:"",Cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",cupbrcap:"",cupcap:"",CupCap:"",cup:"",Cup:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",dagger:"",Dagger:"",daleth:"",darr:"",Darr:"",dArr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",ddagger:"",ddarr:"",DD:"",dd:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",diamond:"",Diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrowBar:"",downarrow:"",DownArrow:"",Downarrow:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVectorBar:"",DownLeftVector:"",DownRightTeeVector:"",DownRightVectorBar:"",DownRightVector:"",DownTeeArrow:"",DownTee:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",Ecirc:"",ecirc:"",ecir:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",edot:"",eDot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp13:"",emsp14:"",emsp:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",escr:"",Escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",exponentiale:"",ExponentialE:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",forall:"",ForAll:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",fscr:"",Fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",ge:"",gE:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",gescc:"",ges:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",gg:"",Gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gla:"",gl:"",glE:"",glj:"",gnap:"",gnapprox:"",gne:"",gnE:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",gtcc:"",gtcir:"",gt:">",GT:">",Gt:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",harrcir:"",harr:"",hArr:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",hfr:"",Hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",hopf:"",Hopf:"",horbar:"",HorizontalLine:"",hscr:"",Hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",ifr:"",Ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",Im:"",imof:"",imped:"",Implies:"",incare:"",in:"",infin:"",infintie:"",inodot:"",intcal:"",int:"",Int:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",iscr:"",Iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",lang:"",Lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",larrb:"",larrbfs:"",larr:"",Larr:"",lArr:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",latail:"",lAtail:"",lat:"",late:"",lates:"",lbarr:"",lBarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",le:"",lE:"",LeftAngleBracket:"",LeftArrowBar:"",leftarrow:"",LeftArrow:"",Leftarrow:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVectorBar:"",LeftDownVector:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",leftrightarrow:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTeeArrow:"",LeftTee:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangleBar:"",LeftTriangle:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVectorBar:"",LeftUpVector:"",LeftVectorBar:"",LeftVector:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",lescc:"",les:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",llarr:"",ll:"",Ll:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoustache:"",lmoust:"",lnap:"",lnapprox:"",lne:"",lnE:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",longleftarrow:"",LongLeftArrow:"",Longleftarrow:"",longleftrightarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longmapsto:"",longrightarrow:"",LongRightArrow:"",Longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",lscr:"",Lscr:"",lsh:"",Lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",ltcc:"",ltcir:"",lt:"<",LT:"<",Lt:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",midast:"*",midcir:"",mid:"",middot:"",minusb:"",minus:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",mscr:"",Mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natural:"",naturals:"",natur:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",nearhk:"",nearr:"",neArr:"",nearrow:"",ne:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nharr:"",nhArr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlarr:"",nlArr:"",nldr:"",nlE:"",nle:"",nleftarrow:"",nLeftarrow:"",nleftrightarrow:"",nLeftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",nopf:"",Nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangleBar:"",NotLeftTriangle:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangleBar:"",NotRightTriangle:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",nparallel:"",npar:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",nprec:"",npreceq:"",npre:"",nrarrc:"",nrarr:"",nrArr:"",nrarrw:"",nrightarrow:"",nRightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nvdash:"",nvDash:"",nVdash:"",nVDash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwarr:"",nwArr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",Ocirc:"",ocirc:"",ocir:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",orarr:"",Or:"",or:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",otimesas:"",Otimes:"",otimes:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",para:"",parallel:"",par:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plusacir:"",plusb:"",pluscir:"",plus:"+",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",popf:"",Popf:"",pound:"",prap:"",Pr:"",pr:"",prcue:"",precapprox:"",prec:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",pre:"",prE:"",precsim:"",prime:"",Prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportional:"",Proportion:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",qopf:"",Qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",quot:'"',QUOT:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",rang:"",Rang:"",rangd:"",range:"",rangle:"",raquo:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarr:"",Rarr:"",rArr:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",ratail:"",rAtail:"",ratio:"",rationals:"",rbarr:"",rBarr:"",RBarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",real:"",realine:"",realpart:"",reals:"",Re:"",rect:"",reg:"",REG:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",rfr:"",Rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrowBar:"",rightarrow:"",RightArrow:"",Rightarrow:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVectorBar:"",RightDownVector:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTeeArrow:"",RightTee:"",RightTeeVector:"",rightthreetimes:"",RightTriangleBar:"",RightTriangle:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVectorBar:"",RightUpVector:"",RightVectorBar:"",RightVector:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoustache:"",rmoust:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",ropf:"",Ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",rscr:"",Rscr:"",rsh:"",Rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",scap:"",Scaron:"",scaron:"",Sc:"",sc:"",sccue:"",sce:"",scE:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdotb:"",sdot:"",sdote:"",searhk:"",searr:"",seArr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",solbar:"",solb:"",sol:"/",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",square:"",Square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squ:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",sub:"",Sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",subset:"",Subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succapprox:"",succ:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",sum:"",Sum:"",sung:"",sup1:"",sup2:"",sup3:"",sup:"",Sup:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",supset:"",Supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swarr:"",swArr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",therefore:"",Therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",ThinSpace:"",thinsp:"",thkap:"",thksim:"",THORN:"",thorn:"",tilde:"",Tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",timesbar:"",timesb:"",times:"",timesd:"",tint:"",toea:"",topbot:"",topcir:"",top:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",trade:"",TRADE:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",uarr:"",Uarr:"",uArr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrowBar:"",uparrow:"",UpArrow:"",Uparrow:"",UpArrowDownArrow:"",updownarrow:"",UpDownArrow:"",Updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",upsi:"",Upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTeeArrow:"",UpTee:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",varr:"",vArr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",vBar:"",Vbar:"",vBarv:"",Vcy:"",vcy:"",vdash:"",vDash:"",Vdash:"",VDash:"",Vdashl:"",veebar:"",vee:"",Vee:"",veeeq:"",vellip:"",verbar:"|",Verbar:"",vert:"|",Vert:"",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",wedge:"",Wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xharr:"",xhArr:"",Xi:"",xi:"",xlarr:"",xlArr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrarr:"",xrArr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",yuml:"",Yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",zfr:"",Zfr:"",ZHcy:"",zhcy:"",zigrarr:"",zopf:"",Zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""},jc=/^#[xX]([A-Fa-f0-9]+)$/,Gc=/^#([0-9]+)$/,qc=/^([A-Za-z0-9]+)$/,Br=function(){function t(e){this.named=e}return t.prototype.parse=function(e){if(e){var n=e.match(jc);if(n)return String.fromCharCode(parseInt(n[1],16));if(n=e.match(Gc),n)return String.fromCharCode(parseInt(n[1],10));if(n=e.match(qc),n)return this.named[n[1]]}},t}(),zc=/[\t\n\f ]/,Wc=/[A-Za-z]/,Kc=/\r\n?/g;function ve(t){return zc.test(t)}function Wi(t){return Wc.test(t)}function Jc(t){return t.replace(Kc,`
`)}var jn=function(){function t(e,n,s){s===void 0&&(s="precompile"),this.delegate=e,this.entityParser=n,this.mode=s,this.state="beforeData",this.line=-1,this.column=-1,this.input="",this.index=-1,this.tagNameBuffer="",this.states={beforeData:function(){var i=this.peek();if(i==="<"&&!this.isIgnoredEndTag())this.transitionTo("tagOpen"),this.markTagStart(),this.consume();else{if(this.mode==="precompile"&&i===`
`){var l=this.tagNameBuffer.toLowerCase();(l==="pre"||l==="textarea")&&this.consume()}this.transitionTo("data"),this.delegate.beginData()}},data:function(){var i=this.peek(),l=this.tagNameBuffer;i==="<"&&!this.isIgnoredEndTag()?(this.delegate.finishData(),this.transitionTo("tagOpen"),this.markTagStart(),this.consume()):i==="&"&&l!=="script"&&l!=="style"?(this.consume(),this.delegate.appendToData(this.consumeCharRef()||"&")):(this.consume(),this.delegate.appendToData(i))},tagOpen:function(){var i=this.consume();i==="!"?this.transitionTo("markupDeclarationOpen"):i==="/"?this.transitionTo("endTagOpen"):(i==="@"||i===":"||Wi(i))&&(this.transitionTo("tagName"),this.tagNameBuffer="",this.delegate.beginStartTag(),this.appendToTagName(i))},markupDeclarationOpen:function(){var i=this.consume();if(i==="-"&&this.peek()==="-")this.consume(),this.transitionTo("commentStart"),this.delegate.beginComment();else{var l=i.toUpperCase()+this.input.substring(this.index,this.index+6).toUpperCase();l==="DOCTYPE"&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.transitionTo("doctype"),this.delegate.beginDoctype&&this.delegate.beginDoctype())}},doctype:function(){var i=this.consume();ve(i)&&this.transitionTo("beforeDoctypeName")},beforeDoctypeName:function(){var i=this.consume();ve(i)||(this.transitionTo("doctypeName"),this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(i.toLowerCase()))},doctypeName:function(){var i=this.consume();ve(i)?this.transitionTo("afterDoctypeName"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeName&&this.delegate.appendToDoctypeName(i.toLowerCase())},afterDoctypeName:function(){var i=this.consume();if(!ve(i))if(i===">")this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData");else{var l=i.toUpperCase()+this.input.substring(this.index,this.index+5).toUpperCase(),u=l.toUpperCase()==="PUBLIC",p=l.toUpperCase()==="SYSTEM";(u||p)&&(this.consume(),this.consume(),this.consume(),this.consume(),this.consume(),this.consume()),u?this.transitionTo("afterDoctypePublicKeyword"):p&&this.transitionTo("afterDoctypeSystemKeyword")}},afterDoctypePublicKeyword:function(){var i=this.peek();ve(i)?(this.transitionTo("beforeDoctypePublicIdentifier"),this.consume()):i==='"'?(this.transitionTo("doctypePublicIdentifierDoubleQuoted"),this.consume()):i==="'"?(this.transitionTo("doctypePublicIdentifierSingleQuoted"),this.consume()):i===">"&&(this.consume(),this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},doctypePublicIdentifierDoubleQuoted:function(){var i=this.consume();i==='"'?this.transitionTo("afterDoctypePublicIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(i)},doctypePublicIdentifierSingleQuoted:function(){var i=this.consume();i==="'"?this.transitionTo("afterDoctypePublicIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypePublicIdentifier&&this.delegate.appendToDoctypePublicIdentifier(i)},afterDoctypePublicIdentifier:function(){var i=this.consume();ve(i)?this.transitionTo("betweenDoctypePublicAndSystemIdentifiers"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):i==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):i==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted")},betweenDoctypePublicAndSystemIdentifiers:function(){var i=this.consume();ve(i)||(i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):i==='"'?this.transitionTo("doctypeSystemIdentifierDoubleQuoted"):i==="'"&&this.transitionTo("doctypeSystemIdentifierSingleQuoted"))},doctypeSystemIdentifierDoubleQuoted:function(){var i=this.consume();i==='"'?this.transitionTo("afterDoctypeSystemIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(i)},doctypeSystemIdentifierSingleQuoted:function(){var i=this.consume();i==="'"?this.transitionTo("afterDoctypeSystemIdentifier"):i===">"?(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData")):this.delegate.appendToDoctypeSystemIdentifier&&this.delegate.appendToDoctypeSystemIdentifier(i)},afterDoctypeSystemIdentifier:function(){var i=this.consume();ve(i)||i===">"&&(this.delegate.endDoctype&&this.delegate.endDoctype(),this.transitionTo("beforeData"))},commentStart:function(){var i=this.consume();i==="-"?this.transitionTo("commentStartDash"):i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData(i),this.transitionTo("comment"))},commentStartDash:function(){var i=this.consume();i==="-"?this.transitionTo("commentEnd"):i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("-"),this.transitionTo("comment"))},comment:function(){var i=this.consume();i==="-"?this.transitionTo("commentEndDash"):this.delegate.appendToCommentData(i)},commentEndDash:function(){var i=this.consume();i==="-"?this.transitionTo("commentEnd"):(this.delegate.appendToCommentData("-"+i),this.transitionTo("comment"))},commentEnd:function(){var i=this.consume();i===">"?(this.delegate.finishComment(),this.transitionTo("beforeData")):(this.delegate.appendToCommentData("--"+i),this.transitionTo("comment"))},tagName:function(){var i=this.consume();ve(i)?this.transitionTo("beforeAttributeName"):i==="/"?this.transitionTo("selfClosingStartTag"):i===">"?(this.delegate.finishTag(),this.transitionTo("beforeData")):this.appendToTagName(i)},endTagName:function(){var i=this.consume();ve(i)?(this.transitionTo("beforeAttributeName"),this.tagNameBuffer=""):i==="/"?(this.transitionTo("selfClosingStartTag"),this.tagNameBuffer=""):i===">"?(this.delegate.finishTag(),this.transitionTo("beforeData"),this.tagNameBuffer=""):this.appendToTagName(i)},beforeAttributeName:function(){var i=this.peek();if(ve(i)){this.consume();return}else i==="/"?(this.transitionTo("selfClosingStartTag"),this.consume()):i===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):i==="="?(this.delegate.reportSyntaxError("attribute name cannot start with equals sign"),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(i)):(this.transitionTo("attributeName"),this.delegate.beginAttribute())},attributeName:function(){var i=this.peek();ve(i)?(this.transitionTo("afterAttributeName"),this.consume()):i==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="="?(this.transitionTo("beforeAttributeValue"),this.consume()):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):i==='"'||i==="'"||i==="<"?(this.delegate.reportSyntaxError(i+" is not a valid character within attribute names"),this.consume(),this.delegate.appendToAttributeName(i)):(this.consume(),this.delegate.appendToAttributeName(i))},afterAttributeName:function(){var i=this.peek();if(ve(i)){this.consume();return}else i==="/"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="="?(this.consume(),this.transitionTo("beforeAttributeValue")):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.transitionTo("attributeName"),this.delegate.beginAttribute(),this.consume(),this.delegate.appendToAttributeName(i))},beforeAttributeValue:function(){var i=this.peek();ve(i)?this.consume():i==='"'?(this.transitionTo("attributeValueDoubleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):i==="'"?(this.transitionTo("attributeValueSingleQuoted"),this.delegate.beginAttributeValue(!0),this.consume()):i===">"?(this.delegate.beginAttributeValue(!1),this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.transitionTo("attributeValueUnquoted"),this.delegate.beginAttributeValue(!1),this.consume(),this.delegate.appendToAttributeValue(i))},attributeValueDoubleQuoted:function(){var i=this.consume();i==='"'?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):i==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(i)},attributeValueSingleQuoted:function(){var i=this.consume();i==="'"?(this.delegate.finishAttributeValue(),this.transitionTo("afterAttributeValueQuoted")):i==="&"?this.delegate.appendToAttributeValue(this.consumeCharRef()||"&"):this.delegate.appendToAttributeValue(i)},attributeValueUnquoted:function(){var i=this.peek();ve(i)?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("beforeAttributeName")):i==="/"?(this.delegate.finishAttributeValue(),this.consume(),this.transitionTo("selfClosingStartTag")):i==="&"?(this.consume(),this.delegate.appendToAttributeValue(this.consumeCharRef()||"&")):i===">"?(this.delegate.finishAttributeValue(),this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):(this.consume(),this.delegate.appendToAttributeValue(i))},afterAttributeValueQuoted:function(){var i=this.peek();ve(i)?(this.consume(),this.transitionTo("beforeAttributeName")):i==="/"?(this.consume(),this.transitionTo("selfClosingStartTag")):i===">"?(this.consume(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},selfClosingStartTag:function(){var i=this.peek();i===">"?(this.consume(),this.delegate.markTagAsSelfClosing(),this.delegate.finishTag(),this.transitionTo("beforeData")):this.transitionTo("beforeAttributeName")},endTagOpen:function(){var i=this.consume();(i==="@"||i===":"||Wi(i))&&(this.transitionTo("endTagName"),this.tagNameBuffer="",this.delegate.beginEndTag(),this.appendToTagName(i))}},this.reset()}return t.prototype.reset=function(){this.transitionTo("beforeData"),this.input="",this.tagNameBuffer="",this.index=0,this.line=1,this.column=0,this.delegate.reset()},t.prototype.transitionTo=function(e){this.state=e},t.prototype.tokenize=function(e){this.reset(),this.tokenizePart(e),this.tokenizeEOF()},t.prototype.tokenizePart=function(e){for(this.input+=Jc(e);this.index<this.input.length;){var n=this.states[this.state];if(n!==void 0)n.call(this);else throw new Error("unhandled state "+this.state)}},t.prototype.tokenizeEOF=function(){this.flushData()},t.prototype.flushData=function(){this.state==="data"&&(this.delegate.finishData(),this.transitionTo("beforeData"))},t.prototype.peek=function(){return this.input.charAt(this.index)},t.prototype.consume=function(){var e=this.peek();return this.index++,e===`
`?(this.line++,this.column=0):this.column++,e},t.prototype.consumeCharRef=function(){var e=this.input.indexOf(";",this.index);if(e!==-1){var n=this.input.slice(this.index,e),s=this.entityParser.parse(n);if(s){for(var i=n.length;i;)this.consume(),i--;return this.consume(),s}}},t.prototype.markTagStart=function(){this.delegate.tagOpen()},t.prototype.appendToTagName=function(e){this.tagNameBuffer+=e,this.delegate.appendToTagName(e)},t.prototype.isIgnoredEndTag=function(){var e=this.tagNameBuffer;return e==="title"&&this.input.substring(this.index,this.index+8)!=="</title>"||e==="style"&&this.input.substring(this.index,this.index+8)!=="</style>"||e==="script"&&this.input.substring(this.index,this.index+9)!=="<\/script>"},t}(),Ki=function(){function t(e,n){n===void 0&&(n={}),this.options=n,this.token=null,this.startLine=1,this.startColumn=0,this.tokens=[],this.tokenizer=new jn(this,e,n.mode),this._currentAttribute=void 0}return t.prototype.tokenize=function(e){return this.tokens=[],this.tokenizer.tokenize(e),this.tokens},t.prototype.tokenizePart=function(e){return this.tokens=[],this.tokenizer.tokenizePart(e),this.tokens},t.prototype.tokenizeEOF=function(){return this.tokens=[],this.tokenizer.tokenizeEOF(),this.tokens[0]},t.prototype.reset=function(){this.token=null,this.startLine=1,this.startColumn=0},t.prototype.current=function(){var e=this.token;if(e===null)throw new Error("token was unexpectedly null");if(arguments.length===0)return e;for(var n=0;n<arguments.length;n++)if(e.type===arguments[n])return e;throw new Error("token type was unexpectedly "+e.type)},t.prototype.push=function(e){this.token=e,this.tokens.push(e)},t.prototype.currentAttribute=function(){return this._currentAttribute},t.prototype.addLocInfo=function(){this.options.loc&&(this.current().loc={start:{line:this.startLine,column:this.startColumn},end:{line:this.tokenizer.line,column:this.tokenizer.column}}),this.startLine=this.tokenizer.line,this.startColumn=this.tokenizer.column},t.prototype.beginDoctype=function(){this.push({type:"Doctype",name:""})},t.prototype.appendToDoctypeName=function(e){this.current("Doctype").name+=e},t.prototype.appendToDoctypePublicIdentifier=function(e){var n=this.current("Doctype");n.publicIdentifier===void 0?n.publicIdentifier=e:n.publicIdentifier+=e},t.prototype.appendToDoctypeSystemIdentifier=function(e){var n=this.current("Doctype");n.systemIdentifier===void 0?n.systemIdentifier=e:n.systemIdentifier+=e},t.prototype.endDoctype=function(){this.addLocInfo()},t.prototype.beginData=function(){this.push({type:"Chars",chars:""})},t.prototype.appendToData=function(e){this.current("Chars").chars+=e},t.prototype.finishData=function(){this.addLocInfo()},t.prototype.beginComment=function(){this.push({type:"Comment",chars:""})},t.prototype.appendToCommentData=function(e){this.current("Comment").chars+=e},t.prototype.finishComment=function(){this.addLocInfo()},t.prototype.tagOpen=function(){},t.prototype.beginStartTag=function(){this.push({type:"StartTag",tagName:"",attributes:[],selfClosing:!1})},t.prototype.beginEndTag=function(){this.push({type:"EndTag",tagName:""})},t.prototype.finishTag=function(){this.addLocInfo()},t.prototype.markTagAsSelfClosing=function(){this.current("StartTag").selfClosing=!0},t.prototype.appendToTagName=function(e){this.current("StartTag","EndTag").tagName+=e},t.prototype.beginAttribute=function(){this._currentAttribute=["","",!1]},t.prototype.appendToAttributeName=function(e){this.currentAttribute()[0]+=e},t.prototype.beginAttributeValue=function(e){this.currentAttribute()[2]=e},t.prototype.appendToAttributeValue=function(e){this.currentAttribute()[1]+=e},t.prototype.finishAttributeValue=function(){this.current("StartTag").attributes.push(this._currentAttribute)},t.prototype.reportSyntaxError=function(e){this.current().syntaxError=e},t}();function Yc(t,e){var n=new Ki(new Br(Vn),e);return n.tokenize(t)}const Xc=Object.defineProperty({__proto__:null,EntityParser:Br,EventedTokenizer:jn,HTML5NamedCharRefs:Vn,Tokenizer:Ki,tokenize:Yc},Symbol.toStringTag,{value:"Module"});var ct=function(t){return t[t.NBSP=160]="NBSP",t[t.QUOT=34]="QUOT",t[t.LT=60]="LT",t[t.GT=62]="GT",t[t.AMP=38]="AMP",t}(ct||{});const Ji=/["&\xA0]/u,Qc=new RegExp(Ji.source,"gu"),Yi=/[&<>\xA0]/u,Zc=new RegExp(Yi.source,"gu");function eu(t){switch(t.charCodeAt(0)){case ct.NBSP:return"&nbsp;";case ct.QUOT:return"&quot;";case ct.AMP:return"&amp;";default:return t}}function tu(t){switch(t.charCodeAt(0)){case ct.NBSP:return"&nbsp;";case ct.AMP:return"&amp;";case ct.LT:return"&lt;";case ct.GT:return"&gt;";default:return t}}function Xi(t,e){return t.loc.isInvisible||e.loc.isInvisible?0:t.loc.startPosition.line<e.loc.startPosition.line||t.loc.startPosition.line===e.loc.startPosition.line&&t.loc.startPosition.column<e.loc.startPosition.column?-1:t.loc.startPosition.line===e.loc.startPosition.line&&t.loc.startPosition.column===e.loc.startPosition.column?0:1}const Ir=new Set(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]);function ru(){return[...Ir]}const nu=/^\S/u;function Gn(t){return Ir.has(t.toLowerCase())&&t[0]?.toLowerCase()===t[0]}class qn{buffer="";options;constructor(e){this.options=e}handledByOverride(e,n=!1){if(this.options.override!==void 0){let s=this.options.override(e,this.options);if(typeof s=="string")return n&&nu.test(s)&&(s=` ${s}`),this.buffer+=s,!0}return!1}Node(e){switch(e.type){case"MustacheStatement":case"BlockStatement":case"MustacheCommentStatement":case"CommentStatement":case"TextNode":case"ElementNode":case"AttrNode":case"Block":case"Template":return this.TopLevelStatement(e);case"StringLiteral":case"BooleanLiteral":case"NumberLiteral":case"UndefinedLiteral":case"NullLiteral":case"PathExpression":case"SubExpression":return this.Expression(e);case"ConcatStatement":return this.ConcatStatement(e);case"Hash":return this.Hash(e);case"HashPair":return this.HashPair(e);case"ElementModifierStatement":return this.ElementModifierStatement(e)}}Expression(e){switch(e.type){case"StringLiteral":case"BooleanLiteral":case"NumberLiteral":case"UndefinedLiteral":case"NullLiteral":return this.Literal(e);case"PathExpression":return this.PathExpression(e);case"SubExpression":return this.SubExpression(e)}}Literal(e){switch(e.type){case"StringLiteral":return this.StringLiteral(e);case"BooleanLiteral":return this.BooleanLiteral(e);case"NumberLiteral":return this.NumberLiteral(e);case"UndefinedLiteral":return this.UndefinedLiteral(e);case"NullLiteral":return this.NullLiteral(e)}}TopLevelStatement(e){switch(e.type){case"MustacheStatement":return this.MustacheStatement(e);case"BlockStatement":return this.BlockStatement(e);case"MustacheCommentStatement":return this.MustacheCommentStatement(e);case"CommentStatement":return this.CommentStatement(e);case"TextNode":return this.TextNode(e);case"ElementNode":return this.ElementNode(e);case"Block":return this.Block(e);case"Template":return this.Template(e);case"AttrNode":return this.AttrNode(e)}}Template(e){this.TopLevelStatements(e.body)}Block(e){e.chained&&(e.body[0].chained=!0),this.handledByOverride(e)||this.TopLevelStatements(e.body)}TopLevelStatements(e){e.forEach(n=>this.TopLevelStatement(n))}ElementNode(e){this.handledByOverride(e)||(this.OpenElementNode(e),this.TopLevelStatements(e.children),this.CloseElementNode(e))}OpenElementNode(e){this.buffer+=`<${e.tag}`;const n=[...e.attributes,...e.modifiers,...e.comments].sort(Xi);for(const s of n)switch(this.buffer+=" ",s.type){case"AttrNode":this.AttrNode(s);break;case"ElementModifierStatement":this.ElementModifierStatement(s);break;case"MustacheCommentStatement":this.MustacheCommentStatement(s)}e.blockParams.length&&this.BlockParams(e.blockParams),e.selfClosing&&(this.buffer+=" /"),this.buffer+=">"}CloseElementNode(e){e.selfClosing||Gn(e.tag)||(this.buffer+=`</${e.tag}>`)}AttrNode(e){if(this.handledByOverride(e))return;let{name:n,value:s}=e;this.buffer+=n,(s.type!=="TextNode"||s.chars.length>0)&&(this.buffer+="=",this.AttrNodeValue(s))}AttrNodeValue(e){e.type==="TextNode"?(this.buffer+='"',this.TextNode(e,!0),this.buffer+='"'):this.Node(e)}TextNode(e,n){var s;this.handledByOverride(e)||(this.options.entityEncoding==="raw"?this.buffer+=e.chars:this.buffer+=n?(s=e.chars,Ji.test(s)?s.replace(Qc,eu):s):function(i){return Yi.test(i)?i.replace(Zc,tu):i}(e.chars))}MustacheStatement(e){this.handledByOverride(e)||(this.buffer+=e.trusting?"{{{":"{{",e.strip.open&&(this.buffer+="~"),this.Expression(e.path),this.Params(e.params),this.Hash(e.hash),e.strip.close&&(this.buffer+="~"),this.buffer+=e.trusting?"}}}":"}}")}BlockStatement(e){this.handledByOverride(e)||(e.chained?(this.buffer+=e.inverseStrip.open?"{{~":"{{",this.buffer+="else "):this.buffer+=e.openStrip.open?"{{~#":"{{#",this.Expression(e.path),this.Params(e.params),this.Hash(e.hash),e.program.blockParams.length&&this.BlockParams(e.program.blockParams),e.chained?this.buffer+=e.inverseStrip.close?"~}}":"}}":this.buffer+=e.openStrip.close?"~}}":"}}",this.Block(e.program),e.inverse&&(e.inverse.chained||(this.buffer+=e.inverseStrip.open?"{{~":"{{",this.buffer+="else",this.buffer+=e.inverseStrip.close?"~}}":"}}"),this.Block(e.inverse)),e.chained||(this.buffer+=e.closeStrip.open?"{{~/":"{{/",this.Expression(e.path),this.buffer+=e.closeStrip.close?"~}}":"}}"))}BlockParams(e){this.buffer+=` as |${e.join(" ")}|`}ConcatStatement(e){this.handledByOverride(e)||(this.buffer+='"',e.parts.forEach(n=>{n.type==="TextNode"?this.TextNode(n,!0):this.Node(n)}),this.buffer+='"')}MustacheCommentStatement(e){this.handledByOverride(e)||(this.buffer+=`{{!--${e.value}--}}`)}ElementModifierStatement(e){this.handledByOverride(e)||(this.buffer+="{{",this.Expression(e.path),this.Params(e.params),this.Hash(e.hash),this.buffer+="}}")}CommentStatement(e){this.handledByOverride(e)||(this.buffer+=`<!--${e.value}-->`)}PathExpression(e){this.handledByOverride(e)||(this.buffer+=e.original)}SubExpression(e){this.handledByOverride(e)||(this.buffer+="(",this.Expression(e.path),this.Params(e.params),this.Hash(e.hash),this.buffer+=")")}Params(e){e.length&&e.forEach(n=>{this.buffer+=" ",this.Expression(n)})}Hash(e){this.handledByOverride(e,!0)||e.pairs.forEach(n=>{this.buffer+=" ",this.HashPair(n)})}HashPair(e){this.handledByOverride(e)||(this.buffer+=e.key,this.buffer+="=",this.Node(e.value))}StringLiteral(e){this.handledByOverride(e)||(this.buffer+=JSON.stringify(e.value))}BooleanLiteral(e){this.handledByOverride(e)||(this.buffer+=e.value)}NumberLiteral(e){this.handledByOverride(e)||(this.buffer+=e.value)}UndefinedLiteral(e){this.handledByOverride(e)||(this.buffer+="undefined")}NullLiteral(e){this.handledByOverride(e)||(this.buffer+="null")}print(e){let{options:n}=this;if(n.override){let s=n.override(e,n);if(s!==void 0)return s}return this.buffer="",this.Node(e),this.buffer}}function Dt(t,e={entityEncoding:"transformed"}){return t?new qn(e).print(t):""}function zn(t,e){return t in ir&&(e===void 0||ir[t].includes(e))}const ir={action:["Call","Modifier"],component:["Call","Append","Block"],debugger:["Append"],"each-in":["Block"],each:["Block"],"has-block-params":["Call","Append"],"has-block":["Call","Append"],helper:["Call","Append"],if:["Call","Append","Block"],"in-element":["Block"],let:["Block"],log:["Call","Append"],modifier:["Call","Modifier"],mount:["Append"],mut:["Call","Append"],outlet:["Append"],readonly:["Call","Append"],unbound:["Call","Append"],unless:["Call","Append","Block"],yield:["Append"]},Xe=Object.freeze({line:1,column:0}),Qi=Object.freeze({source:"(synthetic)",start:Xe,end:Xe}),Ht=Object.freeze({source:"(nonexistent)",start:Xe,end:Xe}),ut=Object.freeze({source:"(broken)",start:Xe,end:Xe});let G=function(t){return t.CharPosition="CharPosition",t.HbsPosition="HbsPosition",t.InternalsSynthetic="InternalsSynthetic",t.NonExistent="NonExistent",t.Broken="Broken",t}({});class su{_whens;constructor(e){this._whens=e}first(e){for(const n of this._whens){const s=n.match(e);if(ae(s))return s[0]}return null}}class Zi{_map=new Map;get(e,n){let s=this._map.get(e);return s||(s=n(),this._map.set(e,s),s)}add(e,n){this._map.set(e,n)}match(e){const n=function(u){switch(u){case G.Broken:case G.InternalsSynthetic:case G.NonExistent:return"IS_INVISIBLE";default:return u}}(e),s=[],i=this._map.get(n),l=this._map.get("MATCH_ANY");return i&&s.push(i),l&&s.push(l),s}}function ea(t){return t(new iu).check()}class iu{_whens=new Zi;check(){return(e,n)=>this.matchFor(e.kind,n.kind)(e,n)}matchFor(e,n){const s=this._whens.match(e);U(ae(s),`no match defined for (${e}, ${n}) and no AnyMatch defined either`);const i=new su(s).first(n);return U(i!==null,`no match defined for (${e}, ${n}) and no AnyMatch defined either`),i}when(e,n,s){return this._whens.get(e,()=>new Zi).add(n,s),this}}class ke{static synthetic(e){let n=oe.synthetic(e);return new ke({loc:n,chars:e})}static load(e,n){return new ke({loc:oe.load(e,n[1]),chars:n[0]})}chars;loc;constructor(e){this.loc=e.loc,this.chars=e.chars}getString(){return this.chars}serialize(){return[this.chars,this.loc.serialize()]}}class oe{static get NON_EXISTENT(){return new kt(G.NonExistent,Ht).wrap()}static load(e,n){return typeof n=="number"?oe.forCharPositions(e,n,n):typeof n=="string"?oe.synthetic(n):Array.isArray(n)?oe.forCharPositions(e,n[0],n[1]):n===G.NonExistent?oe.NON_EXISTENT:n===G.Broken?oe.broken(ut):void je(n)}static forHbsLoc(e,n){const s=new Rt(e,n.start),i=new Rt(e,n.end);return new Kn(e,{start:s,end:i},n).wrap()}static forCharPositions(e,n,s){const i=new ar(e,n),l=new ar(e,s);return new Wn(e,{start:i,end:l}).wrap()}static synthetic(e){return new kt(G.InternalsSynthetic,Ht,e).wrap()}static broken(e=ut){return new kt(G.Broken,e).wrap()}isInvisible;constructor(e){this.data=e,this.isInvisible=e.kind!==G.CharPosition&&e.kind!==G.HbsPosition}getStart(){return this.data.getStart().wrap()}getEnd(){return this.data.getEnd().wrap()}get loc(){const e=this.data.toHbsSpan();return e===null?ut:e.toHbsLoc()}get module(){return this.data.getModule()}get startPosition(){return this.loc.start}get endPosition(){return this.loc.end}toJSON(){return this.loc}withStart(e){return Ge(e.data,this.data.getEnd())}withEnd(e){return Ge(this.data.getStart(),e.data)}asString(){return this.data.asString()}toSlice(e){const n=this.data.asString();return e!==void 0&&n!==e&&console.warn(`unexpectedly found ${JSON.stringify(n)} when slicing source, but expected ${JSON.stringify(e)}`),new ke({loc:this,chars:e||n})}get start(){return this.loc.start}set start(e){this.data.locDidUpdate({start:e})}get end(){return this.loc.end}set end(e){this.data.locDidUpdate({end:e})}get source(){return this.module}collapse(e){switch(e){case"start":return this.getStart().collapsed();case"end":return this.getEnd().collapsed()}}extend(e){return Ge(this.data.getStart(),e.data.getEnd())}serialize(){return this.data.serialize()}slice({skipStart:e=0,skipEnd:n=0}){return Ge(this.getStart().move(e).data,this.getEnd().move(-n).data)}sliceStartChars({skipStart:e=0,chars:n}){return Ge(this.getStart().move(e).data,this.getStart().move(e+n).data)}sliceEndChars({skipEnd:e=0,chars:n}){return Ge(this.getEnd().move(e-n).data,this.getStart().move(-e).data)}}class Wn{kind=G.CharPosition;_locPosSpan=null;constructor(e,n){this.source=e,this.charPositions=n}wrap(){return new oe(this)}asString(){return this.source.slice(this.charPositions.start.charPos,this.charPositions.end.charPos)}getModule(){return this.source.module}getStart(){return this.charPositions.start}getEnd(){return this.charPositions.end}locDidUpdate(){}toHbsSpan(){let e=this._locPosSpan;if(e===null){const n=this.charPositions.start.toHbsPos(),s=this.charPositions.end.toHbsPos();e=this._locPosSpan=n===null||s===null?ht:new Kn(this.source,{start:n,end:s})}return e===ht?null:e}serialize(){const{start:{charPos:e},end:{charPos:n}}=this.charPositions;return e===n?e:[e,n]}toCharPosSpan(){return this}}class Kn{kind=G.HbsPosition;_charPosSpan=null;_providedHbsLoc;constructor(e,n,s=null){this.source=e,this.hbsPositions=n,this._providedHbsLoc=s}serialize(){const e=this.toCharPosSpan();return e===null?G.Broken:e.wrap().serialize()}wrap(){return new oe(this)}updateProvided(e,n){this._providedHbsLoc&&(this._providedHbsLoc[n]=e),this._charPosSpan=null,this._providedHbsLoc={start:e,end:e}}locDidUpdate({start:e,end:n}){e!==void 0&&(this.updateProvided(e,"start"),this.hbsPositions.start=new Rt(this.source,e,null)),n!==void 0&&(this.updateProvided(n,"end"),this.hbsPositions.end=new Rt(this.source,n,null))}asString(){const e=this.toCharPosSpan();return e===null?"":e.asString()}getModule(){return this.source.module}getStart(){return this.hbsPositions.start}getEnd(){return this.hbsPositions.end}toHbsLoc(){return{start:this.hbsPositions.start.hbsPos,end:this.hbsPositions.end.hbsPos}}toHbsSpan(){return this}toCharPosSpan(){let e=this._charPosSpan;if(e===null){const n=this.hbsPositions.start.toCharPos(),s=this.hbsPositions.end.toCharPos();if(!n||!s)return e=this._charPosSpan=ht,null;e=this._charPosSpan=new Wn(this.source,{start:n,end:s})}return e===ht?null:e}}class kt{constructor(e,n,s=null){this.kind=e,this.loc=n,this.string=s}serialize(){switch(this.kind){case G.Broken:case G.NonExistent:return this.kind;case G.InternalsSynthetic:return this.string||""}}wrap(){return new oe(this)}asString(){return this.string||""}locDidUpdate({start:e,end:n}){e!==void 0&&(this.loc.start=e),n!==void 0&&(this.loc.end=n)}getModule(){return"an unknown module"}getStart(){return new Jn(this.kind,this.loc.start)}getEnd(){return new Jn(this.kind,this.loc.end)}toCharPosSpan(){return this}toHbsSpan(){return null}toHbsLoc(){return ut}}const Ge=ea(t=>t.when(G.HbsPosition,G.HbsPosition,(e,n)=>new Kn(e.source,{start:e,end:n}).wrap()).when(G.CharPosition,G.CharPosition,(e,n)=>new Wn(e.source,{start:e,end:n}).wrap()).when(G.CharPosition,G.HbsPosition,(e,n)=>{const s=n.toCharPos();return s===null?new kt(G.Broken,ut).wrap():Ge(e,s)}).when(G.HbsPosition,G.CharPosition,(e,n)=>{const s=e.toCharPos();return s===null?new kt(G.Broken,ut).wrap():Ge(s,n)}).when("IS_INVISIBLE","MATCH_ANY",e=>new kt(e.kind,ut).wrap()).when("MATCH_ANY","IS_INVISIBLE",(e,n)=>new kt(n.kind,ut).wrap())),ht="BROKEN";class pt{static forHbsPos(e,n){return new Rt(e,n,null).wrap()}static broken(e=Xe){return new Jn(G.Broken,e).wrap()}constructor(e){this.data=e}get offset(){const e=this.data.toCharPos();return e===null?null:e.offset}eql(e){return au(this.data,e.data)}until(e){return Ge(this.data,e.data)}move(e){const n=this.data.toCharPos();if(n===null)return pt.broken();{const s=n.offset+e;return n.source.check(s)?new ar(n.source,s).wrap():pt.broken()}}collapsed(){return Ge(this.data,this.data)}toJSON(){return this.data.toJSON()}}class ar{kind=G.CharPosition;_locPos=null;constructor(e,n){this.source=e,this.charPos=n}toCharPos(){return this}toJSON(){const e=this.toHbsPos();return e===null?Xe:e.toJSON()}wrap(){return new pt(this)}get offset(){return this.charPos}toHbsPos(){let e=this._locPos;if(e===null){const n=this.source.hbsPosFor(this.charPos);this._locPos=e=n===null?ht:new Rt(this.source,n,this.charPos)}return e===ht?null:e}}class Rt{kind=G.HbsPosition;_charPos;constructor(e,n,s=null){this.source=e,this.hbsPos=n,this._charPos=s===null?null:new ar(e,s)}toCharPos(){let e=this._charPos;if(e===null){const n=this.source.charPosFor(this.hbsPos);this._charPos=e=n===null?ht:new ar(this.source,n)}return e===ht?null:e}toJSON(){return this.hbsPos}wrap(){return new pt(this)}toHbsPos(){return this}}class Jn{constructor(e,n){this.kind=e,this.pos=n}toCharPos(){return null}toJSON(){return this.pos}wrap(){return new pt(this)}get offset(){return null}}const au=ea(t=>t.when(G.HbsPosition,G.HbsPosition,({hbsPos:e},{hbsPos:n})=>e.column===n.column&&e.line===n.line).when(G.CharPosition,G.CharPosition,({charPos:e},{charPos:n})=>e===n).when(G.CharPosition,G.HbsPosition,({offset:e},n)=>e===n.toCharPos()?.offset).when(G.HbsPosition,G.CharPosition,(e,{offset:n})=>e.toCharPos()?.offset===n).when("MATCH_ANY","MATCH_ANY",()=>!1));class dt{static from(e,n={}){return new dt(e,n.meta?.moduleName)}constructor(e,n="an unknown module"){this.source=e,this.module=n}check(e){return e>=0&&e<=this.source.length}slice(e,n){return this.source.slice(e,n)}offsetFor(e,n){return pt.forHbsPos(this,{line:e,column:n})}spanFor({start:e,end:n}){return oe.forHbsLoc(this,{start:{line:e.line,column:e.column},end:{line:n.line,column:n.column}})}hbsPosFor(e){let n=0,s=0;if(e>this.source.length)return null;for(;;){let i=this.source.indexOf(`
`,s);if(e<=i||i===-1)return{line:n+1,column:e-s};n+=1,s=i+1}}charPosFor(e){let{line:n,column:s}=e,i=this.source.length,l=0,u=0;for(;u<i;){let p=this.source.indexOf(`
`,u);if(p===-1&&(p=this.source.length),l===n-1){if(u+s>p)return p;{let m=this.hbsPosFor(u+s);U(m!==null,"the returned offset failed to round-trip"),U(m.line===n,"the round-tripped line didn't match the original line"),U(m.column===s,"the round-tripped column didn't match the original column")}return u+s}if(p===-1)return 0;l+=1,u=p+1}return i}}class Ue{static range(e,n=oe.NON_EXISTENT){return new Ue(e.map(wt)).getRangeOffset(n)}_span;constructor(e=[]){this._span=e}add(e){this._span.push(e)}getRangeOffset(e){if(ae(this._span)){let n=rr(this._span),s=Ke(this._span);return n.extend(s)}return e}}function wt(t){if(Array.isArray(t)){let e=rr(t),n=Ke(t);return wt(e).extend(wt(n))}return t instanceof oe?t:t.loc}function Yn(t){return!Array.isArray(t)||t.length!==0}function Dr(t,e){return Yn(t)?wt(t):e}var or=Object.freeze({__proto__:null,NON_EXISTENT_LOCATION:Ht,SYNTHETIC_LOCATION:Qi,Source:dt,SourceOffset:pt,SourceSlice:ke,SourceSpan:oe,SpanList:Ue,UNKNOWN_POSITION:Xe,hasSpan:Yn,loc:wt,maybeLoc:Dr});function k(t,e){let{module:n,loc:s}=e,{line:i,column:l}=s.start,u=e.asString(),p=u?`

|
|  ${u.split(`
`).join(`
|  `)}
|

`:"",m=new Error(`${t}: ${p}(error occurred in '${n}' @ line ${i} : column ${l})`);return m.name="SyntaxError",m.location=e,m.code=u,m}const ta={Template:["body"],Block:["body"],MustacheStatement:["path","params","hash"],BlockStatement:["path","params","hash","program","inverse"],ElementModifierStatement:["path","params","hash"],CommentStatement:[],MustacheCommentStatement:[],ElementNode:["attributes","modifiers","children","comments"],AttrNode:["value"],TextNode:[],ConcatStatement:["parts"],SubExpression:["path","params","hash"],PathExpression:[],StringLiteral:[],BooleanLiteral:[],NumberLiteral:[],NullLiteral:[],UndefinedLiteral:[],Hash:["pairs"],HashPair:["value"]},Xn=function(){function t(e,n,s,i){let l=Error.call(this,e);this.key=i,this.message=e,this.node=n,this.parent=s,l.stack&&(this.stack=l.stack)}return t.prototype=Object.create(Error.prototype),t.prototype.constructor=t,t}();function Qn(t,e,n){return new Xn("Cannot remove a node unless it is part of an array",t,e,n)}function ra(t,e,n){return new Xn("Cannot replace a node with multiple nodes unless it is part of an array",t,e,n)}function na(t,e){return new Xn("Replacing and removing in key handlers is not yet supported.",t,null,e)}class lr{node;parent;parentKey;constructor(e,n=null,s=null){this.node=e,this.parent=n,this.parentKey=s}get parentNode(){return this.parent?this.parent.node:null}parents(){return{[Symbol.iterator]:()=>new ou(this)}}}class ou{path;constructor(e){this.path=e}next(){return this.path.parent?(this.path=this.path.parent,{done:!1,value:this.path}):{done:!0,value:null}}}function sa(t){return typeof t=="function"?t:t.enter}function ia(t){return typeof t=="function"?void 0:t.exit}function Hr(t,e){let n,s,i,{node:l,parent:u,parentKey:p}=e,m=function(S,_){if(S.Program&&(_==="Template"&&!S.Template||_==="Block"&&!S.Block))return xe(`The 'Program' visitor node is deprecated. Use 'Template' or 'Block' instead (node was '${_}') `),S.Program;let N=S[_];return N!==void 0?N:S.All}(t,l.type);if(m!==void 0&&(n=sa(m),s=ia(m)),n!==void 0&&(i=n(l,e)),i!=null){if(JSON.stringify(l)!==JSON.stringify(i))return Array.isArray(i)?(oa(t,i,u,p),i):Hr(t,new lr(i,u,p))||i;i=void 0}if(i===void 0){let S=ta[l.type];for(let _=0;_<S.length;_++)lu(t,m,e,S[_]);s!==void 0&&(i=s(l,e))}return i}function aa(t,e,n){t[e]=n}function lu(t,e,n,s){let i,l,{node:u}=n,p=function(m,S){return m[S]}(u,s);if(p){if(e!==void 0){let m=function(S,_){let N=typeof S!="function"?S.keys:void 0;if(N===void 0)return;let H=N[_];return H!==void 0?H:N.All}(e,s);m!==void 0&&(i=sa(m),l=ia(m))}if(i!==void 0&&i(u,s)!==void 0)throw na(u,s);if(Array.isArray(p))oa(t,p,n,s);else{let m=Hr(t,new lr(p,n,s));m!==void 0&&function(S,_,N,H){if(H===null)throw Qn(N,S,_);if(Array.isArray(H)){if(H.length!==1)throw H.length===0?Qn(N,S,_):ra(N,S,_);aa(S,_,H[0])}else aa(S,_,H)}(u,s,p,m)}if(l!==void 0&&l(u,s)!==void 0)throw na(u,s)}}function oa(t,e,n,s){for(let i=0;i<e.length;i++){let l=Ot(e[i]),u=Hr(t,new lr(l,n,s));u!==void 0&&(i+=cu(e,i,u)-1)}}function cu(t,e,n){return n===null?(t.splice(e,1),0):Array.isArray(n)?(t.splice(e,1,...n),n.length):(t.splice(e,1,n),1)}function Rr(t,e){Hr(e,new lr(t))}class Zn{stack=[];constructor(e){this.order=e}visit(e,n){e&&(this.stack.push(e),this.order==="post"?(this.children(e,n),n(e,this)):(n(e,this),this.children(e,n)),this.stack.pop())}children(e,n){switch(e.type){case"Block":case"Template":return void la(this,e.body,n);case"ElementNode":return void la(this,e.children,n);case"BlockStatement":return this.visit(e.program,n),void this.visit(e.inverse||null,n);default:return}}}function la(t,e,n){for(const s of e)t.visit(s,n)}function Mt(t,e){(function(n){switch(n.type){case"Block":case"Template":return n.body;case"ElementNode":return n.children}})(t).push(e)}function ca(t){return t.type==="StringLiteral"||t.type==="BooleanLiteral"||t.type==="NumberLiteral"||t.type==="NullLiteral"||t.type==="UndefinedLiteral"}let es;function ts(){return es||(es=new dt("","(synthetic)")),es}function ua(t,e){return O.var({name:t,loc:ne(e||null)})}function mt(t,e){let n=ne(e||null);if(typeof t!="string"){if("type"in t)return t;{U(t.head.indexOf(".")===-1,"builder.path({ head, tail }) should not be called with a head with dots in it");let{head:l,tail:u}=t;return O.path({head:O.head({original:l,loc:n.sliceStartChars({chars:l.length})}),tail:u,loc:ne(e||null)})}}let{head:s,tail:i}=function(l,u){let[p,...m]=St(l.split(".")),S=O.head({original:p,loc:ne(u||null)});return O.path({head:S,tail:m,loc:ne(u||null)})}(t,n);return O.path({head:s,tail:i,loc:n})}function Mr(t,e,n){return O.literal({type:t,value:e,loc:ne(n||null)})}function cr(t=[],e){return O.hash({pairs:t,loc:ne(e||null)})}function ha(t){return t.map(e=>typeof e=="string"?O.var({name:e,loc:oe.synthetic(e)}):e)}function pa(t=[],e=[],n=!1,s){return O.blockItself({body:t,params:ha(e),chained:n,loc:ne(s||null)})}function da(t=[],e=[],n){return O.template({body:t,blockParams:e,loc:ne(n||null)})}function ne(...t){if(t.length===1){let e=t[0];return e&&typeof e=="object"?oe.forHbsLoc(ts(),e):oe.forHbsLoc(ts(),Qi)}{let[e,n,s,i,l]=t,u=l?new dt("",l):ts();return oe.forHbsLoc(u,{start:{line:e,column:n},end:{line:s||e,column:i||n}})}}var rs={mustache:function(t,e=[],n=cr([]),s=!1,i,l){return O.mustache({path:mt(t),params:e,hash:n,trusting:s,strip:l,loc:ne(i||null)})},block:function(t,e,n,s,i=null,l,u,p,m){let S,_=null;return s.type==="Template"?(xe("b.program is deprecated. Use b.blockItself instead."),S=O.blockItself({params:ha(s.blockParams),body:s.body,loc:s.loc})):S=s,i?.type==="Template"?(xe("b.program is deprecated. Use b.blockItself instead."),U(i.blockParams.length===0,"{{else}} block cannot have block params"),_=O.blockItself({params:[],body:i.body,loc:i.loc})):_=i,O.block({path:mt(t),params:e||[],hash:n||cr([]),defaultBlock:S,elseBlock:_,loc:ne(l||null),openStrip:u,inverseStrip:p,closeStrip:m})},comment:function(t,e){return O.comment({value:t,loc:ne(e||null)})},mustacheComment:function(t,e){return O.mustacheComment({value:t,loc:ne(e||null)})},element:function(t,e={}){let n,s,{attrs:i,blockParams:l,modifiers:u,comments:p,children:m,openTag:S,closeTag:_,loc:N}=e;typeof t=="string"?t.endsWith("/")?(n=mt(t.slice(0,-1)),s=!0):n=mt(t):"type"in t?(U(t.type==="PathExpression",`Invalid tag type ${t.type}`),n=t):"path"in t?(U(t.path.type==="PathExpression",`Invalid tag type ${t.path.type}`),n=t.path,s=t.selfClosing):(n=mt(t.name),s=t.selfClosing),s&&U(_==null,"Cannot build a self-closing tag with a closeTag source location");let H=l?.map(se=>typeof se=="string"?ua(se):se),J=null;return _?J=ne(_||null):_===void 0&&(J=s||Gn(n.original)?null:ne(null)),O.element({path:n,selfClosing:s||!1,attributes:i||[],params:H||[],modifiers:u||[],comments:p||[],children:m||[],openTag:ne(S||null),closeTag:J,loc:ne(N||null)})},elementModifier:function(t,e,n,s){return O.elementModifier({path:mt(t),params:e||[],hash:n||cr([]),loc:ne(s||null)})},attr:function(t,e,n){return O.attr({name:t,value:e,loc:ne(n||null)})},text:function(t="",e){return O.text({chars:t,loc:ne(e||null)})},sexpr:function(t,e=[],n=cr([]),s){return O.sexpr({path:mt(t),params:e,hash:n,loc:ne(s||null)})},concat:function(t,e){if(!ae(t))throw new Error("b.concat requires at least one part");return O.concat({parts:t,loc:ne(e||null)})},hash:cr,pair:function(t,e,n){return O.pair({key:t,value:e,loc:ne(n||null)})},literal:Mr,program:function(t,e,n){return xe("b.program is deprecated. Use b.template or b.blockItself instead."),e&&e.length?pa(t,e,!1,n):da(t,[],n)},blockItself:pa,template:da,loc:ne,pos:function(t,e){return O.pos({line:t,column:e})},path:mt,fullPath:function(t,e=[],n){return O.path({head:t,tail:e,loc:ne(n||null)})},head:function(t,e){return O.head({original:t,loc:ne(e||null)})},at:function(t,e){return O.atName({name:t,loc:ne(e||null)})},var:ua,this:function(t){return O.this({loc:ne(t||null)})},string:ns("StringLiteral"),boolean:ns("BooleanLiteral"),number:ns("NumberLiteral"),undefined:()=>Mr("UndefinedLiteral",void 0),null:()=>Mr("NullLiteral",null)};function ns(t){return function(e,n){return Mr(t,e,n)}}const Fr={close:!1,open:!1},O=new class{pos({line:t,column:e}){return{line:t,column:e}}blockItself({body:t,params:e,chained:n=!1,loc:s}){return{type:"Block",body:t,params:e,get blockParams(){return this.params.map(i=>i.name)},set blockParams(i){this.params=i.map(l=>O.var({name:l,loc:oe.synthetic(l)}))},chained:n,loc:s}}template({body:t,blockParams:e,loc:n}){return{type:"Template",body:t,blockParams:e,loc:n}}mustache({path:t,params:e,hash:n,trusting:s,loc:i,strip:l=Fr}){return function({path:u,params:p,hash:m,trusting:S,strip:_,loc:N}){const H={type:"MustacheStatement",path:u,params:p,hash:m,trusting:S,strip:_,loc:N};return Object.defineProperty(H,"escaped",{enumerable:!1,get(){return xe("The escaped property on mustache nodes is deprecated, use trusting instead"),!this.trusting},set(J){xe("The escaped property on mustache nodes is deprecated, use trusting instead"),this.trusting=!J}}),H}({path:t,params:e,hash:n,trusting:s,strip:l,loc:i})}block({path:t,params:e,hash:n,defaultBlock:s,elseBlock:i=null,loc:l,openStrip:u=Fr,inverseStrip:p=Fr,closeStrip:m=Fr}){return{type:"BlockStatement",path:t,params:e,hash:n,program:s,inverse:i,loc:l,openStrip:u,inverseStrip:p,closeStrip:m}}comment({value:t,loc:e}){return{type:"CommentStatement",value:t,loc:e}}mustacheComment({value:t,loc:e}){return{type:"MustacheCommentStatement",value:t,loc:e}}concat({parts:t,loc:e}){return{type:"ConcatStatement",parts:t,loc:e}}element({path:t,selfClosing:e,attributes:n,modifiers:s,params:i,comments:l,children:u,openTag:p,closeTag:m,loc:S}){let _=e;return{type:"ElementNode",path:t,attributes:n,modifiers:s,params:i,comments:l,children:u,openTag:p,closeTag:m,loc:S,get tag(){return this.path.original},set tag(N){this.path.original=N},get blockParams(){return this.params.map(N=>N.name)},set blockParams(N){this.params=N.map(H=>O.var({name:H,loc:oe.synthetic(H)}))},get selfClosing(){return _},set selfClosing(N){_=N,this.closeTag=N?null:oe.synthetic(`</${this.tag}>`)}}}elementModifier({path:t,params:e,hash:n,loc:s}){return{type:"ElementModifierStatement",path:t,params:e,hash:n,loc:s}}attr({name:t,value:e,loc:n}){return{type:"AttrNode",name:t,value:e,loc:n}}text({chars:t,loc:e}){return{type:"TextNode",chars:t,loc:e}}sexpr({path:t,params:e,hash:n,loc:s}){return{type:"SubExpression",path:t,params:e,hash:n,loc:s}}path({head:t,tail:e,loc:n}){return function({head:s,tail:i,loc:l}){const u={type:"PathExpression",head:s,tail:i,get original(){return[this.head.original,...this.tail].join(".")},set original(p){let[m,...S]=St(p.split("."));this.head=rs.head(m,this.head.loc),this.tail=S},loc:l};return Object.defineProperty(u,"parts",{enumerable:!1,get(){xe("The parts property on path nodes is deprecated, use head and tail instead");let p=St(this.original.split("."));return p[0]==="this"?p.shift():p[0].startsWith("@")&&(p[0]=p[0].slice(1)),Object.freeze(p)},set(p){xe("The parts property on mustache nodes is deprecated, use head and tail instead");let m=[...p];m[0]==="this"||m[0]?.startsWith("@")||(this.head.type==="ThisHead"?m.unshift("this"):this.head.type==="AtHead"&&(m[0]=`@${m[0]}`)),this.original=m.join(".")}}),Object.defineProperty(u,"this",{enumerable:!1,get(){return xe("The this property on path nodes is deprecated, use head.type instead"),this.head.type==="ThisHead"}}),Object.defineProperty(u,"data",{enumerable:!1,get(){return xe("The data property on path nodes is deprecated, use head.type instead"),this.head.type==="AtHead"}}),u}({head:t,tail:e,loc:n})}head({original:t,loc:e}){return t==="this"?this.this({loc:e}):t[0]==="@"?this.atName({name:t,loc:e}):this.var({name:t,loc:e})}this({loc:t}){return{type:"ThisHead",get original(){return"this"},loc:t}}atName({name:t,loc:e}){let n="";const s={type:"AtHead",get name(){return n},set name(i){U(i[0]==="@","call builders.at() with a string that starts with '@'"),U(i.indexOf(".")===-1,"builder.at() should not be called with a name with dots in it"),n=i},get original(){return this.name},set original(i){this.name=i},loc:e};return s.name=t,s}var({name:t,loc:e}){let n="";const s={type:"VarHead",get name(){return n},set name(i){U(i!=="this","You called builders.var() with 'this'. Call builders.this instead"),U(i[0]!=="@",`You called builders.var() with '${t}'. Call builders.at('${t}') instead`),U(i.indexOf(".")===-1,"builder.var() should not be called with a name with dots in it"),n=i},get original(){return this.name},set original(i){this.name=i},loc:e};return s.name=t,s}hash({pairs:t,loc:e}){return{type:"Hash",pairs:t,loc:e}}pair({key:t,value:e,loc:n}){return{type:"HashPair",key:t,value:e,loc:n}}literal({type:t,value:e,loc:n}){return function({type:s,value:i,loc:l}){const u={type:s,value:i,loc:l};return Object.defineProperty(u,"original",{enumerable:!1,get(){return xe("The original property on literal nodes is deprecated, use value instead"),this.value},set(p){xe("The original property on literal nodes is deprecated, use value instead"),this.value=p}}),u}({type:t,value:e,loc:n})}};class uu{elementStack=[];lines;source;currentAttribute=null;currentNode=null;tokenizer;constructor(e,n=new Br(Vn),s="precompile"){this.source=e,this.lines=e.source.split(/\r\n?|\n/u),this.tokenizer=new jn(this,n,s)}offset(){let{line:e,column:n}=this.tokenizer;return this.source.offsetFor(e,n)}pos({line:e,column:n}){return this.source.offsetFor(e,n)}finish(e){return Me({},e,{loc:e.start.until(this.offset())})}get currentAttr(){return bt(this.currentAttribute,"expected attribute")}get currentTag(){let e=this.currentNode;return U(e&&(e.type==="StartTag"||e.type==="EndTag"),"expected tag"),e}get currentStartTag(){let e=this.currentNode;return U(e&&e.type==="StartTag","expected start tag"),e}get currentEndTag(){let e=this.currentNode;return U(e&&e.type==="EndTag","expected end tag"),e}get currentComment(){let e=this.currentNode;return U(e&&e.type==="CommentStatement","expected a comment"),e}get currentData(){let e=this.currentNode;return U(e&&e.type==="TextNode","expected a text node"),e}acceptNode(e){return this[e.type](e)}currentElement(){return Ke(St(this.elementStack))}sourceForNode(e,n){let s,i,l,u=e.loc.start.line-1,p=u-1,m=e.loc.start.column,S=[];for(n?(i=n.loc.end.line-1,l=n.loc.end.column):(i=e.loc.end.line-1,l=e.loc.end.column);p<i;)p++,s=Ot(this.lines[p]),p===u?u===i?S.push(s.slice(m,l)):S.push(s.slice(m)):p===i?S.push(s.slice(0,l)):S.push(s);return S.join(`
`)}}class hu extends uu{pendingError=null;parse(e,n){let s=O.template({body:[],blockParams:n,loc:this.source.spanFor(e.loc)}),i=this.parseProgram(s,e);return this.pendingError?.eof(i.loc.getEnd()),i}Program(e,n){U(Array.isArray(n),"[BUG] Program in parser unexpectedly called without block params");let s=O.blockItself({body:[],params:n,chained:e.chained,loc:this.source.spanFor(e.loc)});return this.parseProgram(s,e)}parseProgram(e,n){if(n.body.length===0)return e;let s;try{this.elementStack.push(e);for(let i of n.body)this.acceptNode(i)}finally{s=this.elementStack.pop()}if(e!==s){if(s?.type==="ElementNode")throw k(`Unclosed element \`${s.tag}\``,s.loc);U(s!==void 0,"[BUG] empty parser elementStack"),U(!1,`[BUG] mismatched parser elementStack node: ${e.type}`)}return e}BlockStatement(e){if(this.tokenizer.state==="comment")return void this.appendToCommentData(this.sourceForNode(e));if(this.tokenizer.state!=="data"&&this.tokenizer.state!=="beforeData")throw k("A block may only be used inside an HTML element or another block.",this.source.spanFor(e.loc));const{path:n,params:s,hash:i}=ss(this,e),l=this.source.spanFor(e.loc);let u=[];if(e.program.blockParams?.length){let _=i.loc.collapse("end");_=e.program.loc?_.withEnd(this.source.spanFor(e.program.loc).getStart()):e.program.body[0]?_.withEnd(this.source.spanFor(e.program.body[0].loc).getStart()):_.withEnd(l.getEnd());const N=_.asString();let H=N.indexOf("|")+1;const J=N.indexOf("|",H);for(const se of e.program.blockParams){let we,Ce;we=H>=J?-1:N.indexOf(se,H),we===-1||we+se.length>J?(H=J,Ce=this.source.spanFor(Ht)):(H=we,Ce=_.sliceStartChars({skipStart:H,chars:se.length}),H+=se.length),u.push(O.var({name:se,loc:Ce}))}}e.program.loc||(e.program.loc=Ht),e.inverse&&!e.inverse.loc&&(e.inverse.loc=Ht);const p=this.Program(e.program,u),m=e.inverse?this.Program(e.inverse,[]):null,S=O.block({path:n,params:s,hash:i,defaultBlock:p,elseBlock:m,loc:this.source.spanFor(e.loc),openStrip:e.openStrip,inverseStrip:e.inverseStrip,closeStrip:e.closeStrip});Mt(this.currentElement(),S)}MustacheStatement(e){this.pendingError?.mustache(this.source.spanFor(e.loc));const{tokenizer:n}=this;if(n.state==="comment")return void this.appendToCommentData(this.sourceForNode(e));let s;const{escaped:i,loc:l,strip:u}=e;if("original"in e.path&&e.path.original==="...attributes")throw k("Illegal use of ...attributes",this.source.spanFor(e.loc));if(ca(e.path))s=O.mustache({path:this.acceptNode(e.path),params:[],hash:O.hash({pairs:[],loc:this.source.spanFor(e.path.loc).collapse("end")}),trusting:!i,loc:this.source.spanFor(l),strip:u});else{const{path:p,params:m,hash:S}=ss(this,e);s=O.mustache({path:p,params:m,hash:S,trusting:!i,loc:this.source.spanFor(l),strip:u})}switch(n.state){case"tagOpen":case"tagName":throw k("Cannot use mustaches in an elements tagname",s.loc);case"beforeAttributeName":is(this.currentStartTag,s);break;case"attributeName":case"afterAttributeName":this.beginAttributeValue(!1),this.finishAttributeValue(),is(this.currentStartTag,s),n.transitionTo("beforeAttributeName");break;case"afterAttributeValueQuoted":is(this.currentStartTag,s),n.transitionTo("beforeAttributeName");break;case"beforeAttributeValue":this.beginAttributeValue(!1),this.appendDynamicAttributeValuePart(s),n.transitionTo("attributeValueUnquoted");break;case"attributeValueDoubleQuoted":case"attributeValueSingleQuoted":case"attributeValueUnquoted":this.appendDynamicAttributeValuePart(s);break;default:Mt(this.currentElement(),s)}return s}appendDynamicAttributeValuePart(e){this.finalizeTextPart();const n=this.currentAttr;n.isDynamic=!0,n.parts.push(e)}finalizeTextPart(){const e=this.currentAttr.currentPart;e!==null&&(this.currentAttr.parts.push(e),this.startTextPart())}startTextPart(){this.currentAttr.currentPart=null}ContentStatement(e){(function(n,s){let i=s.loc.start.line,l=s.loc.start.column;const u=function(p,m){if(m==="")return{lines:p.split(`
`).length-1,columns:0};const[S]=p.split(m),_=S.split(/\n/u),N=_.length-1;return{lines:N,columns:Ot(_[N]).length}}(s.original,s.value);i+=u.lines,u.lines?l=u.columns:l+=u.columns,n.line=i,n.column=l})(this.tokenizer,e),this.tokenizer.tokenizePart(e.value),this.tokenizer.flushData()}CommentStatement(e){const{tokenizer:n}=this;if(n.state==="comment")return this.appendToCommentData(this.sourceForNode(e)),null;const{value:s,loc:i}=e,l=O.mustacheComment({value:s,loc:this.source.spanFor(i)});switch(n.state){case"beforeAttributeName":case"afterAttributeName":this.currentStartTag.comments.push(l);break;case"beforeData":case"data":Mt(this.currentElement(),l);break;default:throw k(`Using a Handlebars comment when in the \`${n.state}\` state is not supported`,this.source.spanFor(e.loc))}return l}PartialStatement(e){throw k("Handlebars partials are not supported",this.source.spanFor(e.loc))}PartialBlockStatement(e){throw k("Handlebars partial blocks are not supported",this.source.spanFor(e.loc))}Decorator(e){throw k("Handlebars decorators are not supported",this.source.spanFor(e.loc))}DecoratorBlock(e){throw k("Handlebars decorator blocks are not supported",this.source.spanFor(e.loc))}SubExpression(e){const{path:n,params:s,hash:i}=ss(this,e);return O.sexpr({path:n,params:s,hash:i,loc:this.source.spanFor(e.loc)})}PathExpression(e){const{original:n}=e;let s;if(n.indexOf("/")!==-1){if(n.slice(0,2)==="./")throw k('Using "./" is not supported in Glimmer and unnecessary',this.source.spanFor(e.loc));if(n.slice(0,3)==="../")throw k('Changing context using "../" is not supported in Glimmer',this.source.spanFor(e.loc));if(n.indexOf(".")!==-1)throw k("Mixing '.' and '/' in paths is not supported in Glimmer; use only '.' to separate property paths",this.source.spanFor(e.loc));s=[e.parts.join("/")]}else{if(n===".")throw k("'.' is not a supported path in Glimmer; check for a path with a trailing '.'",this.source.spanFor(e.loc));s=e.parts}let i,l=!1;if(/^this(?:\..+)?$/u.test(n)&&(l=!0),l)i=O.this({loc:this.source.spanFor({start:e.loc.start,end:{line:e.loc.start.line,column:e.loc.start.column+4}})});else if(e.data){const u=s.shift();if(u===void 0)throw k("Attempted to parse a path expression, but it was not valid. Paths beginning with @ must start with a-z.",this.source.spanFor(e.loc));i=O.atName({name:`@${u}`,loc:this.source.spanFor({start:e.loc.start,end:{line:e.loc.start.line,column:e.loc.start.column+u.length+1}})})}else{const u=s.shift();if(u===void 0)throw k("Attempted to parse a path expression, but it was not valid. Paths must start with a-z or A-Z.",this.source.spanFor(e.loc));i=O.var({name:u,loc:this.source.spanFor({start:e.loc.start,end:{line:e.loc.start.line,column:e.loc.start.column+u.length}})})}return O.path({head:i,tail:s,loc:this.source.spanFor(e.loc)})}Hash(e){const n=e.pairs.map(s=>O.pair({key:s.key,value:this.acceptNode(s.value),loc:this.source.spanFor(s.loc)}));return O.hash({pairs:n,loc:this.source.spanFor(e.loc)})}StringLiteral(e){return O.literal({type:"StringLiteral",value:e.value,loc:this.source.spanFor(e.loc)})}BooleanLiteral(e){return O.literal({type:"BooleanLiteral",value:e.value,loc:this.source.spanFor(e.loc)})}NumberLiteral(e){return O.literal({type:"NumberLiteral",value:e.value,loc:this.source.spanFor(e.loc)})}UndefinedLiteral(e){return O.literal({type:"UndefinedLiteral",value:void 0,loc:this.source.spanFor(e.loc)})}NullLiteral(e){return O.literal({type:"NullLiteral",value:null,loc:this.source.spanFor(e.loc)})}}function ss(t,e){let n;switch(e.path.type){case"PathExpression":n=t.PathExpression(e.path);break;case"SubExpression":n=t.SubExpression(e.path);break;case"StringLiteral":case"UndefinedLiteral":case"NullLiteral":case"NumberLiteral":case"BooleanLiteral":{let l;throw l=e.path.type==="BooleanLiteral"?e.path.original.toString():e.path.type==="StringLiteral"?`"${e.path.original}"`:e.path.type==="NullLiteral"?"null":e.path.type==="NumberLiteral"?e.path.value.toString():"undefined",k(`${e.path.type} "${e.path.type==="StringLiteral"?e.path.original:l}" cannot be called as a sub-expression, replace (${l}) with ${l}`,t.source.spanFor(e.path.loc))}}const s=e.params?e.params.map(l=>t.acceptNode(l)):[],i=ae(s)?Ke(s).loc:n.loc;return{path:n,params:s,hash:e.hash?t.Hash(e.hash):O.hash({pairs:[],loc:t.source.spanFor(i).collapse("end")})}}function is(t,e){const{path:n,params:s,hash:i,loc:l}=e;if(ca(n)){const p=`{{${function(m){return m.type==="UndefinedLiteral"?"undefined":JSON.stringify(m.value)}(n)}}}`;throw k(`In <${t.name} ... ${p} ..., ${p} is not a valid modifier`,e.loc)}const u=O.elementModifier({path:n,params:s,hash:i,loc:l});t.modifiers.push(u)}function Ft(t){return/[\t\n\f ]/u.test(t)}class pu extends hu{tagOpenLine=0;tagOpenColumn=0;reset(){this.currentNode=null}beginComment(){this.currentNode={type:"CommentStatement",value:"",start:this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn)}}appendToCommentData(e){this.currentComment.value+=e}finishComment(){Mt(this.currentElement(),O.comment(this.finish(this.currentComment)))}beginData(){this.currentNode={type:"TextNode",chars:"",start:this.offset()}}appendToData(e){this.currentData.chars+=e}finishData(){Mt(this.currentElement(),O.text(this.finish(this.currentData)))}tagOpen(){this.tagOpenLine=this.tokenizer.line,this.tagOpenColumn=this.tokenizer.column}beginStartTag(){this.currentNode={type:"StartTag",name:"",nameStart:null,nameEnd:null,attributes:[],modifiers:[],comments:[],params:[],selfClosing:!1,start:this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn)}}beginEndTag(){this.currentNode={type:"EndTag",name:"",start:this.source.offsetFor(this.tagOpenLine,this.tagOpenColumn)}}finishTag(){let e=this.finish(this.currentTag);if(e.type==="StartTag"){if(this.finishStartTag(),e.name===":")throw k("Invalid named block named detected, you may have created a named block without a name, or you may have began your name with a number. Named blocks must have names that are at least one character long, and begin with a lower case letter",this.source.spanFor({start:this.currentTag.start.toJSON(),end:this.offset().toJSON()}));(Ir.has(e.name)||e.selfClosing)&&this.finishEndTag(!0)}else e.type==="EndTag"&&this.finishEndTag(!1)}finishStartTag(){let{name:e,nameStart:n,nameEnd:s}=this.currentStartTag;U(e!=="","tag name cannot be empty"),U(n!==null,"nameStart unexpectedly null"),U(s!==null,"nameEnd unexpectedly null");let i=n.until(s),[l,...u]=St(e.split(".")),p=O.path({head:O.head({original:l,loc:i.sliceStartChars({chars:l.length})}),tail:u,loc:i}),{attributes:m,modifiers:S,comments:_,params:N,selfClosing:H,loc:J}=this.finish(this.currentStartTag),se=O.element({path:p,selfClosing:H,attributes:m,modifiers:S,comments:_,params:N,children:[],openTag:J,closeTag:H?null:oe.broken(),loc:J});this.elementStack.push(se)}finishEndTag(e){let{start:n}=this.currentTag,s=this.finish(this.currentTag),i=this.elementStack.pop();this.validateEndTag(s,i,e);let l=this.currentElement();e?i.closeTag=null:i.selfClosing?U(i.closeTag===null,"element.closeTag unexpectedly present"):i.closeTag=n.until(this.offset()),i.loc=i.loc.withEnd(this.offset()),Mt(l,O.element(i))}markTagAsSelfClosing(){let e=this.currentTag;if(e.type!=="StartTag")throw k("Invalid end tag: closing tag must not be self-closing",this.source.spanFor({start:e.start.toJSON(),end:this.offset().toJSON()}));e.selfClosing=!0}appendToTagName(e){let n=this.currentTag;if(n.name+=e,n.type==="StartTag"){let s=this.offset();n.nameStart===null&&(U(n.nameEnd===null,"nameStart and nameEnd must both be null"),n.nameStart=s.move(-1)),n.nameEnd=s}}beginAttribute(){let e=this.offset();this.currentAttribute={name:"",parts:[],currentPart:null,isQuoted:!1,isDynamic:!1,start:e,valueSpan:e.collapsed()}}appendToAttributeName(e){this.currentAttr.name+=e,this.currentAttr.name==="as"&&this.parsePossibleBlockParams()}beginAttributeValue(e){this.currentAttr.isQuoted=e,this.startTextPart(),this.currentAttr.valueSpan=this.offset().collapsed()}appendToAttributeValue(e){let n=this.currentAttr.parts,s=n[n.length-1],i=this.currentAttr.currentPart;if(i)i.chars+=e,i.loc=i.loc.withEnd(this.offset());else{let l=this.offset();l=e===`
`?s?s.loc.getEnd():this.currentAttr.valueSpan.getStart():l.move(-1),this.currentAttr.currentPart=O.text({chars:e,loc:l.collapsed()})}}finishAttributeValue(){this.finalizeTextPart();let e=this.currentTag,n=this.offset();if(e.type==="EndTag")throw k("Invalid end tag: closing tag must not have attributes",this.source.spanFor({start:e.start.toJSON(),end:n.toJSON()}));let{name:s,parts:i,start:l,isQuoted:u,isDynamic:p,valueSpan:m}=this.currentAttr;if(s.startsWith("|")&&i.length===0&&!u&&!p)throw k("Invalid block parameters syntax: block parameters must be preceded by the `as` keyword",l.until(l.move(s.length)));let S=this.assembleAttributeValue(i,u,p,l.until(n));S.loc=m.withEnd(n);let _=O.attr({name:s,value:S,loc:l.until(n)});this.currentStartTag.attributes.push(_)}parsePossibleBlockParams(){const e=/[!"#%&'()*+./;<=>@[\\\]^`{|}~]/u;U(this.tokenizer.state==="attributeName","must be in TokenizerState.attributeName");const n=this.currentStartTag,s=this.currentAttr;let i={state:"PossibleAs"};const l={PossibleAs:p=>{if(U(i.state==="PossibleAs","bug in block params parser"),Ft(p))i={state:"BeforeStartPipe"},this.tokenizer.transitionTo("afterAttributeName"),this.tokenizer.consume();else{if(p==="|")throw k('Invalid block parameters syntax: expecting at least one space character between "as" and "|"',s.start.until(this.offset().move(1)));i={state:"Done"}}},BeforeStartPipe:p=>{U(i.state==="BeforeStartPipe","bug in block params parser"),Ft(p)?this.tokenizer.consume():p==="|"?(i={state:"BeforeBlockParamName"},this.tokenizer.transitionTo("beforeAttributeName"),this.tokenizer.consume()):i={state:"Done"}},BeforeBlockParamName:p=>{if(U(i.state==="BeforeBlockParamName","bug in block params parser"),Ft(p))this.tokenizer.consume();else if(p==="")i={state:"Done"},this.pendingError={mustache(m){throw k("Invalid block parameters syntax: mustaches cannot be used inside parameters list",m)},eof(m){throw k('Invalid block parameters syntax: expecting the tag to be closed with ">" or "/>" after parameters list',s.start.until(m))}};else if(p==="|"){if(n.params.length===0)throw k("Invalid block parameters syntax: empty parameters list, expecting at least one identifier",s.start.until(this.offset().move(1)));i={state:"AfterEndPipe"},this.tokenizer.consume()}else{if(p===">"||p==="/")throw k('Invalid block parameters syntax: incomplete parameters list, expecting "|" but the tag was closed prematurely',s.start.until(this.offset().move(1)));i={state:"BlockParamName",name:p,start:this.offset()},this.tokenizer.consume()}},BlockParamName:p=>{if(U(i.state==="BlockParamName","bug in block params parser"),p==="")i={state:"Done"},this.pendingError={mustache(m){throw k("Invalid block parameters syntax: mustaches cannot be used inside parameters list",m)},eof(m){throw k('Invalid block parameters syntax: expecting the tag to be closed with ">" or "/>" after parameters list',s.start.until(m))}};else if(p==="|"||Ft(p)){let m=i.start.until(this.offset());if(i.name==="this"||e.test(i.name))throw k(`Invalid block parameters syntax: invalid identifier name \`${i.name}\``,m);n.params.push(O.var({name:i.name,loc:m})),i=p==="|"?{state:"AfterEndPipe"}:{state:"BeforeBlockParamName"},this.tokenizer.consume()}else{if(p===">"||p==="/")throw k('Invalid block parameters syntax: expecting "|" but the tag was closed prematurely',s.start.until(this.offset().move(1)));i.name+=p,this.tokenizer.consume()}},AfterEndPipe:p=>{U(i.state==="AfterEndPipe","bug in block params parser"),Ft(p)?this.tokenizer.consume():p===""?(i={state:"Done"},this.pendingError={mustache(m){throw k("Invalid block parameters syntax: modifiers cannot follow parameters list",m)},eof(m){throw k('Invalid block parameters syntax: expecting the tag to be closed with ">" or "/>" after parameters list',s.start.until(m))}}):p===">"||p==="/"?i={state:"Done"}:(i={state:"Error",message:'Invalid block parameters syntax: expecting the tag to be closed with ">" or "/>" after parameters list',start:this.offset()},this.tokenizer.consume())},Error:p=>{if(U(i.state==="Error","bug in block params parser"),p===""||p==="/"||p===">"||Ft(p))throw k(i.message,i.start.until(this.offset()));this.tokenizer.consume()},Done:()=>{U(!1,"This should never be called")}};let u;do u=this.tokenizer.peek(),l[i.state](u);while(i.state!=="Done"&&u!=="");U(i.state==="Done","bug in block params parser")}reportSyntaxError(e){throw k(e,this.offset().collapsed())}assembleConcatenatedValue(e){for(const i of e)if(i.type!=="MustacheStatement"&&i.type!=="TextNode")throw k(`Unsupported node in quoted attribute value: ${i.type}`,i.loc);yt(e,"the concatenation parts of an element should not be empty");let n=rr(e),s=Ke(e);return O.concat({parts:e,loc:this.source.spanFor(n.loc).extend(this.source.spanFor(s.loc))})}validateEndTag(e,n,s){if(Ir.has(e.name)&&!s)throw k(`<${e.name}> elements do not need end tags. You should remove it`,e.loc);if(n.tag===void 0)throw k(`Closing tag </${e.name}> without an open tag`,e.loc);if(n.tag!==e.name)throw k(`Closing tag </${e.name}> did not match last open tag <${n.tag}> (on line ${n.loc.startPosition.line})`,e.loc)}assembleAttributeValue(e,n,s,i){if(s){if(n)return this.assembleConcatenatedValue(e);{yt(e);const[l,u]=e;if(u===void 0||u.type==="TextNode"&&u.chars==="/")return l;throw k("An unquoted attribute value must be a string or a mustache, preceded by whitespace or a '=' character, and followed by whitespace, a '>' character, or '/>'",i)}}return ae(e)?e[0]:O.text({chars:"",loc:i})}}const du={parse:_t,builders:rs,print:Dt,traverse:Rr,Walker:Zn};class mu extends Br{constructor(){super({})}parse(){}}function _t(t,e={}){let n,s,i,l=e.mode||"precompile";typeof t=="string"?(n=new dt(t,e.meta?.moduleName),s=l==="codemod"?Or(t,e.parseOptions):$n(t,e.parseOptions)):t instanceof dt?(n=t,s=l==="codemod"?Or(t.source,e.parseOptions):$n(t.source,e.parseOptions)):(n=new dt("",e.meta?.moduleName),s=t),l==="codemod"&&(i=new mu);let u=oe.forCharPositions(n,0,n.source.length);s.loc={source:"(program)",start:u.startPosition,end:u.endPosition};let p=new pu(n,i,l).parse(s,e.locals??[]);if(e?.plugins?.ast)for(const m of e.plugins.ast)Rr(p,m(Me({},e,{syntax:du},{plugins:void 0})).visitor);return p}function ma(t,e,n,s){const i=function(l,u,p){if(l.type==="PathExpression"){if(l.head.type==="AtHead"||l.head.type==="ThisHead")return;const m=l.head.name;if(u.indexOf(m)===-1)return m}else if(l.type==="ElementNode"){const{tag:m}=l,S=m.charAt(0);if(S===":"||S==="@"||!p.includeHtmlElements&&m.indexOf(".")===-1&&m.toLowerCase()===m||m.substr(0,5)==="this.")return;if(m.includes(".")){let[_]=m.split(".");if(u.includes(_))return}return u.includes(m)?void 0:m}}(e,n,s);(Array.isArray(i)?i:[i]).forEach(l=>{if(l!==void 0&&l[0]!=="@"){const u=l.split(".")[0];n.includes(u)||t.add(l.split(".")[0])}})}function fu(t,e={includeHtmlElements:!1,includeKeywords:!1}){const n=_t(t),s=new Set,i=[];Rr(n,{Block:{enter({blockParams:u}){u.forEach(p=>{i.push(p)})},exit({blockParams:u}){u.forEach(()=>{i.pop()})}},ElementNode:{enter(u){u.blockParams.forEach(p=>{i.push(p)}),ma(s,u,i,e)},exit({blockParams:u}){u.forEach(()=>{i.pop()})}},PathExpression(u){ma(s,u,i,e)}});let l=[];return s.forEach(u=>l.push(u)),e?.includeKeywords||(l=l.filter(u=>!zn(u))),l}function L(t){if(t!==void 0){const e=t;return{fields:()=>class{type;constructor(n){this.type=e,Me(this,n)}}}}return{fields:()=>class{constructor(e){Me(this,e)}}}}let Ut=class Xs extends L().fields(){static empty(e){return new Xs({loc:e,positional:$t.empty(e),named:Vt.empty(e)})}static named(e){return new Xs({loc:e.loc,positional:$t.empty(e.loc.collapse("end")),named:e})}nth(e){return this.positional.nth(e)}get(e){return this.named.get(e)}isEmpty(){return this.positional.isEmpty()&&this.named.isEmpty()}};class $t extends L().fields(){static empty(e){return new $t({loc:e,exprs:[]})}get size(){return this.exprs.length}nth(e){return this.exprs[e]||null}isEmpty(){return this.exprs.length===0}}let Vt=class zo extends L().fields(){static empty(e){return new zo({loc:e,entries:[]})}get size(){return this.entries.length}get(e){let n=this.entries.filter(s=>s.name.chars===e)[0];return n?n.value:null}isEmpty(){return this.entries.length===0}},as=class{loc;name;value;constructor(e){this.loc=e.name.loc.extend(e.value.loc),this.name=e.name,this.value=e.value}};class fa extends L("HtmlAttr").fields(){}let ga=class extends L("SplatAttr").fields(){};class ba extends L().fields(){toNamedArgument(){return new as({name:this.name,value:this.value})}}class ya extends L("ElementModifier").fields(){}class Sa extends L("GlimmerComment").fields(){}class Ea extends L("HtmlText").fields(){}class va extends L("HtmlComment").fields(){}class ka extends L("AppendContent").fields(){get callee(){return this.value.type==="Call"?this.value.callee:this.value}get args(){return this.value.type==="Call"?this.value.args:Ut.empty(this.value.loc.collapse("end"))}}let wa=class extends L("InvokeBlock").fields(){},Ur=class extends L("InvokeComponent").fields(){get args(){let e=this.componentArgs.map(n=>n.toNamedArgument());return Ut.named(new Vt({loc:Ue.range(e,this.callee.loc.collapse("end")),entries:e}))}},_a=class extends L("SimpleElement").fields(){get args(){let e=this.componentArgs.map(n=>n.toNamedArgument());return Ut.named(new Vt({loc:Ue.range(e,this.tag.loc.collapse("end")),entries:e}))}};class Pa extends L("Literal").fields(){toSlice(){return new ke({loc:this.loc,chars:this.value})}}let Ta=class extends L("Path").fields(){};class Aa extends L("Keyword").fields(){}let Ca=class extends L("Call").fields(){},Na=class extends L("Interpolate").fields(){},xa=class extends L().fields(){};class La extends L().fields(){}let os=class extends L().fields(){get(e){return this.blocks.filter(n=>n.name.chars===e)[0]||null}},jt=class extends L().fields(){get args(){let e=this.componentArgs.map(n=>n.toNamedArgument());return Ut.named(new Vt({loc:Ue.range(e,this.name.loc.collapse("end")),entries:e}))}};class Oa extends L("This").fields(){}class Ba extends L("Arg").fields(){}class Ia extends L("Local").fields(){}class Da extends L("Free").fields(){}const Le={resolution:()=>y.GetStrictKeyword,serialize:()=>"Strict",isAngleBracket:!1},gu={...Le,isAngleBracket:!0};class Oe{static namespaced(e,n=!1){return new Oe([e],n)}static append(){return new Oe([qe.Component,qe.Helper])}static trustingAppend(){return this.namespaced(qe.Helper)}constructor(e,n=!1){this.namespaces=e,this.isAngleBracket=n}resolution(){if(this.namespaces.length!==1)return y.GetFreeAsComponentOrHelperHead;switch(this.namespaces[0]){case qe.Helper:return y.GetFreeAsHelperHead;case qe.Modifier:return y.GetFreeAsModifierHead;case qe.Component:return y.GetFreeAsComponentHead}}serialize(){return this.namespaces.length===1?this.namespaces[0]:"ComponentOrHelper"}}let qe=function(t){return t.Helper="Helper",t.Modifier="Modifier",t.Component="Component",t}({});const ls=qe.Helper,Ha=qe.Modifier,cs=qe.Component;var Qe=Object.freeze({__proto__:null,AppendContent:ka,ArgReference:Ba,Args:Ut,Block:La,COMPONENT_NAMESPACE:cs,CallExpression:Ca,ComponentArg:ba,ElementModifier:ya,FreeVarNamespace:qe,FreeVarReference:Da,GlimmerComment:Sa,HELPER_NAMESPACE:ls,HTML_RESOLUTION:gu,HtmlAttr:fa,HtmlComment:va,HtmlText:Ea,InterpolateExpression:Na,InvokeBlock:wa,InvokeComponent:Ur,KeywordExpression:Aa,LiteralExpression:Pa,LocalVarReference:Ia,LooseModeResolution:Oe,MODIFIER_NAMESPACE:Ha,NamedArgument:as,NamedArguments:Vt,NamedBlock:jt,NamedBlocks:os,PathExpression:Ta,PositionalArguments:$t,STRICT_RESOLUTION:Le,SimpleElement:_a,SplatAttr:ga,Template:xa,ThisReference:Oa,isLiteral:function(t,e){return t.type==="Literal"&&(e===void 0||(e==="null"?t.value===null:typeof t.value===e))},isStrictResolution:function(t){return t===Le},loadResolution:function(t){return t==="Strict"?Le:t==="ComponentOrHelper"?Oe.append():Oe.namespaced(t)},node:L});class $r{static top(e,n,s){return new Ra(e,n,s)}child(e){let n=e.map(s=>this.allocate(s));return new Ma(this,e,n)}}class Ra extends $r{constructor(e,n,s){super(),this.templateLocals=e,this.keywords=n,this.options=s}symbols=[];upvars=[];size=1;named=Re();blocks=Re();usedTemplateLocals=[];#e=!1;hasLexical(e){return this.options.lexicalScope(e)}hasKeyword(e){return this.keywords.includes(e)}getKeyword(e){return this.allocateFree(e,Le)}getUsedTemplateLocals(){return this.usedTemplateLocals}setHasDebugger(){this.#e=!0}get hasEval(){return this.#e}has(e){return this.templateLocals.includes(e)}get(e){let n=this.usedTemplateLocals.indexOf(e);return n!==-1||(n=this.usedTemplateLocals.length,this.usedTemplateLocals.push(e)),[n,!0]}getLocalsMap(){return Re()}getDebugInfo(){return Object.values(this.getLocalsMap())}allocateFree(e,n){n.resolution()===y.GetFreeAsComponentHead&&n.isAngleBracket&&(e=this.options.customizeComponentName(e));let s=this.upvars.indexOf(e);return s!==-1||(s=this.upvars.length,this.upvars.push(e)),s}allocateNamed(e){let n=this.named[e];return n||(n=this.named[e]=this.allocate(e)),n}allocateBlock(e){e==="inverse"&&(e="else");let n=this.blocks[e];return n||(n=this.blocks[e]=this.allocate(`&${e}`)),n}allocate(e){return this.symbols.push(e),this.size++}}class Ma extends $r{constructor(e,n,s){super(),this.parent=e,this.symbols=n,this.slots=s}get locals(){return this.symbols}hasLexical(e){return this.parent.hasLexical(e)}getKeyword(e){return this.parent.getKeyword(e)}hasKeyword(e){return this.parent.hasKeyword(e)}has(e){return this.symbols.indexOf(e)!==-1||this.parent.has(e)}get(e){let n=this.#e(e);return n?[n,!1]:this.parent.get(e)}#e(e){let n=this.symbols.indexOf(e);return n===-1?null:Ot(this.slots[n])}getLocalsMap(){let e=this.parent.getLocalsMap();return this.symbols.forEach(n=>e[n]=this.get(n)[0]),e}getDebugInfo(){return Object.values(this.getLocalsMap())}setHasDebugger(){this.parent.setHasDebugger()}allocateFree(e,n){return this.parent.allocateFree(e,n)}allocateNamed(e){return this.parent.allocateNamed(e)}allocateBlock(e){return this.parent.allocateBlock(e)}allocate(e){return this.parent.allocate(e)}}var Fa=Object.freeze({__proto__:null});let Ua=class{template(e,n,s){return new xa({table:e,body:n,loc:s})}block(e,n,s){return new La({scope:e,body:n,loc:s})}namedBlock(e,n,s){return new jt({name:e,block:n,attrs:[],componentArgs:[],modifiers:[],loc:s})}simpleNamedBlock(e,n,s){return new $a({selfClosing:!1,attrs:[],componentArgs:[],modifiers:[],comments:[]}).named(e,n,s)}slice(e,n){return new ke({loc:n,chars:e})}args(e,n,s){return new Ut({loc:s,positional:e,named:n})}positional(e,n){return new $t({loc:n,exprs:e})}namedArgument(e,n){return new as({name:e,value:n})}named(e,n){return new Vt({loc:n,entries:e})}attr({name:e,value:n,trusting:s},i){return new fa({loc:i,name:e,value:n,trusting:s})}splatAttr(e,n){return new ga({symbol:e,loc:n})}arg({name:e,value:n,trusting:s},i){return new ba({name:e,value:n,trusting:s,loc:i})}path(e,n,s){return new Ta({loc:s,ref:e,tail:n})}keyword(e,n,s){return new Aa({loc:s,name:e,symbol:n})}self(e){return new Oa({loc:e})}at(e,n,s){return U(e[0]==="@","call builders.at() with a string that starts with '@'"),new Ba({loc:s,name:new ke({loc:s,chars:e}),symbol:n})}freeVar({name:e,context:n,symbol:s,loc:i}){return U(e!=="this","You called builders.freeVar() with 'this'. Call builders.this instead"),U(e[0]!=="@",`You called builders.freeVar() with '${e}'. Call builders.at('${e}') instead`),new Da({name:e,resolution:n,symbol:s,loc:i})}localVar(e,n,s,i){return U(e!=="this","You called builders.var() with 'this'. Call builders.this instead"),U(e[0]!=="@",`You called builders.var() with '${e}'. Call builders.at('${e}') instead`),new Ia({loc:i,name:e,isTemplateLocal:s,symbol:n})}sexp(e,n){return new Ca({loc:n,callee:e.callee,args:e.args})}interpolate(e,n){return yt(e),new Na({loc:n,parts:e})}literal(e,n){return new Pa({loc:n,value:e})}append({table:e,trusting:n,value:s},i){return new ka({table:e,trusting:n,value:s,loc:i})}modifier({callee:e,args:n},s){return new ya({loc:s,callee:e,args:n})}namedBlocks(e,n){return new os({loc:n,blocks:e})}blockStatement({program:e,inverse:n=null,...s},i){let l=e.loc,u=[this.namedBlock(ke.synthetic("default"),e,e.loc)];return n&&(l=l.extend(n.loc),u.push(this.namedBlock(ke.synthetic("else"),n,n.loc))),new wa({loc:i,blocks:this.namedBlocks(u,l),callee:s.callee,args:s.args})}element(e){return new $a(e)}};class $a{builder;constructor(e){this.base=e,this.builder=new Ua}simple(e,n,s){return new _a(Me({tag:e,body:n,componentArgs:[],loc:s},this.base))}named(e,n,s){return new jt(Me({name:e,block:n,componentArgs:[],loc:s},this.base))}selfClosingComponent(e,n){return new Ur(Me({loc:n,callee:e,blocks:new os({blocks:[],loc:n.sliceEndChars({skipEnd:1,chars:1})})},this.base))}componentWithDefaultBlock(e,n,s,i){let l=this.builder.block(s,n,i),u=this.builder.namedBlock(ke.synthetic("default"),l,i);return new Ur(Me({loc:i,callee:e,blocks:this.builder.namedBlocks([u],u.loc)},this.base))}componentWithNamedBlocks(e,n,s){return new Ur(Me({loc:s,callee:e,blocks:this.builder.namedBlocks(n,Ue.range(n))},this.base))}}function bu(t){return ur(t)?Oe.namespaced(ls):null}function yu(t){return ur(t)?Oe.namespaced(Ha):null}function Su(t){return ur(t)?Oe.namespaced(cs):null}function Eu(t){return Va(t)?Oe.namespaced(cs,!0):null}function vu(t){return ur(t)?Oe.namespaced(ls):null}function ku(t){let e=ur(t),n=t.trusting;return e?n?Oe.trustingAppend():Oe.append():null}function ur(t){return Va(t.path)}function Va(t){return t.type==="PathExpression"&&t.head.type==="VarHead"&&t.tail.length===0}function ja(t,e={lexicalScope:()=>!1}){let n=_t(t,e),s={strictMode:!1,...e,locals:n.blockParams,keywords:e.keywords??[]},i=$r.top(s.locals,s.keywords,{customizeComponentName:e.customizeComponentName??(m=>m),lexicalScope:e.lexicalScope}),l=new us(t,s,i),u=new hr(l);return[new _u(l.loc(n.loc),n.body.map(m=>u.normalize(m)),l).assertTemplate(i),i.getUsedTemplateLocals()]}class us{builder;constructor(e,n,s){this.source=e,this.options=n,this.table=s,this.builder=new Ua}get strict(){return this.options.strictMode||!1}loc(e){return this.source.spanFor(e)}resolutionFor(e,n){if(this.strict)return{result:Le};if(this.isFreeVar(e)){let s=n(e);return s===null?{result:"error",path:Ga(e),head:qa(e)}:{result:s}}return{result:Le}}isLexicalVar(e){return this.table.hasLexical(e)}isKeyword(e){return this.strict&&!this.table.hasLexical(e)&&this.table.hasKeyword(e)}isFreeVar(e){return e.type==="PathExpression"?e.head.type==="VarHead"&&!this.table.has(e.head.name):e.path.type==="PathExpression"&&this.isFreeVar(e.path)}hasBinding(e){return this.table.has(e)||this.table.hasLexical(e)}child(e){return new us(this.source,this.options,this.table.child(e))}customizeComponentName(e){return this.options.customizeComponentName?this.options.customizeComponentName(e):e}}class hs{constructor(e){this.block=e}normalize(e,n){switch(e.type){case"NullLiteral":case"BooleanLiteral":case"NumberLiteral":case"StringLiteral":case"UndefinedLiteral":return this.block.builder.literal(e.value,this.block.loc(e.loc));case"PathExpression":return U(n,"[BUG] resolution is required"),this.path(e,n);case"SubExpression":{pr(e.path)&&dr(e.path,e.loc);let s=this.block.resolutionFor(e,bu);if(s.result==="error")throw k(`You attempted to invoke a path (\`${s.path}\`) but ${s.head} was not in scope`,e.loc);return this.block.builder.sexp(this.callParts(e,s.result),this.block.loc(e.loc))}}}path(e,n){let s=this.block.loc(e.loc);if(e.head.type==="VarHead"&&e.tail.length===0&&this.block.isKeyword(e.head.name))return this.block.builder.keyword(e.head.name,this.block.table.getKeyword(e.head.name),s);let i=[],l=this.block.loc(e.head.loc);for(let u of e.tail)l=l.sliceStartChars({chars:u.length,skipStart:1}),i.push(new ke({loc:l,chars:u}));return this.block.builder.path(this.ref(e.head,n),i,s)}callParts(e,n){let{path:s,params:i,hash:l,loc:u}=e,p=this.normalize(s,n),m=i.map(se=>this.normalize(se,Le)),S=Ue.range(m,p.loc.collapse("end")),_=this.block.loc(l.loc),N=Ue.range([S,_]),H=this.block.builder.positional(i.map(se=>this.normalize(se,Le)),S),J=this.block.builder.named(l.pairs.map(se=>this.namedArgument(se)),this.block.loc(l.loc));switch(p.type){case"Literal":throw k(`Invalid invocation of a literal value (\`${p.value}\`)`,u);case"Interpolate":throw k("Invalid invocation of a interpolated string",u)}return{callee:p,args:this.block.builder.args(H,J,N)}}namedArgument(e){let n=this.block.loc(e.loc).sliceStartChars({chars:e.key.length});return this.block.builder.namedArgument(new ke({chars:e.key,loc:n}),this.normalize(e.value,Le))}ref(e,n){let{block:s}=this,{builder:i,table:l}=s,u=s.loc(e.loc);switch(e.type){case"ThisHead":return i.self(u);case"AtHead":{let p=l.allocateNamed(e.name);return i.at(e.name,p,u)}case"VarHead":if(s.hasBinding(e.name)){let[p,m]=l.get(e.name);return s.builder.localVar(e.name,p,m,u)}{let p=s.strict?Le:n,m=s.table.allocateFree(e.name,p);return s.builder.freeVar({name:e.name,context:p,symbol:m,loc:u})}}}}class hr{constructor(e){this.block=e}normalize(e){switch(e.type){case"BlockStatement":return this.BlockStatement(e);case"ElementNode":return new wu(this.block).ElementNode(e);case"MustacheStatement":return this.MustacheStatement(e);case"MustacheCommentStatement":return this.MustacheCommentStatement(e);case"CommentStatement":{let n=this.block.loc(e.loc);return new va({loc:n,text:n.slice({skipStart:4,skipEnd:3}).toSlice(e.value)})}case"TextNode":return new Ea({loc:this.block.loc(e.loc),chars:e.chars})}}MustacheCommentStatement(e){let n,s=this.block.loc(e.loc);return n=s.asString().slice(0,5)==="{{!--"?s.slice({skipStart:5,skipEnd:4}):s.slice({skipStart:3,skipEnd:2}),new Sa({loc:s,text:n.toSlice(e.value)})}MustacheStatement(e){let n,{path:s,params:i,hash:l,trusting:u}=e,p=this.block.loc(e.loc);if(pr(s))i.length===0&&l.pairs.length===0?n=this.expr.normalize(s):dr(s,p);else{let m=this.block.resolutionFor(e,ku);if(m.result==="error")throw k(`You attempted to render a path (\`{{${m.path}}}\`), but ${m.head} was not in scope`,p);let S=this.expr.callParts({path:s,params:i,hash:l,loc:p},m.result);n=S.args.isEmpty()?S.callee:this.block.builder.sexp(S,p)}return this.block.builder.append({table:this.block.table,trusting:u,value:n},p)}BlockStatement(e){let{program:n,inverse:s}=e,i=this.block.loc(e.loc);pr(e.path)&&dr(e.path,i);let l=this.block.resolutionFor(e,Su);if(l.result==="error")throw k(`You attempted to invoke a path (\`{{#${l.path}}}\`) but ${l.head} was not in scope`,i);let u=this.expr.callParts(e,l.result);return this.block.builder.blockStatement(Me({symbols:this.block.table,program:this.Block(n),inverse:s?this.Block(s):null},u),i)}Block({body:e,loc:n,blockParams:s}){let i=this.block.child(s),l=new hr(i);return new Pu(this.block.loc(n),e.map(u=>l.normalize(u)),this.block).assertBlock(i.table)}get expr(){return new hs(this.block)}}class wu{constructor(e){this.ctx=e}ElementNode(e){let{tag:n,selfClosing:s,comments:i}=e,l=this.ctx.loc(e.loc),[u,...p]=St(n.split(".")),m=this.classifyTag(u,p,e.loc),S=e.attributes.filter(fe=>fe.name[0]!=="@").map(fe=>this.attr(fe)),_=e.attributes.filter(fe=>fe.name[0]==="@").map(fe=>this.arg(fe)),N=e.modifiers.map(fe=>this.modifier(fe)),H=this.ctx.child(e.blockParams),J=new hr(H),se=e.children.map(fe=>J.normalize(fe)),we=this.ctx.builder.element({selfClosing:s,attrs:S,componentArgs:_,modifiers:N,comments:i.map(fe=>new hr(this.ctx).MustacheCommentStatement(fe))}),Ce=new Tu(we,l,se,this.ctx),Te=this.ctx.loc(e.loc).sliceStartChars({chars:n.length,skipStart:1});if(m==="ElementHead")return n[0]===":"?Ce.assertNamedBlock(Te.slice({skipStart:1}).toSlice(n.slice(1)),H.table):Ce.assertElement(Te.toSlice(n),e.blockParams.length>0);if(e.selfClosing)return we.selfClosingComponent(m,l);{let fe=Ce.assertComponent(n,H.table,e.blockParams.length>0);return we.componentWithNamedBlocks(m,fe,l)}}modifier(e){pr(e.path)&&dr(e.path,e.loc);let n=this.ctx.resolutionFor(e,yu);if(n.result==="error")throw k(`You attempted to invoke a path (\`{{${n.path}}}\`) as a modifier, but ${n.head} was not in scope`,e.loc);let s=this.expr.callParts(e,n.result);return this.ctx.builder.modifier(s,this.ctx.loc(e.loc))}mustacheAttr(e){let{path:n,params:s,hash:i,loc:l}=e;if(pr(n)){if(s.length===0&&i.pairs.length===0)return this.expr.normalize(n);dr(n,l)}let u=this.ctx.resolutionFor(e,vu);if(u.result==="error")throw k(`You attempted to render a path (\`{{${u.path}}}\`), but ${u.head} was not in scope`,e.loc);let p=this.ctx.builder.sexp(this.expr.callParts(e,u.result),this.ctx.loc(e.loc));return p.args.isEmpty()?p.callee:p}attrPart(e){switch(e.type){case"MustacheStatement":return{expr:this.mustacheAttr(e),trusting:e.trusting};case"TextNode":return{expr:this.ctx.builder.literal(e.chars,this.ctx.loc(e.loc)),trusting:!0}}}attrValue(e){if(e.type==="ConcatStatement"){let n=e.parts.map(s=>this.attrPart(s).expr);return{expr:this.ctx.builder.interpolate(n,this.ctx.loc(e.loc)),trusting:!1}}return this.attrPart(e)}attr(e){if(U(e.name[0]!=="@","An attr name must not start with `@`"),e.name==="...attributes")return this.ctx.builder.splatAttr(this.ctx.table.allocateBlock("attrs"),this.ctx.loc(e.loc));let n=this.ctx.loc(e.loc),s=n.sliceStartChars({chars:e.name.length}).toSlice(e.name),i=this.attrValue(e.value);return this.ctx.builder.attr({name:s,value:i.expr,trusting:i.trusting},n)}checkArgCall(e){let{value:n}=e;if(n.type!=="MustacheStatement"||n.params.length!==0||n.hash.pairs.length!==0)return;let{path:s}=n;if(s.type!=="PathExpression"||s.tail.length>0)return;let i=this.ctx.resolutionFor(s,()=>null);if(i.result==="error"&&i.path!=="has-block")throw k(`You attempted to pass a path as argument (\`${e.name}={{${i.path}}}\`) but ${i.head} was not in scope. Try:
* \`${e.name}={{this.${i.path}}}\` if this is meant to be a property lookup, or
* \`${e.name}={{(${i.path})}}\` if this is meant to invoke the resolved helper, or
* \`${e.name}={{helper "${i.path}"}}\` if this is meant to pass the resolved helper by value`,e.loc)}arg(e){U(e.name[0]==="@","An arg name must start with `@`"),this.checkArgCall(e);let n=this.ctx.loc(e.loc),s=n.sliceStartChars({chars:e.name.length}).toSlice(e.name),i=this.attrValue(e.value);return this.ctx.builder.arg({name:s,value:i.expr,trusting:i.trusting},n)}classifyTag(e,n,s){let i=(l=e)[0]===l[0]?.toUpperCase()&&l[0]!==l[0]?.toLowerCase();var l;let u=e[0]==="@"||e==="this"||this.ctx.hasBinding(e);if(this.ctx.strict&&!u){if(i)throw k(`Attempted to invoke a component that was not in scope in a strict mode template, \`<${e}>\`. If you wanted to create an element with that name, convert it to lowercase - \`<${e.toLowerCase()}>\``,s);return"ElementHead"}let p=u||i,m=s.sliceStartChars({skipStart:1,chars:e.length}),S=n.reduce((H,J)=>H+1+J.length,0),_=m.getEnd().move(S),N=m.withEnd(_);if(p){let H=O.path({head:O.head({original:e,loc:m}),tail:n,loc:N}),J=this.ctx.isLexicalVar(e)?{result:Le}:this.ctx.resolutionFor(H,Eu);if(J.result==="error")throw k(`You attempted to invoke a path (\`<${J.path}>\`) but ${J.head} was not in scope`,s);return new hs(this.ctx).normalize(H,J.result)}if(this.ctx.table.allocateFree(e,Le),n.length>0)throw k(`You used ${e}.${n.join(".")} as a tag name, but ${e} is not in scope`,s);return"ElementHead"}get expr(){return new hs(this.ctx)}}class ps{namedBlocks;hasSemanticContent;nonBlockChildren;constructor(e,n,s){this.loc=e,this.children=n,this.block=s,this.namedBlocks=n.filter(i=>i instanceof jt),this.hasSemanticContent=!!n.filter(i=>{if(i instanceof jt)return!1;switch(i.type){case"GlimmerComment":case"HtmlComment":return!1;case"HtmlText":return!/^\s*$/u.test(i.chars);default:return!0}}).length,this.nonBlockChildren=n.filter(i=>!(i instanceof jt))}}class _u extends ps{assertTemplate(e){if(ae(this.namedBlocks))throw k("Unexpected named block at the top-level of a template",this.loc);return this.block.builder.template(e,this.nonBlockChildren,this.block.loc(this.loc))}}class Pu extends ps{assertBlock(e){if(ae(this.namedBlocks))throw k("Unexpected named block nested in a normal block",this.loc);return this.block.builder.block(e,this.nonBlockChildren,this.loc)}}class Tu extends ps{constructor(e,n,s,i){super(n,s,i),this.el=e}assertNamedBlock(e,n){if(this.el.base.selfClosing)throw k(`<:${e.chars}/> is not a valid named block: named blocks cannot be self-closing`,this.loc);if(ae(this.namedBlocks))throw k(`Unexpected named block inside <:${e.chars}> named block: named blocks cannot contain nested named blocks`,this.loc);if((s=e.chars)[0]!==s[0]?.toLowerCase()||s[0]===s[0]?.toUpperCase())throw k(`<:${e.chars}> is not a valid named block, and named blocks must begin with a lowercase letter`,this.loc);var s;if(this.el.base.attrs.length>0||this.el.base.componentArgs.length>0||this.el.base.modifiers.length>0)throw k(`named block <:${e.chars}> cannot have attributes, arguments, or modifiers`,this.loc);let i=Ue.range(this.nonBlockChildren,this.loc);return this.block.builder.namedBlock(e,this.block.builder.block(n,this.nonBlockChildren,i),this.loc)}assertElement(e,n){if(n)throw k(`Unexpected block params in <${e.chars}>: simple elements cannot have block params`,this.loc);if(ae(this.namedBlocks)){let s=this.namedBlocks.map(i=>i.name);if(s.length===1)throw k(`Unexpected named block <:foo> inside <${e.chars}> HTML element`,this.loc);{let i=s.map(l=>`<:${l.chars}>`).join(", ");throw k(`Unexpected named blocks inside <${e.chars}> HTML element (${i})`,this.loc)}}return this.el.simple(e,this.nonBlockChildren,this.loc)}assertComponent(e,n,s){if(ae(this.namedBlocks)&&this.hasSemanticContent)throw k(`Unexpected content inside <${e}> component invocation: when using named blocks, the tag cannot contain other content`,this.loc);if(ae(this.namedBlocks)){if(s)throw k(`Unexpected block params list on <${e}> component invocation: when passing named blocks, the invocation tag cannot take block params`,this.loc);let i=new Set;for(let l of this.namedBlocks){let u=l.name.chars;if(i.has(u))throw k(`Component had two named blocks with the same name, \`<:${u}>\`. Only one block with a given name may be passed`,this.loc);if(u==="inverse"&&i.has("else")||u==="else"&&i.has("inverse"))throw k("Component has both <:else> and <:inverse> block. <:inverse> is an alias for <:else>",this.loc);i.add(u)}return this.namedBlocks}return[this.block.builder.namedBlock(ke.synthetic("default"),this.block.builder.block(n,this.nonBlockChildren,this.loc),this.loc)]}}function pr(t){switch(t.type){case"StringLiteral":case"BooleanLiteral":case"NumberLiteral":case"UndefinedLiteral":case"NullLiteral":return!0;default:return!1}}function dr(t,e){throw k(`Unexpected literal \`${t.type==="StringLiteral"?JSON.stringify(t.value):String(t.value)}\``,e)}function Ga(t){return t.type!=="PathExpression"&&t.path.type==="PathExpression"?Ga(t.path):new qn({entityEncoding:"raw"}).print(t)}function qa(t){return t.type==="PathExpression"?t.head.original:t.path.type==="PathExpression"?qa(t.path):new qn({entityEncoding:"raw"}).print(t)}const ds=Object.defineProperty({__proto__:null,AST:Fa,ASTv1:Fa,ASTv2:Qe,BlockSymbolTable:Ma,KEYWORDS_TYPES:ir,Path:Zn,ProgramSymbolTable:Ra,SourceSlice:ke,SpanList:Ue,SymbolTable:$r,Walker:Zn,WalkerPath:lr,builders:rs,cannotRemoveNode:Qn,cannotReplaceNode:ra,generateSyntaxError:k,getTemplateLocals:fu,getVoidTags:ru,hasSpan:Yn,isKeyword:zn,isVoidTag:Gn,loc:wt,maybeLoc:Dr,node:L,normalize:ja,preprocess:_t,print:Dt,sortByLoc:Xi,src:or,traverse:Rr,visitorKeys:ta},Symbol.toStringTag,{value:"Module"}),Au={Component:0,Helper:1,String:2,Empty:3,SafeString:4,Fragment:5,Node:6,Other:8},ye={Component:0,Helper:1,Modifier:2},za={Empty:0,dynamicLayout:1,dynamicTag:2,prepareArgs:4,createArgs:8,attributeHook:16,elementHook:32,dynamicScope:64,createCaller:128,updateHook:256,createInstance:512,wrapped:1024,willDestroy:2048,hasSubOwner:4096},Cu=8,Nu=2147483647,xu=255,Lu=255,Ou=768,Bu=1024,Iu={PushFrame:0,PopFrame:1,InvokeVirtual:2,InvokeStatic:3,Jump:4,Return:5,ReturnTo:6,Size:7},Du={Helper:16,SetNamedVariables:17,SetBlocks:18,SetVariable:19,SetBlock:20,GetVariable:21,GetProperty:22,GetBlock:23,SpreadBlock:24,HasBlock:25,HasBlockParams:26,Concat:27,Constant:28,ConstantReference:29,Primitive:30,PrimitiveReference:31,ReifyU32:32,Dup:33,Pop:34,Load:35,Fetch:36,RootScope:37,VirtualRootScope:38,ChildScope:39,PopScope:40,Text:41,Comment:42,AppendHTML:43,AppendSafeHTML:44,AppendDocumentFragment:45,AppendNode:46,AppendText:47,OpenElement:48,OpenDynamicElement:49,PushRemoteElement:50,StaticAttr:51,DynamicAttr:52,ComponentAttr:53,FlushElement:54,CloseElement:55,PopRemoteElement:56,Modifier:57,BindDynamicScope:58,PushDynamicScope:59,PopDynamicScope:60,CompileBlock:61,PushBlockScope:62,PushSymbolTable:63,InvokeYield:64,JumpIf:65,JumpUnless:66,JumpEq:67,AssertSame:68,Enter:69,Exit:70,ToBoolean:71,EnterList:72,ExitList:73,Iterate:74,Main:75,ContentType:76,Curry:77,PushComponentDefinition:78,PushDynamicComponentInstance:79,ResolveDynamicComponent:80,ResolveCurriedComponent:81,PushArgs:82,PushEmptyArgs:83,PopArgs:84,PrepareArgs:85,CaptureArgs:86,CreateComponent:87,RegisterComponentDestructor:88,PutComponentOperations:89,GetComponentSelf:90,GetComponentTagName:91,GetComponentLayout:92,BindEvalScope:93,SetupForEval:94,PopulateLayout:95,InvokeComponentLayout:96,BeginComponentTransaction:97,CommitComponentTransaction:98,DidCreateElement:99,DidRenderLayout:100,ResolveMaybeLocal:102,Debugger:103,Size:104,StaticComponentAttr:105,DynamicContentType:106,DynamicHelper:107,DynamicModifier:108,IfInline:109,Not:110,GetDynamicVar:111,Log:112};function Hu(t){return t>=0&&t<=15}function Ru(t){return t>=16}const Mu=0,Fu=1,Uu=2,$u=3,Vu=4,ju=5,Gu=6,qu=7,zu=8;let Wu=function(t){return t[t.pc=0]="pc",t[t.ra=1]="ra",t[t.fp=2]="fp",t[t.sp=3]="sp",t}({});function Ku(t){return t<=3}let Ju=function(t){return t[t.s0=4]="s0",t[t.s1=5]="s1",t}({}),Yu=function(t){return t[t.t0=6]="t0",t[t.t1=7]="t1",t}({});const Xu=Object.defineProperty({__proto__:null,$fp:Uu,$pc:Mu,$ra:Fu,$s0:Vu,$s1:ju,$sp:$u,$t0:Gu,$t1:qu,$v0:zu,ARG_SHIFT:Cu,ContentType:Au,CurriedType:ye,CurriedTypes:ye,InternalComponentCapabilities:za,InternalComponentCapability:za,MACHINE_MASK:Bu,MAX_SIZE:Nu,MachineOp:Iu,MachineRegister:Wu,OPERAND_LEN_MASK:Ou,Op:Du,SavedRegister:Ju,TYPE_MASK:Lu,TYPE_SIZE:xu,TemporaryRegister:Yu,isLowLevelRegister:Ku,isMachineOp:Hu,isOp:Ru},Symbol.toStringTag,{value:"Module"});let Z=function(t){return t.Block="Block",t.Call="Call",t.Element="Element",t.AppendPath="AppendPath",t.AppendExpr="AppendExpr",t.Literal="Literal",t.Modifier="Modifier",t.DynamicComponent="DynamicComponent",t.Comment="Comment",t.Splat="Splat",t.Keyword="Keyword",t}({}),De=function(t){return t.Local="Local",t.Free="Free",t.Arg="Arg",t.Block="Block",t.This="This",t}({});function Wa(t){if(Array.isArray(t))return function(e){if(!Array.isArray(e))return!1;const n=e[0];if(typeof n=="number")switch(n){case le.Literal:case le.Get:case le.Concat:case le.HasBlock:case le.HasBlockParams:return!0;default:return!1}return n[0]==="("}(t)?Za(t):function(e){if(Array.isArray(e)&&typeof e[0]=="string")switch(e[0][0]){case"(":case"#":case"<":case"!":return!0;default:return!1}return!1}(t)?function(e){const n=e[0];switch(n[0]){case"(":{let s=null,i=null;return e.length===3?(s=Ze(e[1]),i=Gt(e[2])):e.length===2&&(Array.isArray(e[1])?s=Ze(e[1]):i=Gt(e[1])),{kind:Z.Call,head:mr(n),params:s,hash:i,trusted:!1}}case"#":{const{head:s,params:i,hash:l,blocks:u,blockParams:p}=Ya(e);return{kind:Z.Block,head:s,params:i,hash:l,blocks:u,blockParams:p}}case"!":{const s=e[0].slice(1),{params:i,hash:l,blocks:u,blockParams:p}=Ya(e);return{kind:Z.Keyword,name:s,params:i,hash:l,blocks:u,blockParams:p}}case"<":{let s=Re(),i=[];return e.length===3?(s=Qa(e[1]),i=gr(e[2])):e.length===2&&(Array.isArray(e[1])?i=gr(e[1]):s=Qa(e[1])),{kind:Z.Element,name:bt(Zu(n),`BUG: expected ${n} to look like a tag name`),attrs:s,block:i}}default:throw new Error(`Unreachable ${JSON.stringify(e)} in normalizeSugaryArrayStatement`)}}(t):function(e){switch(e[0]){case le.Literal:return{kind:Z.Literal,value:e[1]};case le.Append:return Za(e[1],e[2]);case le.Modifier:return{kind:Z.Modifier,params:Ze(e[1]),hash:Gt(e[2])};case le.DynamicComponent:return{kind:Z.DynamicComponent,expr:br(e[1]),hash:Gt(e[2]),block:gr(e[3])};case le.Comment:return{kind:Z.Comment,value:e[1]}}}(t);if(typeof t=="string")return ms(fr(t),!1);throw je(t)}function ms(t,e){return t.type===ee.GetPath?{kind:Z.AppendPath,path:t,trusted:e}:{kind:Z.AppendExpr,expr:t,trusted:e}}function Qu(t){const e=/^(#|!)(.*)$/u.exec(t);if(e===null)throw new Error("Unexpected missing # in block head");return fr(e[2])}function mr(t){const e=/^\((.*)\)$/u.exec(t);if(e===null)throw new Error("Unexpected missing () in call head");return fr(e[1])}function Ka(t,e=[]){const n=Ja(t);return ae(e)?{type:ee.GetPath,path:{head:n,tail:e}}:{type:ee.GetVar,variable:n}}function fr(t){const{kind:e,name:n}=Ja(t),[s,...i]=n.split("."),l={kind:e,name:s,mode:"loose"};return ae(i)?{type:ee.GetPath,path:{head:l,tail:i}}:{type:ee.GetVar,variable:l}}function Ja(t){let e,n;if(/^this(?:\.|$)/u.test(t))return{kind:De.This,name:t,mode:"loose"};switch(t[0]){case"^":e=De.Free,n=t.slice(1);break;case"@":e=De.Arg,n=t.slice(1);break;case"&":e=De.Block,n=t.slice(1);break;default:e=De.Local,n=t}return{kind:e,name:n,mode:"loose"}}function Ya(t){const e=t[0];let n=Re(),s=null,i=null,l=null;return t.length===2?n=fs(t[1]):t.length===3?(Array.isArray(t[1])?s=Ze(t[1]):{hash:i,blockParams:l}=Xa(t[1]),n=fs(t[2])):t.length===4&&(s=Ze(t[1]),{hash:i,blockParams:l}=Xa(t[2]),n=fs(t[3])),{head:Qu(e),params:s,hash:i,blockParams:l,blocks:n}}function Xa(t){if(t===null)return{hash:null,blockParams:null};let e=null,n=null;return function(s,i){Object.keys(s).forEach(l=>{const u=s[l];i(l,u)})}(t,(s,i)=>{s==="as"?n=Array.isArray(i)?i:[i]:(e=e||Re(),e[s]=br(i))}),{hash:e,blockParams:n}}function fs(t){return Array.isArray(t)?{default:gr(t)}:gs(t,gr)}function gr(t){return t.map(e=>Wa(e))}function Qa(t){return gs(t,e=>{return(n=e,n==="splat"?{expr:Z.Splat,trusted:!1}:{expr:br(n),trusted:!1}).expr;var n})}function gs(t,e){const n=Re();return Object.keys(t).forEach(s=>{n[s]=e(t[s],s)}),n}function Zu(t){return/^<([\d\-a-z][\d\-A-Za-z]*)>$/u.exec(t)?.[1]??null}let le=function(t){return t[t.Literal=0]="Literal",t[t.Comment=1]="Comment",t[t.Append=2]="Append",t[t.Modifier=3]="Modifier",t[t.DynamicComponent=4]="DynamicComponent",t[t.Get=5]="Get",t[t.Concat=6]="Concat",t[t.HasBlock=7]="HasBlock",t[t.HasBlockParams=8]="HasBlockParams",t}({}),ee=function(t){return t.Literal="Literal",t.Call="Call",t.GetPath="GetPath",t.GetVar="GetVar",t.Concat="Concat",t.HasBlock="HasBlock",t.HasBlockParams="HasBlockParams",t}({});function Za(t,e=!1){if(t==null)return{expr:{type:ee.Literal,value:t},kind:Z.AppendExpr,trusted:!1};if(Array.isArray(t))switch(t[0]){case le.Literal:return{expr:{type:ee.Literal,value:t[1]},kind:Z.AppendExpr,trusted:!1};case le.Get:return ms(Ka(t[1],t[2]),e);case le.Concat:return{expr:{type:ee.Concat,params:Ze(t.slice(1))},kind:Z.AppendExpr,trusted:e};case le.HasBlock:return{expr:{type:ee.HasBlock,name:t[1]},kind:Z.AppendExpr,trusted:e};case le.HasBlockParams:return{expr:{type:ee.HasBlockParams,name:t[1]},kind:Z.AppendExpr,trusted:e};default:if(eo(t))return{expr:to(t),kind:Z.AppendExpr,trusted:e};throw new Error(`Unexpected array in expression position (wasn't a tuple expression and ${t[0]} isn't wrapped in parens, so it isn't a call): ${JSON.stringify(t)}`)}else{if(typeof t=="object")throw je(t);switch(typeof t){case"string":return ms(fr(t),e);case"boolean":case"number":return{expr:{type:ee.Literal,value:t},kind:Z.AppendExpr,trusted:!0};default:throw je(t)}}}function br(t){if(t==null)return{type:ee.Literal,value:t};if(Array.isArray(t))switch(t[0]){case le.Literal:return{type:ee.Literal,value:t[1]};case le.Get:return Ka(t[1],t[2]);case le.Concat:return{type:ee.Concat,params:Ze(t.slice(1))};case le.HasBlock:return{type:ee.HasBlock,name:t[1]};case le.HasBlockParams:return{type:ee.HasBlockParams,name:t[1]};default:if(eo(t))return to(t);throw new Error(`Unexpected array in expression position (wasn't a tuple expression and ${t[0]} isn't wrapped in parens, so it isn't a call): ${JSON.stringify(t)}`)}else{if(typeof t=="object")throw je(t);switch(typeof t){case"string":return fr(t);case"boolean":case"number":return{type:ee.Literal,value:t};default:throw je(t)}}}function eo(t){return typeof t[0]=="string"&&t[0][0]==="("}function Ze(t){return t.map(br)}function Gt(t){return t===null?null:gs(t,br)}function to(t){switch(t.length){case 1:return{type:ee.Call,head:mr(t[0]),params:null,hash:null};case 2:return Array.isArray(t[1])?{type:ee.Call,head:mr(t[0]),params:Ze(t[1]),hash:null}:{type:ee.Call,head:mr(t[0]),params:null,hash:Gt(t[1])};case 3:return{type:ee.Call,head:mr(t[0]),params:Ze(t[1]),hash:Gt(t[2])}}}class ro{_freeVariables=[];_symbols=["this"];top=this;toSymbols(){return this._symbols.slice(1)}toUpvars(){return this._freeVariables}freeVar(e){return ys(this._freeVariables,e)}block(e){return this.symbol(e)}arg(e){return ys(this._symbols,e)}local(e){throw new Error(`No local ${e} was found. Maybe you meant ^${e} for upvar, or !${e} for keyword?`)}this(){return 0}hasLocal(e){return!1}symbol(e){return ys(this._symbols,e)}child(e){return new bs(this,e)}}class bs{locals=Re();constructor(e,n){this.parent=e;for(let s of n)this.locals[s]=e.top.symbol(s)}get paramSymbols(){return Ci(this.locals)}get top(){return this.parent.top}freeVar(e){return this.parent.freeVar(e)}arg(e){return this.parent.arg(e)}block(e){return this.parent.block(e)}local(e){return e in this.locals?this.locals[e]:this.parent.local(e)}this(){return this.parent.this()}hasLocal(e){return e in this.locals||this.parent.hasLocal(e)}child(e){return new bs(this,e)}}function ys(t,e){let n=t.indexOf(e);return n===-1&&(n=t.length,t.push(e)),n}function no(t){return new Error(`unimplemented ${t}`)}function eh(t,e){let n=[];return t.forEach(s=>n.push(...Vr(Wa(s),e))),n}function th(t,e){let n=[];return t.forEach(s=>n.push(...Vr(s,e))),n}function Vr(t,e=new ro){switch(t.kind){case Z.AppendPath:return[[t.trusted?y.TrustingAppend:y.Append,Es(t.path,e)]];case Z.AppendExpr:return[[t.trusted?y.TrustingAppend:y.Append,Pt(t.expr,t.trusted?"TrustedAppend":"Append",e)]];case Z.Call:{let{head:n,params:s,hash:i,trusted:l}=t,u=s?jr(s,e):null,p=i?vs(i,e):null,m=Ss(n,l?Ie.ResolveAsHelperHead:Ie.ResolveAsComponentOrHelperHead,e);return[[l?y.TrustingAppend:y.Append,[y.Call,m,u,p]]]}case Z.Literal:return[[y.Append,t.value]];case Z.Comment:return[[y.Comment,t.value]];case Z.Block:{let n=function(u,p,m){let S=[],_=[];for(const[N,H]of Object.entries(u))if(S.push(N),N==="default"){let J=m.child(p||[]);_.push(Gr(H,J,J.paramSymbols))}else _.push(Gr(H,m,[]));return[S,_]}(t.blocks,t.blockParams,e),s=vs(t.hash,e),i=jr(t.params,e),l=Ss(t.head,Ie.ResolveAsComponentHead,e);return[[y.Block,l,i,s,n]]}case Z.Keyword:return[ah(t,e)];case Z.Element:return function({name:n,attrs:s,block:i},l){let u=[oh(s)?[y.OpenElementWithSplat,n]:[y.OpenElement,n]];if(s){let{params:p,args:m}=function(S,_){let N=[],H=[],J=[];for(const[se,we]of Object.entries(S))we===Z.Splat?N.push([y.AttrSplat,_.block("&attrs")]):se[0]==="@"?(H.push(se),J.push(Pt(we,"Strict",_))):N.push(...ch(se,we,lh(se),_));return{params:N,args:ae(H)&&ae(J)?[H,J]:null}}(s,l);u.push(...p),U(m===null,"Can't pass args to a simple element")}if(u.push([y.FlushElement]),Array.isArray(i))i.forEach(p=>u.push(...Vr(p,l)));else if(i!==null)throw je(i);return u.push([y.CloseElement]),u}(t,e);case Z.Modifier:throw no("modifier");case Z.DynamicComponent:throw no("dynamic component");default:throw je(t)}}function rh(t,...e){let n=t.reduce((s,i,l)=>s+`${i}${e[l]?String(e[l]):""}`,"");return[le.Literal,n]}function nh(t,...e){let n=t.reduce((s,i,l)=>s+`${i}${e[l]?String(e[l]):""}`,"");return[le.Comment,n]}function sh(t){return String.fromCharCode(parseInt(t,16))}const ih=`
`;function ah(t,e){let{name:n}=t,s=jr(t.params,e),i=e.child(t.blockParams||[]),l=Gr(t.blocks.default,i,i.paramSymbols),u=t.blocks.else?Gr(t.blocks.else,e,[]):null;switch(n){case"let":return[y.Let,bt(s,"let requires params"),l];case"if":return[y.If,bt(s,"if requires params")[0],l,u];case"each":{let p=t.hash?t.hash.key:null,m=p?Pt(p,"Strict",e):null;return[y.Each,bt(s,"if requires params")[0],m,l,u]}default:throw new Error("unimplemented keyword")}}function oh(t){return t!==null&&Object.keys(t).some(e=>t[e]===Z.Splat)}function lh(t){if(t==="xmlns")return Tn;let e=/^([^:]*):([^:]*)$/u.exec(t);if(e===null)return null;switch(e[1]){case"xlink":return Ei;case"xml":return vi;case"xmlns":return Tn}return null}function ch(t,e,n,s){if(e.type===ee.Literal){let i=e.value;if(i===!1)return[];if(i===!0)return[[y.StaticAttr,t,"",n??void 0]];if(typeof i=="string")return[[y.StaticAttr,t,i,n??void 0]];throw new Error(`Unexpected/unimplemented literal attribute ${JSON.stringify(i)}`)}return[[y.DynamicAttr,t,Pt(e,"AttrValue",s),n??void 0]]}function so(t,e){switch(t){case"Append":return e?"AppendBare":"AppendInvoke";case"TrustedAppend":return e?"TrustedAppendBare":"TrustedAppendInvoke";case"AttrValue":return e?"AttrValueBare":"AttrValueInvoke";default:return t}}function Pt(t,e,n){switch(t.type){case ee.GetPath:return Es(t,n);case ee.GetVar:return yr(t.variable,so(e,!0),n);case ee.Concat:return[y.Concat,uh(t.params,n)];case ee.Call:{let s=jr(t.params,n),i=vs(t.hash,n),l=Ss(t.head,e==="Strict"?"SubExpression":so(e,!1),n);return[y.Call,l,s,i]}case ee.HasBlock:return[y.HasBlock,yr({kind:De.Block,name:t.name,mode:"loose"},Ie.Strict,n)];case ee.HasBlockParams:return[y.HasBlockParams,yr({kind:De.Block,name:t.name,mode:"loose"},Ie.Strict,n)];case ee.Literal:return t.value===void 0?[y.Undefined]:t.value;default:je(t)}}function Ss(t,e,n){return t.type===ee.GetVar?yr(t.variable,e,n):Es(t,n)}function Es(t,e){return yr(t.path.head,Ie.Strict,e,t.path.tail)}function yr(t,e,n,s){let i,l=y.GetSymbol;return t.kind===De.Free?(l=e==="Strict"?y.GetStrictKeyword:e==="AppendBare"||e==="AppendInvoke"?y.GetFreeAsComponentOrHelperHead:e==="TrustedAppendBare"||e==="TrustedAppendInvoke"||e==="AttrValueBare"||e==="AttrValueInvoke"||e==="SubExpression"?y.GetFreeAsHelperHead:function(u){switch(u){case Ie.Strict:return y.GetStrictKeyword;case Ie.ResolveAsComponentOrHelperHead:return y.GetFreeAsComponentOrHelperHead;case Ie.ResolveAsHelperHead:return y.GetFreeAsHelperHead;case Ie.ResolveAsModifierHead:return y.GetFreeAsModifierHead;case Ie.ResolveAsComponentHead:return y.GetFreeAsComponentHead;default:return Bt(u)}}(e),i=n.freeVar(t.name)):(l=y.GetSymbol,i=function(u,p,m){switch(u){case De.Arg:return p.arg(m);case De.Block:return p.block(m);case De.Local:return p.local(m);case De.This:return p.this();default:return Bt(u)}}(t.kind,n,t.name)),s===void 0||s.length===0?[l,i]:(U(l!==y.GetStrictKeyword,"[BUG] keyword with a path"),[l,i,s])}function jr(t,e){return t!==null&&ae(t)?t.map(n=>Pt(n,"Strict",e)):null}function uh(t,e){return t.map(n=>Pt(n,"AttrValue",e))}function vs(t,e){if(t===null)return null;let n=[[],[]];for(const[s,i]of Object.entries(t))n[0].push(s),n[1].push(Pt(i,"Strict",e));return n}function Gr(t,e,n=[]){return[th(t,e),n]}class hh extends L("Template").fields(){}class ph extends L("InElement").fields(){}class io extends L("Not").fields(){}class ao extends L("If").fields(){}class dh extends L("IfInline").fields(){}class mh extends L("Each").fields(){}class fh extends L("Let").fields(){}class gh extends L("WithDynamicVars").fields(){}class bh extends L("GetDynamicVar").fields(){}class yh extends L("Log").fields(){}class oo extends L("InvokeComponent").fields(){}class Sh extends L("NamedBlocks").fields(){}class Eh extends L("NamedBlock").fields(){}class vh extends L("AppendTrustedHTML").fields(){}class qr extends L("AppendTextNode").fields(){}class kh extends L("AppendComment").fields(){}class wh extends L("Component").fields(){}class _h extends L("StaticAttr").fields(){}class Ph extends L("DynamicAttr").fields(){}class Th extends L("SimpleElement").fields(){}class Ah extends L("ElementParameters").fields(){}class Ch extends L("Yield").fields(){}class Nh extends L("Debugger").fields(){}class lo extends L("CallExpression").fields(){}class xh extends L("Modifier").fields(){}class Lh extends L("InvokeBlock").fields(){}class Oh extends L("SplatAttr").fields(){}class Bh extends L("PathExpression").fields(){}class Ih extends L("Missing").fields(){}class Dh extends L("InterpolateExpression").fields(){}class Hh extends L("HasBlock").fields(){}class Rh extends L("HasBlockParams").fields(){}class Mh extends L("Curry").fields(){}class Fh extends L("Positional").fields(){}class co extends L("NamedArguments").fields(){}class uo extends L("NamedArgument").fields(){}class Uh extends L("Args").fields(){}class $h extends L("Tail").fields(){}class ks{constructor(e){this.list=e}toArray(){return this.list}map(e){let n=_n(this.list,e);return new ks(n)}filter(e){let n=[];for(let s of this.list)e(s)&&n.push(s);return Sr(n)}toPresentArray(){return this.list}into({ifPresent:e}){return e(this)}}class zr{list=[];map(e){return new zr}filter(e){return new zr}toArray(){return this.list}toPresentArray(){return null}into({ifEmpty:e}){return e()}}function Sr(t){return ae(t)?new ks(t):new zr}class ws{static all(...e){let n=[];for(let s of e){if(s.isErr)return s.cast();n.push(s.value)}return $(n)}}const Se=ws;class Vh extends ws{isOk=!0;isErr=!1;constructor(e){super(),this.value=e}expect(e){return this.value}ifOk(e){return e(this.value),this}andThen(e){return e(this.value)}mapOk(e){return $(e(this.value))}ifErr(e){return this}mapErr(e){return this}}class ho extends ws{isOk=!1;isErr=!0;constructor(e){super(),this.reason=e}expect(e){throw new Error(e||"expected an Ok, got Err")}andThen(e){return this.cast()}mapOk(e){return this.cast()}ifOk(e){return this}mapErr(e){return q(e(this.reason))}ifErr(e){return e(this.reason),this}cast(){return this}}function $(t){return new Vh(t)}function q(t){return new ho(t)}class Tt{constructor(e=[]){this.items=e}add(e){this.items.push(e)}toArray(){let e=this.items.filter(n=>n instanceof ho)[0];return e!==void 0?e.cast():$(this.items.map(n=>n.value))}toOptionalList(){return this.toArray().mapOk(e=>Sr(e))}}function Wr(t){return t.type==="Path"&&t.ref.type==="Free"&&t.ref.name in ir?new Qe.CallExpression({callee:t,args:Qe.Args.empty(t.loc),loc:t.loc}):t}const z=new class{visit(t,e){switch(t.type){case"Literal":return $(this.Literal(t));case"Keyword":return $(this.Keyword(t));case"Interpolate":return this.Interpolate(t,e);case"Path":return this.PathExpression(t);case"Call":{let n=tp.translate(t,e);return n!==null?n:this.CallExpression(t,e)}}}visitList(t,e){return new Tt(t.map(n=>z.visit(n,e))).toOptionalList()}PathExpression(t){let e=this.VariableReference(t.ref),{tail:n}=t;if(ae(n)){let s=n[0].loc.extend(Ke(n).loc);return $(new Bh({loc:t.loc,head:e,tail:new $h({loc:s,members:n})}))}return $(e)}VariableReference(t){return t}Literal(t){return t}Keyword(t){return t}Interpolate(t,e){let n=t.parts.map(Wr);return z.visitList(n,e).mapOk(s=>new Dh({loc:t.loc,parts:s}))}CallExpression(t,e){if(t.callee.type==="Call")throw new Error("unimplemented: subexpression at the head of a subexpression");return Se.all(z.visit(t.callee,e),z.Args(t.args,e)).mapOk(([n,s])=>new lo({loc:t.loc,callee:n,args:s}))}Args({positional:t,named:e,loc:n},s){return Se.all(this.Positional(t,s),this.NamedArguments(e,s)).mapOk(([i,l])=>new Uh({loc:n,positional:i,named:l}))}Positional(t,e){return z.visitList(t.exprs,e).mapOk(n=>new Fh({loc:t.loc,list:n}))}NamedArguments(t,e){let n=t.entries.map(s=>{let i=Wr(s.value);return z.visit(i,e).mapOk(l=>new uo({loc:s.loc,key:s.name,value:l}))});return new Tt(n).toOptionalList().mapOk(s=>new co({loc:t.loc,entries:s}))}};class jh{types;constructor(e,n,s){this.keyword=e,this.delegate=s;let i=new Set;for(let l of Gh[n])i.add(l);this.types=i}match(e){if(!this.types.has(e.type))return!1;let n=Kr(e);return n!==null&&n.type==="Path"&&n.ref.type==="Free"&&n.ref.name===this.keyword}translate(e,n){if(this.match(e)){let s=Kr(e);return s!==null&&s.type==="Path"&&s.tail.length>0?q(k(`The \`${this.keyword}\` keyword was used incorrectly. It was used as \`${s.loc.asString()}\`, but it cannot be used with additional path segments. 

Error caused by`,e.loc)):this.delegate.assert(e,n).andThen(i=>this.delegate.translate({node:e,state:n},i))}return null}}const Gh={Call:["Call"],Block:["InvokeBlock"],Append:["AppendContent"],Modifier:["ElementModifier"]};function Kr(t){switch(t.type){case"Path":return t;case"AppendContent":return Kr(t.value);case"Call":case"InvokeBlock":case"ElementModifier":return t.callee;default:return null}}class qh{_keywords=[];_type;constructor(e){this._type=e}kw(e,n){return this._keywords.push(function(s,i,l){return new jh(s,i,l)}(e,this._type,n)),this}translate(e,n){for(let i of this._keywords){let l=i.translate(e,n);if(l!==null)return l}let s=Kr(e);if(s&&s.type==="Path"&&s.ref.type==="Free"&&zn(s.ref.name)){let{name:i}=s.ref,l=this._type,u=ir[i];if(!u.includes(l))return q(k(`The \`${i}\` keyword was used incorrectly. It was used as ${zh[l]}, but its valid usages are:

${function(p,m){return m.map(S=>{switch(S){case"Append":return`- As an append statement, as in: {{${p}}}`;case"Block":return`- As a block statement, as in: {{#${p}}}{{/${p}}}`;case"Call":return`- As an expression, as in: (${p})`;case"Modifier":return`- As a modifier, as in: <div {{${p}}}></div>`;default:return Bt(S)}}).join(`

`)}(i,u)}

Error caused by`,e.loc))}return null}}const zh={Append:"an append statement",Block:"a block statement",Call:"a call expression",Modifier:"a modifier"};function Jr(t){return new qh(t)}function qt({assert:t,translate:e}){return{assert:t,translate:({node:n,state:s},i)=>e({node:n,state:s},i).mapOk(l=>new qr({text:l,loc:n.loc}))}}const Wh={[ye.Component]:"component",[ye.Helper]:"helper",[ye.Modifier]:"modifier"};function Yr(t){return(e,n)=>{let s=Wh[t],i=t===ye.Component,{args:l}=e,u=l.nth(0);if(u===null)return q(k(`(${s}) requires a ${s} definition or identifier as its first positional parameter, did not receive any parameters.`,l.loc));if(u.type==="Literal"){if(i&&n.isStrict)return q(k(`(${s}) cannot resolve string values in strict mode templates`,e.loc));if(!i)return q(k(`(${s}) cannot resolve string values, you must pass a ${s} definition directly`,e.loc))}return l=new Qe.Args({positional:new Qe.PositionalArguments({exprs:l.positional.exprs.slice(1),loc:l.positional.loc}),named:l.named,loc:l.loc}),$({definition:u,args:l})}}function Kh(t){return({node:e,state:n},{definition:s,args:i})=>{let l=z.visit(s,n),u=z.Args(i,n);return Se.all(l,u).mapOk(([p,m])=>new Mh({loc:e.loc,curriedType:t,definition:p,args:m}))}}function _s(t){return{assert:Yr(t),translate:Kh(t)}}const po={assert:function(t){let e=t.type==="AppendContent"?t.value:t,n=e.type==="Call"?e.args.named:null,s=e.type==="Call"?e.args.positional:null;if(n&&!n.isEmpty())return q(k("(-get-dynamic-vars) does not take any named arguments",t.loc));let i=s?.nth(0);return i?s&&s.size>1?q(k("(-get-dynamic-vars) only receives one positional arg",t.loc)):$(i):q(k("(-get-dynamic-vars) requires a var name to get",t.loc))},translate:function({node:t,state:e},n){return z.visit(n,e).mapOk(s=>new bh({name:s,loc:t.loc}))}};function Jh(t){return e=>{let n=e.type==="AppendContent"?e.value:e,s=n.type==="Call"?n.args.named:null,i=n.type==="Call"?n.args.positional:null;if(s&&!s.isEmpty())return q(k(`(${t}) does not take any named arguments`,n.loc));if(!i||i.isEmpty())return $(ke.synthetic("default"));if(i.exprs.length===1){let l=i.exprs[0];return Qe.isLiteral(l,"string")?$(l.toSlice()):q(k(`(${t}) can only receive a string literal as its first argument`,n.loc))}return q(k(`(${t}) only takes a single positional argument`,n.loc))}}function Yh(t){return({node:e,state:{scope:n}},s)=>$(t==="has-block"?new Hh({loc:e.loc,target:s,symbol:n.allocateBlock(s.chars)}):new Rh({loc:e.loc,target:s,symbol:n.allocateBlock(s.chars)}))}function Xr(t){return{assert:Jh(t),translate:Yh(t)}}function Xh(t){return e=>{let n=t==="unless",s=e.type==="AppendContent"?e.value:e,i=s.type==="Call"?s.args.named:null,l=s.type==="Call"?s.args.positional:null;if(i&&!i.isEmpty())return q(k(`(${t}) cannot receive named parameters, received ${i.entries.map(S=>S.name.chars).join(", ")}`,e.loc));let u=l?.nth(0);if(!l||!u)return q(k(`When used inline, (${t}) requires at least two parameters 1. the condition that determines the state of the (${t}), and 2. the value to return if the condition is ${n?"false":"true"}. Did not receive any parameters`,e.loc));let p=l.nth(1),m=l.nth(2);return p===null?q(k(`When used inline, (${t}) requires at least two parameters 1. the condition that determines the state of the (${t}), and 2. the value to return if the condition is ${n?"false":"true"}. Received only one parameter, the condition`,e.loc)):l.size>3?q(k(`When used inline, (${t}) can receive a maximum of three positional parameters 1. the condition that determines the state of the (${t}), 2. the value to return if the condition is ${n?"false":"true"}, and 3. the value to return if the condition is ${n?"true":"false"}. Received ${l?.size??0} parameters`,e.loc)):$({condition:u,truthy:p,falsy:m})}}function Qh(t){let e=t==="unless";return({node:n,state:s},{condition:i,truthy:l,falsy:u})=>{let p=z.visit(i,s),m=z.visit(l,s),S=u?z.visit(u,s):$(null);return Se.all(p,m,S).mapOk(([_,N,H])=>(e&&(_=new io({value:_,loc:n.loc})),new dh({loc:n.loc,condition:_,truthy:N,falsy:H})))}}function Qr(t){return{assert:Xh(t),translate:Qh(t)}}const mo={assert:function(t){let{args:{named:e,positional:n}}=t;return e&&!e.isEmpty()?q(k("(log) does not take any named arguments",t.loc)):$(n)},translate:function({node:t,state:e},n){return z.Positional(n,e).mapOk(s=>new yh({positional:s,loc:t.loc}))}},Zh=Jr("Append").kw("has-block",qt(Xr("has-block"))).kw("has-block-params",qt(Xr("has-block-params"))).kw("-get-dynamic-var",qt(po)).kw("log",qt(mo)).kw("if",qt(Qr("if"))).kw("unless",qt(Qr("unless"))).kw("yield",{assert(t){let{args:e}=t;if(e.named.isEmpty())return $({target:or.SourceSpan.synthetic("default").toSlice(),positional:e.positional});{let n=e.named.get("to");return e.named.size>1||n===null?q(k("yield only takes a single named argument: 'to'",e.named.loc)):Qe.isLiteral(n,"string")?$({target:n.toSlice(),positional:e.positional}):q(k("you can only yield to a literal string value",n.loc))}},translate:({node:t,state:e},{target:n,positional:s})=>z.Positional(s,e).mapOk(i=>new Ch({loc:t.loc,target:n,to:e.scope.allocateBlock(n.chars),positional:i}))}).kw("debugger",{assert(t){let{args:e}=t,{positional:n}=e;return e.isEmpty()?$(void 0):n.isEmpty()?q(k("debugger does not take any named arguments",t.loc)):q(k("debugger does not take any positional arguments",t.loc))},translate:({node:t,state:{scope:e}})=>(e.setHasDebugger(),$(new Nh({loc:t.loc,scope:e})))}).kw("component",{assert:Yr(ye.Component),translate({node:t,state:e},{definition:n,args:s}){let i=z.visit(n,e),l=z.Args(s,e);return Se.all(i,l).mapOk(([u,p])=>new oo({loc:t.loc,definition:u,args:p,blocks:null}))}}).kw("helper",{assert:Yr(ye.Helper),translate({node:t,state:e},{definition:n,args:s}){let i=z.visit(n,e),l=z.Args(s,e);return Se.all(i,l).mapOk(([u,p])=>{let m=new lo({callee:u,args:p,loc:t.loc});return new qr({loc:t.loc,text:m})})}}),ep=Jr("Block").kw("in-element",{assert(t){let{args:e}=t,n=e.get("guid");if(n)return q(k("Cannot pass `guid` to `{{#in-element}}`",n.loc));let s=e.get("insertBefore"),i=e.nth(0);return i===null?q(k("{{#in-element}} requires a target element as its first positional parameter",e.loc)):$({insertBefore:s,destination:i})},translate({node:t,state:e},{insertBefore:n,destination:s}){let i=t.blocks.get("default"),l=Pe.NamedBlock(i,e),u=z.visit(s,e);return Se.all(l,u).andThen(([p,m])=>n?z.visit(n,e).mapOk(S=>({body:p,destination:m,insertBefore:S})):$({body:p,destination:m,insertBefore:new Ih({loc:t.callee.loc.collapse("end")})})).mapOk(({body:p,destination:m,insertBefore:S})=>new ph({loc:t.loc,block:p,insertBefore:S,guid:e.generateUniqueCursor(),destination:m}))}}).kw("if",{assert(t){let{args:e}=t;if(!e.named.isEmpty())return q(k(`{{#if}} cannot receive named parameters, received ${e.named.entries.map(s=>s.name.chars).join(", ")}`,t.loc));if(e.positional.size>1)return q(k(`{{#if}} can only receive one positional parameter in block form, the conditional value. Received ${e.positional.size} parameters`,t.loc));let n=e.nth(0);return n===null?q(k("{{#if}} requires a condition as its first positional parameter, did not receive any parameters",t.loc)):$({condition:n})},translate({node:t,state:e},{condition:n}){let s=t.blocks.get("default"),i=t.blocks.get("else"),l=z.visit(n,e),u=Pe.NamedBlock(s,e),p=i?Pe.NamedBlock(i,e):$(null);return Se.all(l,u,p).mapOk(([m,S,_])=>new ao({loc:t.loc,condition:m,block:S,inverse:_}))}}).kw("unless",{assert(t){let{args:e}=t;if(!e.named.isEmpty())return q(k(`{{#unless}} cannot receive named parameters, received ${e.named.entries.map(s=>s.name.chars).join(", ")}`,t.loc));if(e.positional.size>1)return q(k(`{{#unless}} can only receive one positional parameter in block form, the conditional value. Received ${e.positional.size} parameters`,t.loc));let n=e.nth(0);return n===null?q(k("{{#unless}} requires a condition as its first positional parameter, did not receive any parameters",t.loc)):$({condition:n})},translate({node:t,state:e},{condition:n}){let s=t.blocks.get("default"),i=t.blocks.get("else"),l=z.visit(n,e),u=Pe.NamedBlock(s,e),p=i?Pe.NamedBlock(i,e):$(null);return Se.all(l,u,p).mapOk(([m,S,_])=>new ao({loc:t.loc,condition:new io({value:m,loc:t.loc}),block:S,inverse:_}))}}).kw("each",{assert(t){let{args:e}=t;if(!e.named.entries.every(i=>i.name.chars==="key"))return q(k(`{{#each}} can only receive the 'key' named parameter, received ${e.named.entries.filter(i=>i.name.chars!=="key").map(i=>i.name.chars).join(", ")}`,e.named.loc));if(e.positional.size>1)return q(k(`{{#each}} can only receive one positional parameter, the collection being iterated. Received ${e.positional.size} parameters`,e.positional.loc));let n=e.nth(0),s=e.get("key");return n===null?q(k("{{#each}} requires an iterable value to be passed as its first positional parameter, did not receive any parameters",e.loc)):$({value:n,key:s})},translate({node:t,state:e},{value:n,key:s}){let i=t.blocks.get("default"),l=t.blocks.get("else"),u=z.visit(n,e),p=s?z.visit(s,e):$(null),m=Pe.NamedBlock(i,e),S=l?Pe.NamedBlock(l,e):$(null);return Se.all(u,p,m,S).mapOk(([_,N,H,J])=>new mh({loc:t.loc,value:_,key:N,block:H,inverse:J}))}}).kw("let",{assert(t){let{args:e}=t;return e.named.isEmpty()?e.positional.size===0?q(k("{{#let}} requires at least one value as its first positional parameter, did not receive any parameters",e.positional.loc)):t.blocks.get("else")?q(k("{{#let}} cannot receive an {{else}} block",e.positional.loc)):$({positional:e.positional}):q(k(`{{#let}} cannot receive named parameters, received ${e.named.entries.map(n=>n.name.chars).join(", ")}`,e.named.loc))},translate({node:t,state:e},{positional:n}){let s=t.blocks.get("default"),i=z.Positional(n,e),l=Pe.NamedBlock(s,e);return Se.all(i,l).mapOk(([u,p])=>new fh({loc:t.loc,positional:u,block:p}))}}).kw("-with-dynamic-vars",{assert:t=>$({named:t.args.named}),translate({node:t,state:e},{named:n}){let s=t.blocks.get("default"),i=z.NamedArguments(n,e),l=Pe.NamedBlock(s,e);return Se.all(i,l).mapOk(([u,p])=>new gh({loc:t.loc,named:u,block:p}))}}).kw("component",{assert:Yr(ye.Component),translate({node:t,state:e},{definition:n,args:s}){let i=z.visit(n,e),l=z.Args(s,e),u=Pe.NamedBlocks(t.blocks,e);return Se.all(i,l,u).mapOk(([p,m,S])=>new oo({loc:t.loc,definition:p,args:m,blocks:S}))}}),tp=Jr("Call").kw("has-block",Xr("has-block")).kw("has-block-params",Xr("has-block-params")).kw("-get-dynamic-var",po).kw("log",mo).kw("if",Qr("if")).kw("unless",Qr("unless")).kw("component",_s(ye.Component)).kw("helper",_s(ye.Helper)).kw("modifier",_s(ye.Modifier)),rp=Jr("Modifier"),At="http://www.w3.org/1999/xlink",Ps="http://www.w3.org/XML/1998/namespace",fo="http://www.w3.org/2000/xmlns/",np={"xlink:actuate":At,"xlink:arcrole":At,"xlink:href":At,"xlink:role":At,"xlink:show":At,"xlink:title":At,"xlink:type":At,"xml:base":Ps,"xml:lang":Ps,"xml:space":Ps,xmlns:fo,"xmlns:xlink":fo},sp={div:sr.div,span:sr.span,p:sr.p,a:sr.a},ip=["div","span","p","a"];function go(t){return typeof t=="string"?t:ip[t]}const ap={class:ot.class,id:ot.id,value:ot.value,name:ot.name,type:ot.type,style:ot.style,href:ot.href},op=["class","id","value","name","type","style","href"];function bo(t){return ap[t]??t}function zt(t){return typeof t=="string"?t:op[t]}class yo{delegate;constructor(e,n,s){this.element=e,this.state=s,this.delegate=n}toStatement(){return this.prepare().andThen(e=>this.delegate.toStatement(this,e))}attr(e){let n=e.name,s=e.value,i=(l=n.chars,np[l]||void 0);var l;return Qe.isLiteral(s,"string")?$(new _h({loc:e.loc,name:n,value:s.toSlice(),namespace:i,kind:{component:this.delegate.dynamicFeatures}})):z.visit(Wr(s),this.state).mapOk(u=>{let p=e.trusting;return new Ph({loc:e.loc,name:n,value:u,namespace:i,kind:{trusting:p,component:this.delegate.dynamicFeatures}})})}modifier(e){let n=rp.translate(e,this.state);if(n!==null)return n;let s=z.visit(e.callee,this.state),i=z.Args(e.args,this.state);return Se.all(s,i).mapOk(([l,u])=>new xh({loc:e.loc,callee:l,args:u}))}attrs(){let e=new Tt,n=new Tt,s=null,i=this.element.attrs.filter(l=>l.type==="SplatAttr").length===0;for(let l of this.element.attrs)l.type==="SplatAttr"?e.add($(new Oh({loc:l.loc,symbol:this.state.scope.allocateBlock("attrs")}))):l.name.chars==="type"&&i?s=l:e.add(this.attr(l));for(let l of this.element.componentArgs)n.add(this.delegate.arg(l,this));return s&&e.add(this.attr(s)),Se.all(n.toArray(),e.toArray()).mapOk(([l,u])=>({attrs:u,args:new co({loc:Dr(l,or.SourceSpan.NON_EXISTENT),entries:Sr(l)})}))}prepare(){let e=this.attrs(),n=new Tt(this.element.modifiers.map(s=>this.modifier(s))).toArray();return Se.all(e,n).mapOk(([s,i])=>{let{attrs:l,args:u}=s,p=[...l,...i];return{args:u,params:new Ah({loc:Dr(p,or.SourceSpan.NON_EXISTENT),body:Sr(p)})}})}}class lp{dynamicFeatures=!0;constructor(e,n){this.tag=e,this.element=n}arg(e,{state:n}){let s=e.name;return z.visit(Wr(e.value),n).mapOk(i=>new uo({loc:e.loc,key:s,value:i}))}toStatement(e,{args:n,params:s}){let{element:i,state:l}=e;return this.blocks(l).mapOk(u=>new wh({loc:i.loc,tag:this.tag,params:s,args:n,blocks:u}))}blocks(e){return Pe.NamedBlocks(this.element.blocks,e)}}class cp{constructor(e,n,s){this.tag=e,this.element=n,this.dynamicFeatures=s}isComponent=!1;arg(e){return q(k(`${e.name.chars} is not a valid attribute name. @arguments are only allowed on components, but the tag for this element (\`${this.tag.chars}\`) is a regular, non-component HTML element.`,e.loc))}toStatement(e,{params:n}){let{state:s,element:i}=e;return Pe.visitList(this.element.body,s).mapOk(l=>new Th({loc:i.loc,tag:this.tag,params:n,body:l.toArray(),dynamicFeatures:this.dynamicFeatures}))}}const Pe=new class{visitList(t,e){return new Tt(t.map(n=>Pe.visit(n,e))).toOptionalList().mapOk(n=>n.filter(s=>s!==null))}visit(t,e){switch(t.type){case"GlimmerComment":return $(null);case"AppendContent":return this.AppendContent(t,e);case"HtmlText":return $(this.TextNode(t));case"HtmlComment":return $(this.HtmlComment(t));case"InvokeBlock":return this.InvokeBlock(t,e);case"InvokeComponent":return this.Component(t,e);case"SimpleElement":return this.SimpleElement(t,e)}}InvokeBlock(t,e){let n=ep.translate(t,e);if(n!==null)return n;let s=z.visit(t.callee,e),i=z.Args(t.args,e);return Se.all(s,i).andThen(([l,u])=>this.NamedBlocks(t.blocks,e).mapOk(p=>new Lh({loc:t.loc,head:l,args:u,blocks:p})))}NamedBlocks(t,e){return new Tt(t.blocks.map(n=>this.NamedBlock(n,e))).toArray().mapOk(n=>new Sh({loc:t.loc,blocks:Sr(n)}))}NamedBlock(t,e){return e.visitBlock(t.block).mapOk(n=>new Eh({loc:t.loc,name:t.name,body:n.toArray(),scope:t.block.scope}))}SimpleElement(t,e){return new yo(t,new cp(t.tag,t,function({attrs:n,modifiers:s}){return s.length>0||!!n.filter(i=>i.type==="SplatAttr")[0]}(t)),e).toStatement()}Component(t,e){return z.visit(t.callee,e).andThen(n=>new yo(t,new lp(n,t),e).toStatement())}AppendContent(t,e){let n=Zh.translate(t,e);return n!==null?n:z.visit(t.value,e).mapOk(s=>t.trusting?new vh({loc:t.loc,html:s}):new qr({loc:t.loc,text:s}))}TextNode(t){return new qr({loc:t.loc,text:new Qe.LiteralExpression({loc:t.loc,value:t.chars})})}HtmlComment(t){return new kh({loc:t.loc,value:t.text})}};class up{_currentScope;_cursorCount=0;constructor(e,n){this.isStrict=n,this._currentScope=e}generateUniqueCursor(){return`%cursor:${this._cursorCount++}%`}get scope(){return this._currentScope}visitBlock(e){let n=this._currentScope;this._currentScope=e.scope;try{return Pe.visitList(e.body,this)}finally{this._currentScope=n}}}var Be=function(t){return t.Value="value",t.Component="component",t.Helper="helper",t.Modifier="modifier",t.ComponentOrHelper="component or helper",t}(Be||{});class hp{static validate(e){return new this(e).validate()}constructor(e){this.template=e}validate(){return this.Statements(this.template.body).mapOk(()=>this.template)}Statements(e){let n=$(null);for(let s of e)n=n.andThen(()=>this.Statement(s));return n}NamedBlocks({blocks:e}){let n=$(null);for(let s of e.toArray())n=n.andThen(()=>this.NamedBlock(s));return n}NamedBlock(e){return this.Statements(e.body)}Statement(e){switch(e.type){case"InElement":return this.InElement(e);case"Debugger":case"AppendComment":return $(null);case"Yield":return this.Yield(e);case"AppendTrustedHTML":return this.AppendTrustedHTML(e);case"AppendTextNode":return this.AppendTextNode(e);case"Component":return this.Component(e);case"SimpleElement":return this.SimpleElement(e);case"InvokeBlock":return this.InvokeBlock(e);case"If":return this.If(e);case"Each":return this.Each(e);case"Let":return this.Let(e);case"WithDynamicVars":return this.WithDynamicVars(e);case"InvokeComponent":return this.InvokeComponent(e)}}Expressions(e){let n=$(null);for(let s of e)n=n.andThen(()=>this.Expression(s));return n}Expression(e,n=e,s){switch(e.type){case"Literal":case"Keyword":case"Missing":case"This":case"Arg":case"Local":case"HasBlock":case"HasBlockParams":case"GetDynamicVar":return $(null);case"PathExpression":return this.Expression(e.head,n,s);case"Free":return this.errorFor(e.name,n,s);case"InterpolateExpression":return this.InterpolateExpression(e,n,s);case"CallExpression":return this.CallExpression(e,n,s??Be.Helper);case"Not":return this.Expression(e.value,n,s);case"IfInline":return this.IfInline(e);case"Curry":return this.Curry(e);case"Log":return this.Log(e)}}Args(e){return this.Positional(e.positional).andThen(()=>this.NamedArguments(e.named))}Positional(e,n){let s=$(null),i=e.list.toArray();return s=i.length===1?this.Expression(i[0],n):this.Expressions(i),s}NamedArguments({entries:e}){let n=$(null);for(let s of e.toArray())n=n.andThen(()=>this.NamedArgument(s));return n}NamedArgument(e){return e.value.type==="CallExpression"?this.Expression(e.value,e,Be.Helper):this.Expression(e.value,e)}ElementParameters({body:e}){let n=$(null);for(let s of e.toArray())n=n.andThen(()=>this.ElementParameter(s));return n}ElementParameter(e){switch(e.type){case"StaticAttr":case"SplatAttr":return $(null);case"DynamicAttr":return this.DynamicAttr(e);case"Modifier":return this.Modifier(e)}}DynamicAttr(e){return e.value.type==="CallExpression"?this.Expression(e.value,e,Be.Helper):this.Expression(e.value,e)}Modifier(e){return this.Expression(e.callee,e,Be.Modifier).andThen(()=>this.Args(e.args))}InElement(e){return this.Expression(e.destination).andThen(()=>this.Expression(e.insertBefore)).andThen(()=>this.NamedBlock(e.block))}Yield(e){return this.Positional(e.positional,e)}AppendTrustedHTML(e){return this.Expression(e.html,e)}AppendTextNode(e){return e.text.type==="CallExpression"?this.Expression(e.text,e,Be.ComponentOrHelper):this.Expression(e.text,e)}Component(e){return this.Expression(e.tag,e,Be.Component).andThen(()=>this.ElementParameters(e.params)).andThen(()=>this.NamedArguments(e.args)).andThen(()=>this.NamedBlocks(e.blocks))}SimpleElement(e){return this.ElementParameters(e.params).andThen(()=>this.Statements(e.body))}InvokeBlock(e){return this.Expression(e.head,e.head,Be.Component).andThen(()=>this.Args(e.args)).andThen(()=>this.NamedBlocks(e.blocks))}If(e){return this.Expression(e.condition,e).andThen(()=>this.NamedBlock(e.block)).andThen(()=>e.inverse?this.NamedBlock(e.inverse):$(null))}Each(e){return this.Expression(e.value,e).andThen(()=>e.key?this.Expression(e.key,e):$(null)).andThen(()=>this.NamedBlock(e.block)).andThen(()=>e.inverse?this.NamedBlock(e.inverse):$(null))}Let(e){return this.Positional(e.positional).andThen(()=>this.NamedBlock(e.block))}WithDynamicVars(e){return this.NamedArguments(e.named).andThen(()=>this.NamedBlock(e.block))}InvokeComponent(e){return this.Expression(e.definition,e,Be.Component).andThen(()=>this.Args(e.args)).andThen(()=>e.blocks?this.NamedBlocks(e.blocks):$(null))}InterpolateExpression(e,n,s){let i=e.parts.toArray();return i.length===1?this.Expression(i[0],n,s):this.Expressions(i)}CallExpression(e,n,s){return this.Expression(e.callee,n,s).andThen(()=>this.Args(e.args))}IfInline(e){return this.Expression(e.condition).andThen(()=>this.Expression(e.truthy)).andThen(()=>e.falsy?this.Expression(e.falsy):$(null))}Curry(e){let n;return n=e.curriedType===ye.Component?Be.Component:e.curriedType===ye.Helper?Be.Helper:Be.Modifier,this.Expression(e.definition,e,n).andThen(()=>this.Args(e.args))}Log(e){return this.Positional(e.positional,e)}errorFor(e,n,s=Be.Value){return q(k(`Attempted to resolve a ${s} in a strict mode template, but that value was not in scope: ${e}`,wt(n)))}}class pp{upvars;symbols;constructor([e,n,s,i]){this.upvars=i,this.symbols=n}format(e){let n=[];for(let s of e[0])n.push(this.formatOpcode(s));return n}formatOpcode(e){if(!Array.isArray(e))return e;switch(e[0]){case y.Append:return["append",this.formatOpcode(e[1])];case y.TrustingAppend:return["trusting-append",this.formatOpcode(e[1])];case y.Block:return["block",this.formatOpcode(e[1]),this.formatParams(e[2]),this.formatHash(e[3]),this.formatBlocks(e[4])];case y.InElement:return["in-element",e[1],this.formatOpcode(e[2]),e[3]?this.formatOpcode(e[3]):void 0];case y.OpenElement:return["open-element",go(e[1])];case y.OpenElementWithSplat:return["open-element-with-splat",go(e[1])];case y.CloseElement:return["close-element"];case y.FlushElement:return["flush-element"];case y.StaticAttr:return["static-attr",zt(e[1]),e[2],e[3]];case y.StaticComponentAttr:return["static-component-attr",zt(e[1]),e[2],e[3]];case y.DynamicAttr:return["dynamic-attr",zt(e[1]),this.formatOpcode(e[2]),e[3]];case y.ComponentAttr:return["component-attr",zt(e[1]),this.formatOpcode(e[2]),e[3]];case y.AttrSplat:return["attr-splat"];case y.Yield:return["yield",e[1],this.formatParams(e[2])];case y.DynamicArg:return["dynamic-arg",e[1],this.formatOpcode(e[2])];case y.StaticArg:return["static-arg",e[1],this.formatOpcode(e[2])];case y.TrustingDynamicAttr:return["trusting-dynamic-attr",zt(e[1]),this.formatOpcode(e[2]),e[3]];case y.TrustingComponentAttr:return["trusting-component-attr",zt(e[1]),this.formatOpcode(e[2]),e[3]];case y.Debugger:return["debugger",e[1]];case y.Comment:return["comment",e[1]];case y.Modifier:return["modifier",this.formatOpcode(e[1]),this.formatParams(e[2]),this.formatHash(e[3])];case y.Component:return["component",this.formatOpcode(e[1]),this.formatElementParams(e[2]),this.formatHash(e[3]),this.formatBlocks(e[4])];case y.HasBlock:return["has-block",this.formatOpcode(e[1])];case y.HasBlockParams:return["has-block-params",this.formatOpcode(e[1])];case y.Curry:return["curry",this.formatOpcode(e[1]),this.formatCurryType(e[2]),this.formatParams(e[3]),this.formatHash(e[4])];case y.Undefined:return["undefined"];case y.Call:return["call",this.formatOpcode(e[1]),this.formatParams(e[2]),this.formatHash(e[3])];case y.Concat:return["concat",this.formatParams(e[1])];case y.GetStrictKeyword:return["get-strict-free",this.upvars[e[1]]];case y.GetFreeAsComponentOrHelperHead:return["GetFreeAsComponentOrHelperHead",this.upvars[e[1]],e[2]];case y.GetFreeAsHelperHead:return["GetFreeAsHelperHead",this.upvars[e[1]],e[2]];case y.GetFreeAsComponentHead:return["GetFreeAsComponentHead",this.upvars[e[1]],e[2]];case y.GetFreeAsModifierHead:return["GetFreeAsModifierHead",this.upvars[e[1]],e[2]];case y.GetSymbol:return e[1]===0?["get-symbol","this",e[2]]:["get-symbol",this.symbols[e[1]-1],e[2]];case y.GetLexicalSymbol:return["get-template-symbol",e[1],e[2]];case y.If:return["if",this.formatOpcode(e[1]),this.formatBlock(e[2]),e[3]?this.formatBlock(e[3]):null];case y.IfInline:return["if-inline"];case y.Not:return["not"];case y.Each:return["each",this.formatOpcode(e[1]),e[2]?this.formatOpcode(e[2]):null,this.formatBlock(e[3]),e[4]?this.formatBlock(e[4]):null];case y.Let:return["let",this.formatParams(e[1]),this.formatBlock(e[2])];case y.Log:return["log",this.formatParams(e[1])];case y.WithDynamicVars:return["-with-dynamic-vars",this.formatHash(e[1]),this.formatBlock(e[2])];case y.GetDynamicVar:return["-get-dynamic-vars",this.formatOpcode(e[1])];case y.InvokeComponent:return["component",this.formatOpcode(e[1]),this.formatParams(e[2]),this.formatHash(e[3]),this.formatBlocks(e[4])]}}formatCurryType(e){switch(e){case ye.Component:return"component";case ye.Helper:return"helper";case ye.Modifier:return"modifier";default:throw Bt(e)}}formatElementParams(e){return e===null?null:e.map(n=>this.formatOpcode(n))}formatParams(e){return e===null?null:e.map(n=>this.formatOpcode(n))}formatHash(e){return e===null?null:e[0].reduce((n,s,i)=>(n[s]=this.formatOpcode(e[1][i]),n),Re())}formatBlocks(e){return e===null?null:e[0].reduce((n,s,i)=>(n[s]=this.formatBlock(e[1][i]),n),Re())}formatBlock(e){return{statements:e[0].map(n=>this.formatOpcode(n)),parameters:e[1]}}}const W=new class{expr(t){switch(t.type){case"Missing":return;case"Literal":return this.Literal(t);case"Keyword":return this.Keyword(t);case"CallExpression":return this.CallExpression(t);case"PathExpression":return this.PathExpression(t);case"Arg":return[y.GetSymbol,t.symbol];case"Local":return this.Local(t);case"This":return[y.GetSymbol,0];case"Free":return[t.resolution.resolution(),t.symbol];case"HasBlock":return this.HasBlock(t);case"HasBlockParams":return this.HasBlockParams(t);case"Curry":return this.Curry(t);case"Not":return this.Not(t);case"IfInline":return this.IfInline(t);case"InterpolateExpression":return this.InterpolateExpression(t);case"GetDynamicVar":return this.GetDynamicVar(t);case"Log":return this.Log(t)}}Literal({value:t}){return t===void 0?[y.Undefined]:t}Missing(){}HasBlock({symbol:t}){return[y.HasBlock,[y.GetSymbol,t]]}HasBlockParams({symbol:t}){return[y.HasBlockParams,[y.GetSymbol,t]]}Curry({definition:t,curriedType:e,args:n}){return[y.Curry,W.expr(t),e,W.Positional(n.positional),W.NamedArguments(n.named)]}Local({isTemplateLocal:t,symbol:e}){return[t?y.GetLexicalSymbol:y.GetSymbol,e]}Keyword({symbol:t}){return[y.GetStrictKeyword,t]}PathExpression({head:t,tail:e}){let n=W.expr(t);return U(n[0]!==y.GetStrictKeyword,"[BUG] keyword in a PathExpression"),[...n,W.Tail(e)]}InterpolateExpression({parts:t}){return[y.Concat,t.map(e=>W.expr(e)).toArray()]}CallExpression({callee:t,args:e}){return[y.Call,W.expr(t),...W.Args(e)]}Tail({members:t}){return _n(t,e=>e.chars)}Args({positional:t,named:e}){return[this.Positional(t),this.NamedArguments(e)]}Positional({list:t}){return t.map(e=>W.expr(e)).toPresentArray()}NamedArgument({key:t,value:e}){return[t.chars,W.expr(e)]}NamedArguments({entries:t}){let e=t.toArray();if(ae(e)){let n=[],s=[];for(let i of e){let[l,u]=W.NamedArgument(i);n.push(l),s.push(u)}return yt(n),yt(s),[n,s]}return null}Not({value:t}){return[y.Not,W.expr(t)]}IfInline({condition:t,truthy:e,falsy:n}){let s=[y.IfInline,W.expr(t),W.expr(e)];return n&&s.push(W.expr(n)),s}GetDynamicVar({name:t}){return[y.GetDynamicVar,W.expr(t)]}Log({positional:t}){return[y.Log,this.Positional(t)]}};class So{constructor(e){this.statements=e}toArray(){return this.statements}}const me=new class{list(t){let e=[];for(let n of t){let s=me.content(n);s&&s instanceof So?e.push(...s.toArray()):e.push(s)}return e}content(t){return this.visitContent(t)}visitContent(t){switch(t.type){case"Debugger":return[y.Debugger,t.scope.getDebugInfo()];case"AppendComment":return this.AppendComment(t);case"AppendTextNode":return this.AppendTextNode(t);case"AppendTrustedHTML":return this.AppendTrustedHTML(t);case"Yield":return this.Yield(t);case"Component":return this.Component(t);case"SimpleElement":return this.SimpleElement(t);case"InElement":return this.InElement(t);case"InvokeBlock":return this.InvokeBlock(t);case"If":return this.If(t);case"Each":return this.Each(t);case"Let":return this.Let(t);case"WithDynamicVars":return this.WithDynamicVars(t);case"InvokeComponent":return this.InvokeComponent(t);default:return Bt(t)}}Yield({to:t,positional:e}){return[y.Yield,t,W.Positional(e)]}InElement({guid:t,insertBefore:e,destination:n,block:s}){let i=me.NamedBlock(s)[1],l=W.expr(n),u=W.expr(e);return u===void 0?[y.InElement,i,t,l]:[y.InElement,i,t,l,u]}InvokeBlock({head:t,args:e,blocks:n}){return[y.Block,W.expr(t),...W.Args(e),me.NamedBlocks(n)]}AppendTrustedHTML({html:t}){return[y.TrustingAppend,W.expr(t)]}AppendTextNode({text:t}){return[y.Append,W.expr(t)]}AppendComment({value:t}){return[y.Comment,t.chars]}SimpleElement({tag:t,params:e,body:n,dynamicFeatures:s}){let i=s?y.OpenElementWithSplat:y.OpenElement;return new So([[i,(l=t.chars,sp[l]??l)],...me.ElementParameters(e).toArray(),[y.FlushElement],...me.list(n),[y.CloseElement]]);var l}Component({tag:t,params:e,args:n,blocks:s}){let i=W.expr(t),l=me.ElementParameters(e),u=W.NamedArguments(n),p=me.NamedBlocks(s);return[y.Component,i,l.toPresentArray(),u,p]}ElementParameters({body:t}){return t.map(e=>me.ElementParameter(e))}ElementParameter(t){switch(t.type){case"SplatAttr":return[y.AttrSplat,t.symbol];case"DynamicAttr":return[(e=t.kind,e.component?e.trusting?y.TrustingComponentAttr:y.ComponentAttr:e.trusting?y.TrustingDynamicAttr:y.DynamicAttr),...mp(t)];case"StaticAttr":return[fp(t.kind),...dp(t)];case"Modifier":return[y.Modifier,W.expr(t.callee),...W.Args(t.args)]}var e}NamedBlocks({blocks:t}){let e=[],n=[];for(let s of t.toArray()){let[i,l]=me.NamedBlock(s);e.push(i),n.push(l)}return e.length>0?[e,n]:null}NamedBlock({name:t,body:e,scope:n}){let s=t.chars;return s==="inverse"&&(s="else"),[s,[me.list(e),n.slots]]}If({condition:t,block:e,inverse:n}){return[y.If,W.expr(t),me.NamedBlock(e)[1],n?me.NamedBlock(n)[1]:null]}Each({value:t,key:e,block:n,inverse:s}){return[y.Each,W.expr(t),e?W.expr(e):null,me.NamedBlock(n)[1],s?me.NamedBlock(s)[1]:null]}Let({positional:t,block:e}){return[y.Let,W.Positional(t),me.NamedBlock(e)[1]]}WithDynamicVars({named:t,block:e}){return[y.WithDynamicVars,W.NamedArguments(t),me.NamedBlock(e)[1]]}InvokeComponent({definition:t,args:e,blocks:n}){return[y.InvokeComponent,W.expr(t),W.Positional(e.positional),W.NamedArguments(e.named),n?me.NamedBlocks(n):null]}};function dp({name:t,value:e,namespace:n}){let s=[bo(t.chars),e.chars];return n&&s.push(n),s}function mp({name:t,value:e,namespace:n}){let s=[bo(t.chars),W.expr(e)];return n&&s.push(n),s}function fp(t){return t.component?y.StaticComponentAttr:y.StaticAttr}const Ts=(()=>{const t=typeof commonjsRequire=="function"?commonjsRequire:globalThis.require;if(t)try{const e=t("crypto"),n=s=>{const i=e.createHash("sha1");return i.update(s,"utf8"),i.digest("base64").substring(0,8)};return n("test"),n}catch{}return function(){return null}})(),Eo={id:Ts};function vo(t,e=Eo){const n=new or.Source(t??"",e.meta?.moduleName),[s,i]=ja(n,{lexicalScope:()=>!1,...e}),l=function(u,p,m){let S=new up(p.table,m),_=Pe.visitList(p.body,S).mapOk(N=>new hh({loc:p.loc,scope:p.table,body:N.toArray()}));return m&&(_=_.andThen(N=>hp.validate(N))),_}(0,s,e.strictMode??!1).mapOk(u=>function(p){let m=me.list(p.body),S=p.scope;return[m,S.symbols,S.hasEval,S.upvars]}(u));if(l.isOk)return[l.value,i];throw l.reason}function Zr(t,e=Eo){const[n,s]=vo(t,e),i=e.meta?.moduleName,l=e.id||Ts,u=JSON.stringify(n),p={id:l(JSON.stringify(e.meta)+u),block:u,moduleName:i??"(unknown template module)",scope:"796d24e6-2450-4fb0-8cdf-b65638b5ef70",isStrictMode:e.strictMode??!1};s.length===0&&delete p.scope;let m=JSON.stringify(p);if(s.length>0){const S=`()=>[${s.join(",")}]`;m=m.replace('"796d24e6-2450-4fb0-8cdf-b65638b5ef70"',S)}return m}const gp=Object.defineProperty({__proto__:null,Builder:le,NEWLINE:ih,ProgramSymbols:ro,WireFormatDebugger:pp,buildStatement:Vr,buildStatements:eh,c:nh,defaultId:Ts,precompile:Zr,precompileJSON:vo,s:rh,unicode:sh},Symbol.toStringTag,{value:"Module"}),bp=Object.defineProperty({__proto__:null,CI:!1,DEBUG:!1},Symbol.toStringTag,{value:"Module"}),As="5.12.0",yp=Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"});function ze(t,e){let n="";if(t&&(n+=`'${t}' `),e){let{column:s,line:i}=e.start||{line:void 0,column:void 0};i!==void 0&&s!==void 0&&(t&&(n+="@ "),n+=`L${i}:C${s}`)}return n&&(n=`(${n}) `),n}const Sp=Object.defineProperty({__proto__:null,default:ze},Symbol.toStringTag,{value:"Module"});function ko(t){let{builders:e}=t.syntax,n=t.meta?.moduleName,s=[[]];function i(l){let u=s[s.length-1];!u&&re("has parent",u),s.push(u.concat(l))}return{name:"assert-against-attrs",visitor:{Template:{enter(l){i(l.blockParams)},exit(){s.pop()}},Block:{enter(l){i(l.blockParams)},exit(){s.pop()}},ElementNode:{enter(l){i(l.blockParams)},exit(){s.pop()}},PathExpression(l){if(Ep(l,s[s.length-1]))re(`Using {{attrs}} to reference named arguments is not supported. {{${l.original}}} should be updated to {{@${l.original.slice(6)}}}. ${ze(n,l.loc)}`);else if(vp(l))return nr(`Using {{this.attrs}} to reference named arguments has been deprecated. {{${l.original}}} should be updated to {{@${l.original.slice(11)}}}. ${ze(n,l.loc)}`,!1,{id:"attrs-arg-access",url:"https://deprecations.emberjs.com/v3.x/#toc_attrs-arg-access",until:"6.0.0",for:"ember-source",since:{available:"3.26.0",enabled:"3.26.0"}}),e.path(`@${l.original.slice(11)}`,l.loc)}}}}function Ep(t,e){return t.head.type==="VarHead"&&t.head.name==="attrs"&&e.indexOf(t.head.name)===-1}function vp(t){return t.head.type==="ThisHead"&&t.tail[0]==="attrs"}const kp=Object.defineProperty({__proto__:null,default:ko},Symbol.toStringTag,{value:"Module"});function Cs(t){let e=t.meta?.moduleName;return{name:"assert-against-named-outlets",visitor:{MustacheStatement(n){if(n.path.type==="PathExpression"&&n.path.original==="outlet"&&n.params[0]){let s=ze(e,n.loc);re(`Named outlets were removed in Ember 4.0. See https://deprecations.emberjs.com/v3.x#toc_route-render-template for guidance on alternative APIs for named outlet use cases. ${s}`)}}}}}const wp=Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"});function et(t){return t.type==="PathExpression"}function _p(t){return t.type==="SubExpression"}function wo(t){return t.type==="StringLiteral"}function _o(t){return typeof t=="string"?t:t.original}function Ns(){let t=new Map;return{hasLocal:n=>t.has(n),node:{enter(n){let s="params"in n?n.params:n.blockParams;for(let i of s){let l=_o(i),u=t.get(i)||0;t.set(l,u+1)}},exit(n){let s="params"in n?n.params:n.blockParams;for(let i of s){let l=_o(i),u=t.get(l)-1;u===0?t.delete(l):t.set(l,u)}}}}}const Pp=Object.defineProperty({__proto__:null,isPath:et,isStringLiteral:wo,isSubExpression:_p,trackLocals:Ns},Symbol.toStringTag,{value:"Module"});function Po(t){let e=t.meta?.moduleName;return{name:"assert-input-helper-without-block",visitor:{BlockStatement(n){et(n.path)&&n.path.original==="input"&&re(Tp(e,n))}}}}function Tp(t,e){return`The {{input}} helper cannot be used in block form. ${ze(t,e.loc)}`}const Ap=Object.defineProperty({__proto__:null,default:Po},Symbol.toStringTag,{value:"Module"});function xs(t){let e=t.meta?.moduleName;return{name:"assert-reserved-named-arguments",visitor:{AttrNode({name:n,loc:s}){n==="@__ARGS__"&&re(`${Ls(n)} ${ze(e,s)}`)},HashPair({key:n,loc:s}){n==="__ARGS__"&&re(`${Ls(n)} ${ze(e,s)}`)},PathExpression({original:n,loc:s}){Np(n)&&re(`${Ls(n)} ${ze(e,s)}`)}}}}const Cp=["@arguments","@args","@block","@else"];function Np(t){return Cp.indexOf(t)!==-1||!!t.match(/^@[^a-z]/)}function Ls(t){return`'${t}' is reserved.`}const xp=Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"});function Os({syntax:t}){let{builders:e}=t;return{name:"transform-action-syntax",visitor:{ElementModifierStatement(n){Bs(n)&&Is(n,e)},MustacheStatement(n){Bs(n)&&Is(n,e)},SubExpression(n){Bs(n)&&Is(n,e)}}}}function Bs(t){return et(t.path)&&t.path.original==="action"}function Is(t,e){t.params.unshift(e.path("this"))}const Lp=Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"});function Ds(t){let{builders:e}=t.syntax;return{name:"transform-each-in-into-each",visitor:{BlockStatement(n){if(et(n.path)&&n.path.original==="each-in"){n.params[0]=e.sexpr(e.path("-each-in"),[n.params[0]]);let s=n.program.blockParams;if(!(!s||s.length===0))if(s.length===1)s=["( unused value )",s[0]];else{let i=s.shift();s=[s.shift(),i,...s]}return n.program.blockParams=s,e.block(e.path("each"),n.params,n.hash,n.program,n.inverse,n.loc)}}}}}const Op=Object.defineProperty({__proto__:null,default:Ds},Symbol.toStringTag,{value:"Module"});function Hs(t){let{builders:e}=t.syntax;return{name:"transform-each-track-array",visitor:{BlockStatement(n){if(et(n.path)&&n.path.original==="each"){let s=n.params[0];return!s&&re("has firstParam",s),s.type==="SubExpression"&&s.path.type==="PathExpression"&&s.path.original==="-each-in"?void 0:(n.params[0]=e.sexpr(e.path("-track-array"),[s]),e.block(e.path("each"),n.params,n.hash,n.program,n.inverse,n.loc))}}}}}const Bp=Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"});function Rs(t){let{builders:e}=t.syntax;return{name:"transform-in-element",visitor:{BlockStatement(n){if(et(n.path)&&n.path.original==="in-element"){let s=n.params[0];if(s&&!t.isProduction){let i=e.sexpr("-in-el-null",[s]);n.params.shift(),n.params.unshift(i)}n.hash.pairs.forEach(i=>{i.key==="insertBefore"&&!(i.value.type==="NullLiteral"||i.value.type==="UndefinedLiteral")&&re(`Can only pass null to insertBefore in in-element, received: ${JSON.stringify(i.value)}`,i.value.type==="NullLiteral"||i.value.type==="UndefinedLiteral")})}}}}}const Ip=Object.defineProperty({__proto__:null,default:Rs},Symbol.toStringTag,{value:"Module"});function Ms(){return{name:"transform-quoted-bindings-into-just-bindings",visitor:{ElementNode(t){let e=Hp(t);Dp(e)&&(e.value=e.value.parts[0])}}}}function Dp(t){if(!t)return!1;let e=t.value;return!e||e.type!=="ConcatStatement"||e.parts.length!==1?!1:e.parts[0].type==="MustacheStatement"}function Hp(t){let e=t.attributes;for(let n of e)if(n.name==="style")return n}const Rp=Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"}),To=Object.freeze(["helper","modifier"]);function Ao(t){let{builders:e}=t.syntax,n=t.meta?.moduleName,{hasLocal:s,node:i}=Ns(),l;return{name:"transform-resolutions",visitor:{Template:{enter(){l=new Set},exit(){l=void 0}},Block:i,ElementNode:{keys:{children:i}},MustacheStatement(u){if(!l&&re("[BUG] seen set should be available",l),!l.has(u)&&et(u.path)&&!Co(u.path,s)&&To.indexOf(u.path.original)!==-1){let p=e.mustache(u.path,No(e,u.params,u.path.original,n,u.loc),u.hash,u.trusting,u.loc,u.strip);return l.add(p),p}},SubExpression(u){if(!l&&re("[BUG] seen set should be available",l),!l.has(u)&&et(u.path)&&!Co(u.path,s)&&To.indexOf(u.path.original)!==-1){let p=e.sexpr(u.path,No(e,u.params,u.path.original,n,u.loc),u.hash,u.loc);return l.add(p),p}}}}}function Co(t,e){return t.head.type!=="ThisHead"&&t.tail.length===1&&e(t.head.original)}function No(t,e,n,s,i){let[l,...u]=e;return!l&&re(`The ${n} keyword requires at least one positional arguments ${ze(s,i)}`,l),wo(l)?[t.sexpr(t.path("-resolve",l.loc),[t.string(`${n}:${l.value}`)],void 0,l.loc),...u]:[t.sexpr(t.path("-disallow-dynamic-resolution",l.loc),[l],t.hash([t.pair("type",t.string(n),l.loc),t.pair("loc",t.string(ze(s,i)),l.loc),t.pair("original",t.string(Dt(l)))]),l.loc),...u]}const Mp=Object.defineProperty({__proto__:null,default:Ao},Symbol.toStringTag,{value:"Module"});function Fs(t){let{builders:e}=t.syntax,{hasLocal:n,node:s}=Ns();return{name:"transform-wrap-mount-and-outlet",visitor:{Template:s,ElementNode:s,Block:s,MustacheStatement(i){if(et(i.path)&&(i.path.original==="mount"||i.path.original==="outlet")&&!n(i.path.original)){let l=e.sexpr(e.path(`-${i.path.original}`),i.params,i.hash,i.loc);return e.mustache(e.path("component"),[l],e.hash(),void 0,i.loc)}}}}}const Fp=Object.defineProperty({__proto__:null,default:Fs},Symbol.toStringTag,{value:"Module"}),en=Object.freeze([Ms,xs,Os,ko,Ds,Po,Rs,Hs,Cs,Fs,Ao]),tn=Object.freeze([Ms,xs,Os,Ds,Rs,Hs,Cs,Fs]),xo=Object.freeze(["action","mut","readonly","unbound","-each-in","-in-el-null","-track-array","-mount","-outlet"]),Up=Object.defineProperty({__proto__:null,RESOLUTION_MODE_TRANSFORMS:en,STRICT_MODE_KEYWORDS:xo,STRICT_MODE_TRANSFORMS:tn},Symbol.toStringTag,{value:"Module"}),$p=/[A-Z]|::/g,Vp=/[A-Za-z0-9]/,Lo=new si(1e3,t=>t.replace($p,(e,n)=>e==="::"?"/":n===0||!Vp.test(t[n-1])?e.toLowerCase():`-${e.toLowerCase()}`)),jp=Object.defineProperty({__proto__:null,default:Lo},Symbol.toStringTag,{value:"Module"});let Oo=[];function Bo(t){return t.indexOf("::")===-1&&t.indexOf(":")>-1}function Er(t){let e=t.moduleName,n=Object.assign({meta:{},isProduction:!1,plugins:{ast:[]}},t,{moduleName:e,customizeComponentName(s){return Bo(s)&&re(`You tried to invoke a component named <${s} /> in "${e??"[NO MODULE]"}", but that is not a valid name for a component. Did you mean to use the "::" syntax for nested components?`,!Bo(s)),Lo.get(s)}});if("locals"in n&&!n.locals&&delete n.locals,n.moduleName){let s=n.meta;!s&&re("has meta",s),s.moduleName=n.moduleName}return n.strictMode&&(n.keywords=xo),n}function rn(t){return t.strictMode?tn:en}function nn(t={}){let e=Er(t),n=rn(e);if(!t.plugins)e.plugins={ast:[...Oo,...n]};else{let s=[...Oo,...n];!e.plugins&&re("expected plugins",e.plugins);let i=s.filter(l=>(!e.plugins&&re("expected plugins",e.plugins),e.plugins.ast.indexOf(l)===-1));e.plugins.ast=e.plugins.ast.concat(i)}return e}const Gp=Object.defineProperty({__proto__:null,buildCompileOptions:Er,default:nn,transformsFor:rn},Symbol.toStringTag,{value:"Module"});function vr(t,e={}){return Zr(t,nn(e))}const qp=Object.defineProperty({__proto__:null,default:vr},Symbol.toStringTag,{value:"Module"});function sn(t,e={}){if(!h.template)throw new Error("Cannot call `compile` with only the template compiler loaded. Please load `ember.debug.js` or `ember.prod.js` prior to calling `compile`.");return h.template(zp(vr(t,e)))}function zp(t){return new Function(`return ${t}`)()}const Wp=Object.defineProperty({__proto__:null,default:sn},Symbol.toStringTag,{value:"Module"}),Io=Object.defineProperty({__proto__:null,RESOLUTION_MODE_TRANSFORMS:en,STRICT_MODE_TRANSFORMS:tn,VERSION:As,_Ember:o.default,_GlimmerSyntax:ds,_buildCompileOptions:Er,_precompile:Zr,_preprocess:_t,_print:Dt,_transformsFor:rn,compile:sn,compileOptions:nn,precompile:vr},Symbol.toStringTag,{value:"Module"});function Do({context:t,hasTemplate:e,setTemplate:n}){t||(t=document);let i=t.querySelectorAll('script[type="text/x-handlebars"]');for(let l of i){let u=l.getAttribute("data-template-name")||l.getAttribute("id")||"application",p;if(p=sn(l.innerHTML,{moduleName:u}),e(u))throw new Error(`Template named "${u}" already exists.`);n(u,p),l.parentNode.removeChild(l)}}const Kp=Object.defineProperty({__proto__:null,default:Do},Symbol.toStringTag,{value:"Module"});if(f.default){let t=f.default,{hasTemplate:e,setTemplate:n}=h,{hasDOM:s}=Ee;t.initializer({name:"domTemplates",initialize(){s&&Do({context:document,hasTemplate:e,setTemplate:n})}})}const Jp=Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"});d.__registerTemplateCompiler(Io);const Ho=Object.defineProperty({__proto__:null,RESOLUTION_MODE_TRANSFORMS:en,STRICT_MODE_TRANSFORMS:tn,VERSION:As,_Ember:o.default,_GlimmerSyntax:ds,_buildCompileOptions:Er,_precompile:Zr,_preprocess:_t,_print:Dt,_transformsFor:rn,compile:sn,compileOptions:nn,precompile:vr},Symbol.toStringTag,{value:"Module"}),Yp=Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}),Xp=Object.defineProperty({__proto__:null,_buildCompileOptions:Er,_preprocess:_t,_print:Dt,precompile:vr},Symbol.toStringTag,{value:"Module"});g("@ember/-internals/browser-environment/index",Ee),g("@ember/-internals/environment/index",pn),g("@ember/-internals/utils/index",Ec),g("@ember/canary-features/index",kc),g("@ember/debug/index",bc),g("@ember/debug/lib/capture-render-tree",fc),g("@ember/debug/lib/deprecate",al),g("@ember/debug/lib/handlers",il),g("@ember/debug/lib/inspect",bl),g("@ember/debug/lib/testing",ol),g("@ember/debug/lib/warn",ll),g("@ember/deprecated-features/index",wc),g("@glimmer/compiler",gp),g("@glimmer/env",bp),g("@glimmer/syntax",ds),g("@glimmer/util",mc),g("@glimmer/vm",Xu),g("@glimmer/wire-format",Lc),g("@handlebars/parser/index",Vc),g("ember-template-compiler/index",Ho),g("ember-template-compiler/lib/plugins/assert-against-attrs",kp),g("ember-template-compiler/lib/plugins/assert-against-named-outlets",wp),g("ember-template-compiler/lib/plugins/assert-input-helper-without-block",Ap),g("ember-template-compiler/lib/plugins/assert-reserved-named-arguments",xp),g("ember-template-compiler/lib/plugins/index",Up),g("ember-template-compiler/lib/plugins/transform-action-syntax",Lp),g("ember-template-compiler/lib/plugins/transform-each-in-into-each",Op),g("ember-template-compiler/lib/plugins/transform-each-track-array",Bp),g("ember-template-compiler/lib/plugins/transform-in-element",Ip),g("ember-template-compiler/lib/plugins/transform-quoted-bindings-into-just-bindings",Rp),g("ember-template-compiler/lib/plugins/transform-resolutions",Mp),g("ember-template-compiler/lib/plugins/transform-wrap-mount-and-outlet",Fp),g("ember-template-compiler/lib/plugins/utils",Pp),g("ember-template-compiler/lib/public-api",Io),g("ember-template-compiler/lib/system/bootstrap",Kp),g("ember-template-compiler/lib/system/calculate-location-display",Sp),g("ember-template-compiler/lib/system/compile-options",Gp),g("ember-template-compiler/lib/system/compile",Wp),g("ember-template-compiler/lib/system/dasherize-component-name",jp),g("ember-template-compiler/lib/system/initializer",Jp),g("ember-template-compiler/lib/system/precompile",qp),g("ember-template-compiler/lib/types",Yp),g("ember-template-compiler/minimal",Xp),g("ember/version",yp),g("simple-html-tokenizer",Xc),c.exports&&(c.exports=Ho)}((()=>{try{return a("ember")}catch{return{__esModule:!0,default:{get ENV(){return a("@ember/-internals/environment").ENV},get FEATURES(){return a("@ember/canary-features").FEATURES},get VERSION(){return a("ember/version").default}}}}})(),(()=>{try{return a("@ember/-internals/glimmer")}catch{return{__esModule:!0}}})(),(()=>{try{return a("@ember/template-compilation")}catch{return{__esModule:!0,__registerTemplateCompiler(){}}}})(),(()=>{try{return a("@ember/application")}catch{return{__esModule:!0}}})())})(emberTemplateCompiler$1);var emberTemplateCompilerExports=emberTemplateCompiler$1.exports;const emberTemplateCompiler=getDefaultExportFromCjs(emberTemplateCompilerExports),_importSync0=_mergeNamespaces({__proto__:null,default:emberTemplateCompiler},[emberTemplateCompilerExports]);async function compileJS(c,r){let a=nameFor(c),o,h;try{let d=await transpile({code:c,name:a});if(!d)throw new Error("Compiled output is missing");o=evalSnippet(d,r).default}catch(d){h=d}return{name:a,component:o,error:h}}async function transpile({code:c,name:r}){let a=await preprocess(c,r),o=await transform(a,r);if(!o)return;let{code:h}=o;return h}const compiler=esCompat(_importSync0);let processor,fetchingPromise;async function preprocess(c,r){if(fetchingPromise||(fetchingPromise=__vitePreload(()=>import("./standalone-D7mgfpjU.js"),[])),!processor){let{Preprocessor:a}=await fetchingPromise;processor=new a}return processor.process(c,`${r}.js`)}async function transform(c,r,a={}){let o=await __vitePreload(()=>import("./babel-Cb6VwtSc.js").then(h=>h.b),__vite__mapDeps([0,1]));return o.transform(c,{filename:`${r}.js`,plugins:[[babelPluginEmberTemplateCompilation,{compiler}],[o.availablePlugins["proposal-decorators"],{legacy:!0}],[o.availablePlugins["proposal-class-properties"]]],presets:[[o.availablePresets.env,{modules:"cjs",targets:{esmodules:!0},forceAllTransforms:!1,...a}]]})}export{compileJS};
