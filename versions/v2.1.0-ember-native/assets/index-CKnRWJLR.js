function v(e){if(!e)throw new Error("Cannot call dataFrom with no event");if(!(e.currentTarget instanceof HTMLFormElement))throw new Error("Cannot pass dataFrom an object where the currentTarget property's value is not a form");const a=e.currentTarget,l=new FormData(a,e.submitter),n=Object.fromEntries(l.entries());for(const t of a.elements){const u=t.getAttribute("name");if(!u)continue;const f=u in n;if(!f&&!(t instanceof HTMLButtonElement)&&(n[u]=null),t instanceof HTMLSelectElement)n[t.name]=p(t);else if(t instanceof HTMLButtonElement&&f)n[t.name]=t.value||null;else if(t instanceof HTMLInputElement){const b=a.querySelectorAll(`[name="${u}"]`),i=Array.from(b);if(!i.every(r=>r instanceof HTMLInputElement))throw new Error(`Every element with name ${u} must be an input`);const m=i.length>1;switch(t.type){case"number":case"range":{n[t.name]=isNaN(t.valueAsNumber)?null:t.valueAsNumber;break}case"date":{n[t.name]=t.valueAsDate;break}case"datetime-local":{n[t.name]=isNaN(t.valueAsNumber)?null:new Date(t.valueAsNumber);break}case"checkbox":{m?n[t.name]=i.filter(r=>r.checked).map(r=>s(r)):n[t.name]=s(t);break}case"radio":{let r;m?r=i.find(h=>h.checked):r=t,n[t.name]=r?s(r):null;break}case"file":{t.files&&t.files.length>0?n[t.name]=t.multiple?Array.from(t.files):t.files[0]||null:n[t.name]=t.multiple?[]:null;break}}}}return n}function p(e){return e.multiple?k(e):g(e)}function g(e){if(e.selectedIndex===-1)return null;let a=null;for(let l of e.options)!l.disabled&&l.selected&&(a=d(l));return a}function k(e){if(e.selectedIndex===-1)return[];let a=[];for(let l of e.options)!l.disabled&&l.selected&&l.value!==""&&a.push(d(l));return a}function d(e){if(!e.disabled&&e.selected)return e.value===""?null:o(e)||e.value}function s(e){return e.disabled?void 0:e.getAttribute("value")!==null||o(e)?e.checked?o(e)||e.value:null:o(e)||e.checked}const c=new WeakMap;function w(e,a){c.set(e,a)}function V(e){return c.delete(e)}function o(e){return c.get(e)}export{v as dataFrom,V as deleteValue,w as setValue};
